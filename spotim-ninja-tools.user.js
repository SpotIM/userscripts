// ==UserScript==
// @name        SpotIM Ninja Tools
// @version     4.0.10
// @author      dutzi
// @description A bunch of shortcuts to make our lives easier
// @match       http*://*/*
// @namespace   https://spot.im/
// @noframes    true
// @resource    bigBlueFont https://rawcdn.githack.com/SpotIM/userscripts/53c2ab94cf3523830e17d299ed8abd533822d0c5/ninja-tools/src/assets/BigBlue_Terminal_437TT.TTF
// @resource    welcomeImage https://github.com/SpotIM/userscripts/raw/master/ninja-tools/src/assets/welcome-background.png
// @grant       GM_setValue
// @grant       GM_getValue
// @grant       GM_openInTab
// @grant       GM_setClipboard
// @grant       GM_deleteValue
// @grant       GM_notification
// @grant       GM_getResourceURL
// @grant       unsafeWindow
// ==/UserScript==

!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=14)}([function(t,e,n){"use strict";var o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(4)),s=o(n(2)),a=o(n(5)),l=i(n(16));let u,c,d,p,f,h,m,g;function v(){m=!1,g.parentNode||document.body.appendChild(g)}function _(t){function e(){g&&g.parentNode&&(g.parentNode.removeChild(g),b(0))}t?e():new Promise(t=>{if(m){const e=setInterval(()=>{m||(clearInterval(e),t())},100)}else t()}).then(e)}function b(t){d.style.width=100*t+"%"}function w(t){u.style.backgroundColor=t.bg,u.querySelector(".title")&&(u.querySelector(".title").style.backgroundColor=t.bg),u.style.borderColor=t.border}e.set=function(t,{timeout:e,color:n,step:o,numSteps:i,title:y,emoji:x,belowNotificationPopover:j,overflow:k}={}){!function(){if(p)return void(s.getUseDarkTheme()?u.classList.add("dark"):u.classList.remove("dark"));p=!0,u=document.createElement("div"),u.className="message reset-css",s.getUseDarkTheme()&&u.classList.add("dark");const t=document.createElement("div");t.className="inset_shadow",c=document.createElement("div"),d=document.createElement("div"),d.className="message_progress";const e=document.createElement("div");e.innerText="×",e.className="close_button",e.addEventListener("click",()=>{_(!0),r.stop()}),u.appendChild(c),u.appendChild(e),u.appendChild(t),u.appendChild(d),u.addEventListener("mouseenter",()=>{m=!0}),u.addEventListener("mouseleave",()=>{m=!1}),w(s.default().default),g=document.createElement("div"),document.body.appendChild(g),a.set(g.attachShadow({mode:"open"})),a.get().appendChild(u)}(),function(){if(f)return;f=!0;const t=document.createElement("style");t.innerHTML=l.default,a.get().appendChild(t)}(),v();let S=t;"scroll"===k&&(S=`<div class="scrollable_area">${S}</div>`);let C="";return y&&(C=`<div class="title">${y}</div>`),x&&(C+=`<div class="emoji">${x}</div>`),S=C+S,c.innerHTML!==S&&(c.innerHTML=S),j?u.classList.add("below_notifications"):u.classList.remove("below_notifications"),clearTimeout(h),e&&(h=setTimeout(()=>{_()},e)),n&&w(n),isNaN((null!=o?o:0)/(null!=i?i:0))?b(0):b(o/i),c},e.show=v,e.hide=_},function(t,e,n){"use strict";var o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(0)),s=i(n(8)),a=i(n(2));e.isTopMostFrame=()=>window.parent===window,e.findConversation=()=>document.querySelector("[data-conversation-id]")||document.querySelector('[data-spotim-app="conversation"]')||document.querySelector('[data-spotim-module="conversation"]'),e.getLauncherEl=t=>{const n=document.querySelector('script[data-spotim-module="spotim-launcher"]');return!n&&t&&(e.isTopMostFrame()?r.set("Could not find launcher script",{timeout:2e3,color:a.default().error,emoji:"😕"}):(window.parent.focus(),r.set(`${s.default.focusWarning}<br/>Could not find launcher script`,{timeout:3e3,color:a.default().error,emoji:"😕️"}))),n},e.isProduction=t=>unsafeWindow.__SPOTIMENV__?"production"===unsafeWindow.__SPOTIMENV__:t.src.indexOf("//launcher.spot.im")>-1,e.getSpotId=t=>{const e=t.src.split("/").pop().split("?")[0];return"launcher-bundle.js"===e?t.getAttribute("data-spot-id"):e},e.getPostId=t=>t.getAttribute("data-post-id"),e.getSpotimVersion=()=>unsafeWindow.__SPOTIM__&&"IFRAME"!==(e.findConversation()||{}).tagName?2:1,e.getConfigUrl=()=>{const t=e.getLauncherEl(!0);return`https://api-2-0.spot.im/v1.0.0/config/launcher/${e.getSpotId(t)}/${e.getPostId(t)}/vendor,init,conversation`},e.padTime=t=>1===t.length?`0${t}`:t,e.renderTable=t=>"<div class='table'><tbody>"+t.map(t=>"<div class='tr'><div class='td'>"+t.join("</div><div class='td'>")+"</div></div>").join("")+"</tbody></div>",e.createElement=(t,e,n="div")=>`<${n} class="${e}">${t}</${n}>`,e.getRandomOptimisticEmoji=()=>{const t=["🎈","🚀","🌈","🦄"];return t[Math.floor(Math.random()*t.length)]},e.onFoundSpotimObject=t=>{function e(){unsafeWindow.__SPOTIM__&&(clearInterval(n),t())}const n=setInterval(e,500);e()},e.isWindows="Win32"===window.navigator.platform},function(t,e,n){"use strict";var o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const i=o(n(3));e.getUseDarkTheme=()=>{const t=i.get(),{useDarkTheme:e}=t;return e};const r={default:{bg:"#467FDB",border:"#46abdb"},error:{bg:"#f44336",border:"#d81054"},success:{bg:"#4caf50",border:"#4dd052"}},s={default:{bg:"#121212",border:"#424242"},error:{bg:"#121212",border:"#424242"},success:{bg:"#121212",border:"#424242"}};e.default=()=>e.getUseDarkTheme()?s:r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.get=()=>GM_getValue("prefs",{}),e.set=t=>GM_setValue("prefs",Object.assign(Object.assign({},e.get()),t))},function(t,e,n){"use strict";var o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(0)),s=o(n(1)),a=i(n(8)),l=i(n(2));let u,c,d,p,f;function h(){if(u)return;let t=new IntersectionObserver(t=>{f=t[0].isIntersecting},{rootMargin:"0px",threshold:0});r.set("Looking for conversation element",{title:"Scroll To Conversation"}),u=!0,c=setInterval(()=>{let e;e=s.findConversation(),e?(t.observe(e),f||(e.scrollIntoView(),window.scrollBy(0,-200)),r.set('Hit <span class="mono">escape</span> to stop',{title:"Scroll To Conversation",color:l.default().success,emoji:"😃"}),function(t){Object.assign(t.style,{boxShadow:"rgb(76, 175, 80) 0px 0px 0px 4px,\n        rgb(26, 216, 34) 0px 0px 0px 5px,\n        #00000036 0px 0px 40px 12px,\n        #00000085 0px 0px 4px 5px,\n        black 0px 0px 40px -4px",borderRadius:"8px"}),t.dataset.sptmninjaHighlighted=!0,p=!0}(e)):(d||(window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}),d=!0),s.isTopMostFrame()?r.set("Element not found. Try scrolling up and down a bit.",{color:l.default().error,emoji:"😕",title:"Scroll To Conversation"}):(window.parent.focus(),r.set(`${a.default.focusWarning}<br/>Scroll To Conversation... not found. Try scrolling up and down a bit.`,{color:l.default().error,timeout:3e3,emoji:"😕"}),m({hideMessage:!1})))},100)}function m({hideMessage:t}={hideMessage:!0}){p&&([...document.querySelectorAll("[data-sptmninja-highlighted]")].forEach(t=>{t.style.boxShadow=null,t.style.borderRadius=null,delete t.dataset.sptmninjaHighlighted}),p=!1),u&&(t&&r.hide(),clearInterval(c),u=!1,d=!1)}e.start=h,e.stop=m,e.toggle=function(){u?m():h()}},function(t,e,n){"use strict";let o;Object.defineProperty(e,"__esModule",{value:!0}),e.get=function(){return o},e.set=function(t){o=t}},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(n(4)),a=i(n(0)),l=i(n(1)),u=i(n(3)),c=i(n(17)),d=i(n(18)),p=i(n(7)),f=i(n(23)),h=i(n(12)),m=(r(n(13)),r(n(2))),g=r(n(27)),v=r(n(11)),_=r(n(28));let b={sss:()=>{s.toggle()},ssc:()=>{s.stop();const t=l.getLauncherEl(!0);if(t){const e=l.getSpotId(t);GM_setClipboard(e),a.set(`Copied ${e} to clipboard!`,{timeout:2e3,color:m.default().default,emoji:"😃"})}},ssi:()=>{function t(t){return unsafeWindow.__spotImNinjaToolsCopy=t=>{const e=t.currentTarget;GM_setClipboard(e.parentElement.children[0].innerText),e.classList.add("showCheckmark"),setTimeout(()=>{e.classList.remove("showCheckmark")},1e3)},`\n        <style>\n          ${_.default}\n        </style>\n        <div class="infoLine">\n          <div>${t}</div>\n          <button onClick="__spotImNinjaToolsCopy(event)" class="copyButton">\n            <div class="checkmark">✔</div>\n            <div>Copy</div>\n          </button>\n        </div>\n      `}s.stop();const e=l.getLauncherEl(!0);if(e){const n=l.getSpotId(e),o=l.getPostId(e),i=l.isProduction(e)?"Production":"Dev";a.set(l.renderTable([["Spot Id",t(n)],["Post Id",t(o)],["Environment",t(i)]]),{color:m.default().default,title:"Spot Info"})}},ssv:()=>o(void 0,void 0,void 0,(function*(){if(s.stop(),unsafeWindow.__SPOTIM__){const t=unsafeWindow.__SPOTIM__.SERVICES.configProvider._data.assets_config;if(t.filter(t=>t.url.indexOf("tags")>-1).length){const e=l.renderTable(t.filter(t=>t.url.indexOf("tags")>-1).sort((t,e)=>t.name<e.name?-1:1).map(t=>[`<span class="mono"><a target="_blank" href="${t.url}">${t.url.match(/tags\/(.*?)\//)[1]}</a></span>`,t.name]))+`<div class="muted_text margin_top">Page loaded at ${g.default}</div>`;a.set(e,{color:m.default().default,emoji:l.getRandomOptimisticEmoji(),title:"Assets"})}else a.set("No assets found. Are you running locally?",{timeout:2e3,color:m.default().error,emoji:"😕"})}else a.set("Could not find __SPOTIM__ object",{timeout:2e3,color:m.default().error,emoji:"😕"})})),ssa:()=>{s.stop();const t=l.getLauncherEl(!0);t&&(l.isProduction(t)?c.open({spotId:l.getSpotId(t)}):window.open("https://admin.staging-spot.im/internal/super-admin"))},ssda:()=>{s.stop();const t=l.getLauncherEl(!0);t&&(l.isProduction(t)?window.open("https://admin.spot.im/internal/super-admin"):window.open("https://admin.staging-spot.im/internal/super-admin"))},sso:()=>{s.stop();const t=l.getLauncherEl(!0);l.isProduction(t)&&window.open(l.getConfigUrl())},ssn:()=>o(void 0,void 0,void 0,(function*(){s.stop(),d.toggleNotifyOnChange()})),__ssa:()=>o(void 0,void 0,void 0,(function*(){const t=u.get().showVersionsOnLoad;yield u.set({showVersionsOnLoad:!t}),t?a.set("Stopped showing you asset versions on page load",{timeout:4e3,emoji:"❌",color:m.default().default}):a.set("I will now show you asset versions on page load!",{timeout:4e3,emoji:"🤠",color:m.default().success})})),__ssn:()=>{p.show()},__ssc:()=>{c.openCredentialsForm()},__ssp:()=>{s.stop();const t=l.getLauncherEl(!0);if(t){const e=l.getPostId(t);GM_setClipboard(e),a.set(`Copied ${e} to clipboard!`,{timeout:2e3,color:m.default().default,emoji:"😃"})}},__ssdt:()=>o(void 0,void 0,void 0,(function*(){const{useDarkTheme:t=!1}=u.get();yield u.set({useDarkTheme:!t}),setTimeout(()=>{h.show()},0)})),ssh:()=>{s.stop(),f.show()}};b=v.default.reduce((t,e)=>Object.assign(Object.assign({},t),{[e.keyCombo]:()=>o(void 0,void 0,void 0,(function*(){try{const t=JSON.parse(unsafeWindow.localStorage.getItem("SPOT_AB")),n=t[e.id].variant,o=String.fromCharCode(n.charCodeAt(0)+1),i=e.variants.find(t=>t.id===o)||e.variants[0];let r;t[e.id].variant=i.id,r=i.statusText,a.set(r,{emoji:"👍🏻",color:m.default().success}),unsafeWindow.localStorage.setItem("SPOT_AB",JSON.stringify(t))}catch(t){a.set("Are you sure this spot has this test?",{title:`Couldn't ${e.description}`,emoji:"😞",color:m.default().error})}}))}),b),e.default=b},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(n(3)),a=i(n(0)),l=r(n(9)),u=r(n(22)),c=[{version:"4.0.5",list:[{title:"Added Dark Mode (Toggle Dark Mode in the Command Palette)"}]},{version:"4.0.2",list:[{title:"Added Set Credentials Command and Credentials Form"}]},{version:"3.7",list:[{title:"Added Recently Used commands",description:"The command you last used will show up first, next time you open the command palette"}]},{version:"3.4",list:[{title:"The following commands were added:",list:[{title:"Toggle Show Asset Versions on Load",description:"If enabled, will show the asset versions popup once the page loads"},{title:"A/B Test: Toggle Redesign"},{title:"A/B Test: Cycle Through Reaction Variants"},{title:"A/B Test: Toggle Show Scores Before/After Click"}]}]}];function d(t,e){const n=e?"latest":"";return(`\n    <div class="whatsNewTitle ${n}">${e?`⭐️ What's New in v${t.version}:`:"✨ v"+t.version+":"}</div>\n      <ul class="${n}">\n        ${function t(e){return e.map(e=>`\n        <li>\n          ${e.title}\n          ${e.description?`<div class="whatsNewDescription">${e.description}</div>`:""}\n        </li>\n        ${e.list?"<ul>"+t(e.list)+"</ul>":""}\n      `).join("")}(t.list)}\n      </ul>\n    `)}function p(t){return o(this,void 0,void 0,(function*(){const e=GM_info.script.version,{dontShowWhatsNew:n}=s.get();yield s.set({lastWhatsNewVersion:e});const i=function(t){const[e,n]=l.default([t?"Don't Show Me What's New On Upgrade":"Show Me What's New Next Upgrade","Close"]);return{html:`\n    <style>\n      ${u.default}\n    </style>\n    <div class="whatsNewWrapper">\n      <div class="whatsNewContent">\n        ${d(c[0],!0)}\n        ${c.slice(1).map(t=>d(t)).join("")}\n      </div>\n      <div class="whatsNewFeatureRequest">\n        💡 Got a feature request? <a href="slack://channel?id=CSZGJD6R1&team=T0460KVUF">Hit us up on Slack!</a>\n      </div>\n      ${e()}\n    </div>\n  `,addListeners:n}}(!n);a.set(i.html,{title:t?"SpotIM Ninja Tools Upgraded! 🥳":"SpotIM Ninja Tools Changelog"}),i.addListeners(t=>{0===t?function(){o(this,void 0,void 0,(function*(){const{dontShowWhatsNew:t}=s.get();yield s.set({dontShowWhatsNew:!t}),a.hide(!0)}))}():a.hide(!0)})}))}e.show=p,e.showIfUpgraded=function(){return o(this,void 0,void 0,(function*(){if(s.get().isNotFirstRun){const{lastWhatsNewVersion:t,dontShowWhatsNew:e}=s.get(),n=GM_info.script.version;if(e)return;t&&t===n||!c.find(t=>t.version===n)||p(!0),yield s.set({lastWhatsNewVersion:n})}}))},e.setCurrentVersionAsLastShown=function(){return o(this,void 0,void 0,(function*(){const t=GM_info.script.version;yield s.set({lastWhatsNewVersion:t})}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={focusWarning:"⚠️⚠️️⚠️ TRY AGAIN. (Moving focus to parent frame) ️⚠️⚠️️⚠️"}},function(t,e,n){"use strict";var o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const i=o(n(5));e.default=function(t){return[function(){return`\n        <div class="gutterActions">\n        ${t.map((t,e)=>`\n          <button class="gutterActionsButton" id="gutterButton${e}">\n            ${t}\n          </button>\n        `).join("")}\n      </div>\n    `},function(e){t.forEach((t,n)=>{var o;null===(o=i.get().querySelector(`#gutterButton${n}`))||void 0===o||o.addEventListener("click",e.bind(null,n))})}]}},function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=[{keyCombo:"sss",description:"Scroll to Conversation"},{keyCombo:"ssi",description:"Show Info"},{keyCombo:"ssc",description:"Copy Spot ID to Clipboard"},{keyCombo:"ssa",description:"Open Host Panel",detailedDescription:"Will require you to enter the username and password you use to log in to the host panel on first run and won't work if you use Google to sign in"},{keyCombo:"ssv",description:"Show Asset Versions"},{keyCombo:"sso",description:"Open Config Data"},{keyCombo:"ssn",description:"Notify On Asset Updates",detailedDescription:"Will start constantly checking if an update to one of our products was released for this spot and pop a notification once that happens"},{keyCombo:"ssh",description:"Show Help"},{keyCombo:"__ssn",description:"What's New?",unlisted:!0},{keyCombo:"__ssdt",description:"Toggle Dark Theme",unlisted:!0},{keyCombo:"__ssa",description:"Toggle Show Asset Versions on Load",detailedDescription:"If enabled, will display the asset versions once the page loads",unlisted:!0},{keyCombo:"__ssc",description:"Set Host Panel Credentials",unlisted:!0},{keyCombo:"__ssp",description:"Copy Post ID to Clipboard",unlisted:!0},...o(n(11)).default.map(t=>({keyCombo:t.keyCombo,description:"A/B Test: "+t.description,unlisted:!0}))];e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=[{name:"Redesign",description:"Toggle Redesign",id:35,variants:[{id:"A",statusText:"Redesign Disabled"},{id:"B",statusText:"Redesign Enabled"}]},{name:"Reactions",description:"Cycle Through Reaction Variants",id:34,variants:[{id:"A",statusText:"Reactions Disabled"},{id:"B",statusText:"Reactions Enabled"},{id:"C",statusText:"Reactions Enabled (With Ads)"}]},{name:"Show Scores",description:"Toggle Show Scores Before/After Click",id:37,variants:[{id:"A",statusText:"Showing Scores After Click"},{id:"B",statusText:"Showing Scores Before Click"}]},{name:"Show Feed",description:"Toggle Show Feed",id:39,variants:[{id:"A",statusText:"Showing Feed"},{id:"B",statusText:"Not Showing Feed"}]},{name:"Change Feed Placement",description:"Toggle Feed Above/Below Conversation",id:40,variants:[{id:"A",statusText:"Feed Above Conversation"},{id:"B",statusText:"Feed Below Conversation"}]}].map((t,e)=>Object.assign(Object.assign({},t),{keyCombo:`__ssab${e}`}));e.default=o},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const s=i(n(10)),a=r(n(4)),l=r(n(0)),u=r(n(1)),c=r(n(3)),d=i(n(2)),p=i(n(6)),f=r(n(5)),h=i(n(24)),m=i(n(25));let g=0;function v(t){const e=t.target.closest(".tr");if(e&&e.children.length){const t=e.children[0].children[0].dataset.keyCombo,n=p.default[t];n&&n()}}e.show=function(){return o(this,void 0,void 0,(function*(){g=0;let t,e=yield(()=>o(this,void 0,void 0,(function*(){const{lastCommandThatRanKeyCombo:t}=c.get();if(t)return s.default.find(e=>e.keyCombo===t)})))();a.stop({hideMessage:!1});const n=l.set(`<style>\n      ${m.default}\n    </style>\n    <input class="input"><div class="results"></div>`,{title:`${u.getLauncherEl(!1)?"":'<span class="titleIcon" title="Can\'t find Launcher script tag">⚠️</span>'}Start Typing A Command`,color:d.default().default});n.querySelector(".results").addEventListener("click",v);const i=f.get().querySelector(".input");function r(){const n=i.value,o=h.default.filter(n,s.default,{pre:'<span class="fuzzyHighlight">',post:"</span>",extract:t=>t.description});if(t=o.map(t=>Object.assign(Object.assign({},s.default[t.index]),{description:t.string})),!n&&e){const n=t.findIndex(t=>{var n;return t.keyCombo===(null===(n=e)||void 0===n?void 0:n.keyCombo)});t.splice(n,1),t.unshift(e)}}function _(o){i.value.trim()?n.querySelector(".results").classList.add("inputNotEmpty"):n.querySelector(".results").classList.remove("inputNotEmpty"),n.querySelector(".results").innerHTML=t.length?u.renderTable(t.map((t,n)=>[`<span class="mono ${t.unlisted?"hidden":""}" data-key-combo="${t.keyCombo}">${t.unlisted?"×":t.keyCombo}</span>`,`<span\n                  class="pallete_row_main_col ${g===n?"weight_bold":"muted_result"}"\n                  ${g===n?"data-selected":""}\n                  >\n                  <div class="palette_row_description">${t.description}</div>\n                  ${e===t?"<div class='palette_row_recently_used'>recently used</div>":""}\n                </span>`,g===n?u.createElement("⏎","muted_text"):""])):"";const r=f.get().querySelector("[data-selected]");if(r){const t=r.parentNode.parentNode;(function(t){const e=t.getBoundingClientRect(),n=f.get().querySelector(".results").getBoundingClientRect();return e.y>n.y&&e.bottom<n.bottom})(t)||t.scrollIntoView(o)}}r(),_(),i.focus(),i.addEventListener("keydown",n=>{if(38===n.keyCode)g--,g<0&&(g=t.length-1),n.preventDefault(),_(!0);else if(40===n.keyCode)g++,g>=t.length&&(g=0),n.preventDefault(),_(!1);else if(13===n.keyCode){if(function(){var n;const o=t[g];return e=o,c.set({lastCommandThatRanKeyCombo:null===(n=e)||void 0===n?void 0:n.keyCombo}),!!o&&(l.hide(!0),p.default[o.keyCombo](),!0)}())return}else _()}),i.addEventListener("keyup",e=>{r(),g>=t.length&&(g=Math.max(t.length-1,0)),38!==e.keyCode&&40!==e.keyCode&&_()})}))}},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(n(3)),a=i(n(0)),l=r(n(2)),u=i(n(7)),c=r(n(26)),d=n(1);e.default=t=>o(void 0,void 0,void 0,(function*(){s.get().isNotFirstRun&&!t||(a.set(function(){const t=unsafeWindow.document.createElement("style");t.innerHTML=`\n    @font-face {\n      font-family: "BigBlue TerminalPlus";\n      src: url('${GM_getResourceURL("bigBlueFont")}') format('truetype');\n    }\n  `,unsafeWindow.document.head.appendChild(t);const e=d.isWindows?"Alt+S":"Ctrl+S";return(`\n    <style>\n      ${c.default}\n    </style>\n    <div class="welcomeMessageWrapper">\n      <div class="welcomeMessageWrapperMessage">\n        <p>👋 Welcome,</p>\n        <p>You can now hit <span class="shortcut">${e}</span> to open the command palette.</p>\n      </div>\n      <img src="${GM_getResourceURL("welcomeImage")}">\n      <p class="cta">Press ${e}</p>\n    </div>\n  `)}(),{color:l.default().default,title:"Welcome to Spot.IM Ninja Tools!"}),yield s.set({isNotFirstRun:!0}),yield u.setCurrentVersionAsLastShown())}))},function(t,e,n){"use strict";var o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(15)),s=i(n(13)),a=i(n(29)),l=i(n(30)),u=o(n(7));l.default(),s.default(),a.default(),u.showIfUpgraded(),r.init()},function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(6)),s=i(n(4)),a=i(n(0)),l=i(n(12)),u=n(1);e.init=function(){let t,e=[];document.addEventListener("keydown",(function(n){if(n.key&&"escape"===n.key.toLowerCase()&&(s.stop(),a.hide(!0)),function(){var t,e;const n=document.activeElement;return(null===(t=n)||void 0===t?void 0:t.getAttribute("contenteditable"))||"INPUT"===(null===(e=n)||void 0===e?void 0:e.tagName)}())return;if(("s"===n.key.toLowerCase()||"ד"===n.key)&&(u.isWindows&&n.altKey||n.ctrlKey))return void l.show();e.push(n.key.toLowerCase()),clearTimeout(t),!function(t){const e=r.default[t];return!!e&&(e(),!0)}(e.join(""))?t=setTimeout(()=>{e=[]},500):e=[]}))}},function(t,e,n){"use strict";n.r(e),e.default='@keyframes spotim-scroll-to-comments-appear {\n  0% {\n    transform: scale(0.7);\n    opacity: 0;\n  }\n  90% {\n    transform: scale(1.02);\n    opacity: 1;\n  }\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n\n.reset-css {\n  azimuth: initial;\n  border-collapse: initial;\n  border-spacing: initial;\n  caption-side: initial;\n  color: initial;\n  cursor: initial;\n  direction: initial;\n  elevation: initial;\n  empty-cells: initial;\n  font-family: initial;\n  font-size: initial;\n  font-style: initial;\n  font-variant: initial;\n  font-weight: initial;\n  font: initial;\n  letter-spacing: initial;\n  line-height: initial;\n  list-style-image: initial;\n  list-style-position: initial;\n  list-style-type: initial;\n  list-style: initial;\n  orphans: initial;\n  pitch-range: initial;\n  pitch: initial;\n  quotes: initial;\n  richness: initial;\n  speak-header: initial;\n  speak-numeral: initial;\n  speak-punctuation: initial;\n  speak: initial;\n  speech-rate: initial;\n  stress: initial;\n  text-align: initial;\n  text-indent: initial;\n  text-transform: initial;\n  visibility: initial;\n  voice-family: initial;\n  volume: initial;\n  white-space: initial;\n  widows: initial;\n  word-spacing: initial;\n  -webkit-font-smoothing: unset;\n}\n\n.message {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  text-align: center;\n  background: red;\n  color: white;\n  font-weight: bold;\n  font-family: Helvetica;\n  font-size: 18px;\n  padding: 10px;\n  line-height: 1.5;\n  z-index: 100000000000;\n  animation: spotim-scroll-to-comments-appear 0.2s ease-out;\n  direction: ltr;\n  max-width: 600px;\n  margin: 5em auto;\n  border-radius: 1em;\n  overflow: hidden;\n  border: 3px solid;\n  box-shadow: 0px 1px 4px #00000075, 0px 1px 24px #00000075,\n    0px 0px 40px 5px #0000001c inset;\n  text-shadow: 0px 2px #00000033;\n}\n\n.below_notifications {\n  margin: 10em auto;\n}\n\n/*\n * Why not use normal "table" HTML tag you ask?\n *\n * Well, initially this extension would render dierctly to the document,\n * I only started rendering to a shadow-dom long after I wrote this.\n * This caused a lot of CSS override issues so I succombed and decided to\n * use only divs everywere.\n * Someday I\'ll clear this thing up.\n */\n.message .table {\n  display: table;\n  border: none;\n  width: 100%;\n  text-align: left;\n  border-collapse: collapse;\n  margin: 0;\n  color: inherit;\n  font-weight: inherit;\n}\n\n.message .table .tr {\n  display: table-row;\n  background: initial !important;\n}\n\n.message .table .td {\n  display: table-cell;\n  padding: initial;\n  border: none;\n  border-bottom: 1px solid #00000021;\n}\n\n.message.dark .table .td {\n  border-bottom: 1px solid #ffffff21;\n}\n\n.message .table .tr:last-child .td {\n  border-bottom: none;\n}\n\n.message .table .td:first-child {\n  text-align: right;\n  padding-right: 12px;\n}\n\n.scrollable_area {\n  max-height: calc(100vh - 300px);\n  overflow-y: auto;\n}\n\n.close_button {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  color: #ffffff73;\n  cursor: pointer;\n  padding: 10px;\n  line-height: 11px;\n  z-index: 11;\n}\n\n.close_button:active {\n  text-shadow: 0px -2px #00000033;\n}\n\n.inset_shadow {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  box-shadow: 0px 0px 3px black inset;\n  z-index: 100;\n  border-radius: 14px;\n  pointer-events: none;\n}\n\n.title {\n  padding: 12px 0px 10px;\n  box-shadow: 0px -20px 50px -24px #00ffff36 inset, 0px 1px 1px #00000038;\n  margin: -10px -10px 8px;\n  position: relative;\n  z-index: 10;\n}\n\n.dark .title {\n  box-shadow: 0px -20px 50px -24px #c3c3c336 inset, 0px 1px 1px #cccccc38;\n}\n\n.titleIcon {\n  margin-inline-end: 12px;\n}\n\n.muted_text {\n  text-shadow: none;\n  color: #ffffff73;\n  font-weight: normal;\n}\n\n.weight_normal {\n  font-weight: normal;\n}\n\n.muted_result {\n  font-weight: normal;\n  opacity: 0.8;\n}\n\n.weight_bold {\n  font-weight: bold;\n}\n\n.pallete_row_main_col {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.palette_row_description {\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.palette_row_recently_used {\n  font-weight: normal;\n  font-size: 0.7em;\n  opacity: 0.7;\n  margin: 0px 7px;\n  flex: 0 0 auto;\n  transform: translateX(26px);\n}\n\n[data-selected] .palette_row_recently_used {\n  transform: translateX(0px);\n}\n\n.margin_top {\n  margin-top: 12px;\n}\n\n.emoji {\n  position: absolute;\n  font-size: 6em;\n  transform: translateY(-50%);\n  top: 50%;\n  left: -15px;\n  z-index: -1;\n  text-shadow: 0px 0px 10px #0000006e;\n  height: 150px;\n}\n\n.title + .emoji {\n  margin-top: 20px;\n}\n\n.message_progress {\n  background: black;\n  position: absolute;\n  left: 0px;\n  height: 100%;\n  width: 0%;\n  top: 0px;\n  opacity: 0.2;\n  z-index: -1;\n  transition: width 0.2s ease-out;\n}\n\n.code {\n  font-family: monaco;\n  font-size: 13px;\n  color: #d3d5da;\n  margin: 10px 0px;\n  display: inline-block;\n  background: #2b579c;\n  padding: 4px 8px;\n  border-radius: 5px;\n}\n\n.mono {\n  background: #0000003d;\n  padding: 1px 7px;\n  border-radius: 5px;\n  box-shadow: 0px 1px 0px #00000063;\n  color: white;\n  font-family: monaco;\n  font-size: 15px;\n  margin: 4px 0px;\n  display: inline-block;\n}\n\n.dark .mono {\n  background: #ffffff3d;\n}\n\n.hidden {\n  opacity: 0.5;\n}\n\n.detailed_description {\n  font-weight: normal;\n  font-size: 0.8em;\n  margin: 2px 0px 5px;\n  color: #ffffffbf;\n}\n\n.mono a {\n  color: inherit;\n  text-decoration: none;\n  outline: none;\n}\n\n.mono a:focus,\n.mono a:hover {\n  text-decoration: underline;\n}\n\n.input {\n  width: 100%;\n  padding: 10px;\n  box-sizing: border-box;\n  font-size: 20px;\n  background: #ffffff33;\n  border: none;\n  border-radius: 6px;\n  outline: none;\n  box-shadow: 0px 3px 9px #0000002e inset;\n  border-top: 1px solid #0000004f;\n  border-bottom: 1px solid #ffffff42;\n  color: white;\n  font-weight: bold;\n}\n\n.results {\n  max-height: 270px;\n  overflow-y: scroll;\n  padding-right: 10px;\n}\n\n.input + .results:not(:empty) {\n  margin-top: 12px;\n}\n\n.results .tr {\n  cursor: pointer;\n}\n\n.input + .results .table .tr .td:first-child {\n  padding-right: 20px;\n}\n\n.input + .results .table .tr .td:nth-child(2) {\n  width: 100%;\n}\n\n::-webkit-scrollbar {\n  width: 6px;\n}\n\n::-webkit-scrollbar-track {\n  border-radius: 10px;\n  background: #0000001a;\n}\n\n::-webkit-scrollbar-thumb {\n  border-radius: 10px;\n  background: #00000036;\n}\n\n.gutterActions {\n  display: flex;\n  margin: -10px;\n  padding: 10px 0px;\n  border-top: 1px solid #0000000f;\n  background: linear-gradient(#ffffff2b, #0000001a);\n  margin-top: 0px;\n  z-index: 1;\n  position: relative;\n}\n\n.gutterActions .gutterActionsButton {\n  font-size: inherit;\n  font-family: inherit;\n  color: inherit;\n  background: none;\n  border: none;\n  flex: auto;\n  margin: -10px 0px;\n  border-right: 1px solid #00000038;\n  cursor: pointer;\n  padding: 1em 0px;\n}\n'},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(n(0)),a=i(n(1)),l=i(n(5)),u=r(n(2)),c=r(n(9));let d,p;function f(t){const[n,i]=c.default(["Delete Credentials","Cancel","Submit"]),r="\n      margin: 1em 2em 1.5em;\n    ",d="\n      font-weight: normal;\n      margin: 1em 0px;\n      text-align: left;\n    ",p="\n      display: flex;\n      align-items: baseline;\n      margin: 1em 3em;\n    ",f="\n      margin-right: 1em;\n      width: 120px;\n      text-align: right;\n    ",h="\n      text-align: left;\n      font-size: 0.8em;\n      font-weight: normal;\n      opacity: 0.8;\n    ",m="\n      position: absolute;\n      visibility: hidden\n    ",g=t?"Your host panel credentials are required.":"Enter your host panel credentials:";function v(){return o(this,void 0,void 0,(function*(){const n=l.get().querySelector("#emailInput").value.trim(),o=l.get().querySelector("#passwordInput").value.trim();n&&o&&(yield GM_setValue("email",n),yield GM_setValue("password",o),s.set("Your credentials were set!",{timeout:2e3,color:u.default().success,emoji:"😃"}),t&&setTimeout(()=>{e.open({spotId:a.getSpotId(a.getLauncherEl())})},2e3))}))}s.set(`\n      <form style="${r}">\n        <div style="${d}">${g}</div>\n        <div style="${p}">\n          <label style="${f}">Email</label>\n          <input id="emailInput" class="input" >\n        </div>\n        <div style="${p}">\n          <label style="${f}">Password</label>\n          <input id="passwordInput" class="input" type="password">\n        </div>\n        <div style="${h}">\n          If you're using Google to sign to the Host Panel this won't work.\n          You'll have to create an account using your email address to use\n          this feature.\n        </div>\n        <input style="${m}" type="submit"/>\n      </form>\n    ${n()}\n  `,{title:t?"Open Host Panel":"Set Host Panel Credentials",color:u.default().default}),setTimeout(()=>{l.get().querySelector("#emailInput").focus()},10),l.get().querySelector("form").addEventListener("submit",t=>{t.preventDefault(),v()}),i((function(t){return o(this,void 0,void 0,(function*(){2===t?v():1===t?s.hide(!0):(yield GM_setValue("email",""),yield GM_setValue("password",""),s.set("Your credentials were deleted!",{timeout:3e3,color:u.default().default,emoji:"👍🏻"}))}))}))}e.openCredentialsForm=f,e.open=({spotId:t})=>o(void 0,void 0,void 0,(function*(){if(p&&(d=window.open(p),p=null,s.set("Openning Host Panel...",{color:u.default().success,timeout:2e3})),d&&!d.closed)return void d.focus();const e=yield GM_getValue("email"),n=yield GM_getValue("password");if(!e||!n)return void f(!0);s.set("Fetching network id...",{color:u.default().default,step:0,numSteps:5,title:"Open Admin Panel"});var o=yield fetch("https://www.spot.im/api/me/network-id-by-name/spotim").then(t=>t.json());s.set("Fetching network token...",{color:u.default().default,step:1,numSteps:5,title:"Open Admin Panel"});var i=yield fetch(`https://www.spot.im/api/me/network-token/${o.network_id}`,{method:"post"}).then(t=>t.json());s.set("Logging in...",{color:u.default().default,step:2,numSteps:5,title:"Open Admin Panel"});var r=yield fetch("https://www.spot.im/api/email-connect/login",{method:"post",headers:new Headers({"x-spotim-networkid":o.network_id,"x-spotim-token":i.token,"Content-Type":"application/json"}),body:JSON.stringify({email:e,password:n})}).then(t=>t.json());if("EmailLogin_TooManyLoginAttemptsError"===r.type)return void s.set("Too many login attempts",{color:u.default().error,timeout:3500,emoji:"😕"});if(!1===r.success)return void s.set("Couldn't log in to Host Panel",{color:u.default().error,timeout:3500,emoji:"😕"});s.set("Fetching login json...",{color:u.default().default,step:3,numSteps:5,title:"Open Admin Panel"});yield fetch("https://www.spot.im/api/me/login-registered",{method:"post",headers:new Headers({"x-spotim-networkid":o.network_id,"x-spotim-token":i.token})}).then(t=>t.json());s.set("Calling me-make-admin...",{color:u.default().default,step:4,numSteps:5,title:"Open Admin Panel"});var l=yield fetch(`https://www.spot.im/api/moderation/internal/make-me-admin?spot_id=${t}`,{headers:new Headers({"x-spotim-networkid":o.network_id,"x-spotim-token":i.token})}).then(t=>t.json());s.set("Fetching token JSON...",{color:u.default().default,step:5,numSteps:5,title:"Open Admin Panel"});var c=yield fetch(`https://www.spot.im/api/me/token-by-ticket/${l.token_ticket}`,{method:"post"}).then(t=>t.json());const h=[`https://admin.${!a.isProduction(a.getLauncherEl())?"staging-":""}spot.im/spot/${t}/moderation?`,`name=${l.spot_name}&`,`token=${c.token}&`,`network_name=${c.network_name}`].join("");s.set("Opening Host Panel",{color:u.default().success,timeout:2e3,emoji:"😃"}),GM_openInTab(h,!1)}))},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(n(1)),a=i(n(0)),l=r(n(2)),u=r(n(19));let c;function d(){return o(this,void 0,void 0,(function*(){let t;function e(){return o(this,void 0,void 0,(function*(){const e=s.getLauncherEl();let n;e?n=yield fetch(`https://api-2-0.spot.im/v1.0.0/config/launcher/${s.getSpotId(e)}/${s.getPostId(e)}/vendor,init,conversation`):unsafeWindow.location.href.match(/https:\/\/api-2-0.spot.im\/v1.0.0\/config\/launcher\/.*?\/.*?\/.*/)&&(n=yield fetch(unsafeWindow.location.href));const o=(yield n.json()).assets_config;t&&!u.default(o,t)&&(p(),GM_notification({title:"An asset has been updated!",text:`${window.location.hostname} — Detected asset update`,onclick:()=>{window.focus()}}),a.set("An asset has been updated!",{color:l.default().default,emoji:"⬆️"})),t=o}))}e(),c=setInterval(e,1e3),a.set("I will notify you on asset updates!",{timeout:4e3,color:l.default().success,emoji:"😃"})}))}function p(t){clearInterval(c),c=!1,t&&a.set("Stopped listening to asset updates",{timeout:4e3,color:l.default().default,emoji:"❌"})}e.toggleNotifyOnChange=function(){c?p(!0):d()}},function(t,e,n){(function(t,n){var o="[object Arguments]",i="[object Map]",r="[object Object]",s="[object Set]",a=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u[o]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u[i]=u["[object Number]"]=u[r]=u["[object RegExp]"]=u[s]=u["[object String]"]=u["[object WeakMap]"]=!1;var c="object"==typeof t&&t&&t.Object===Object&&t,d="object"==typeof self&&self&&self.Object===Object&&self,p=c||d||Function("return this")(),f=e&&!e.nodeType&&e,h=f&&"object"==typeof n&&n&&!n.nodeType&&n,m=h&&h.exports===f,g=m&&c.process,v=function(){try{return g&&g.binding&&g.binding("util")}catch(t){}}(),_=v&&v.isTypedArray;function b(t,e){for(var n=-1,o=null==t?0:t.length;++n<o;)if(e(t[n],n,t))return!0;return!1}function w(t){var e=-1,n=Array(t.size);return t.forEach((function(t,o){n[++e]=[o,t]})),n}function y(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var x,j,k,S=Array.prototype,C=Function.prototype,O=Object.prototype,M=p["__core-js_shared__"],P=C.toString,T=O.hasOwnProperty,$=(x=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+x:"",A=O.toString,N=RegExp("^"+P.call(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),I=m?p.Buffer:void 0,E=p.Symbol,L=p.Uint8Array,W=O.propertyIsEnumerable,D=S.splice,z=E?E.toStringTag:void 0,B=Object.getOwnPropertySymbols,F=I?I.isBuffer:void 0,R=(j=Object.keys,k=Object,function(t){return j(k(t))}),V=vt(p,"DataView"),H=vt(p,"Map"),q=vt(p,"Promise"),G=vt(p,"Set"),U=vt(p,"WeakMap"),Y=vt(Object,"create"),J=yt(V),K=yt(H),X=yt(q),Z=yt(G),Q=yt(U),tt=E?E.prototype:void 0,et=tt?tt.valueOf:void 0;function nt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function ot(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function it(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function rt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new it;++e<n;)this.add(t[e])}function st(t){var e=this.__data__=new ot(t);this.size=e.size}function at(t,e){var n=kt(t),o=!n&&jt(t),i=!n&&!o&&St(t),r=!n&&!o&&!i&&Tt(t),s=n||o||i||r,a=s?function(t,e){for(var n=-1,o=Array(t);++n<t;)o[n]=e(n);return o}(t.length,String):[],l=a.length;for(var u in t)!e&&!T.call(t,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||r&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||wt(u,l))||a.push(u);return a}function lt(t,e){for(var n=t.length;n--;)if(xt(t[n][0],e))return n;return-1}function ut(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":z&&z in Object(t)?function(t){var e=T.call(t,z),n=t[z];try{t[z]=void 0;var o=!0}catch(t){}var i=A.call(t);o&&(e?t[z]=n:delete t[z]);return i}(t):function(t){return A.call(t)}(t)}function ct(t){return Pt(t)&&ut(t)==o}function dt(t,e,n,a,l){return t===e||(null==t||null==e||!Pt(t)&&!Pt(e)?t!=t&&e!=e:function(t,e,n,a,l,u){var c=kt(t),d=kt(e),p=c?"[object Array]":bt(t),f=d?"[object Array]":bt(e),h=(p=p==o?r:p)==r,m=(f=f==o?r:f)==r,g=p==f;if(g&&St(t)){if(!St(e))return!1;c=!0,h=!1}if(g&&!h)return u||(u=new st),c||Tt(t)?ht(t,e,n,a,l,u):function(t,e,n,o,r,a,l){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!a(new L(t),new L(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return xt(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case i:var u=w;case s:var c=1&o;if(u||(u=y),t.size!=e.size&&!c)return!1;var d=l.get(t);if(d)return d==e;o|=2,l.set(t,e);var p=ht(u(t),u(e),o,r,a,l);return l.delete(t),p;case"[object Symbol]":if(et)return et.call(t)==et.call(e)}return!1}(t,e,p,n,a,l,u);if(!(1&n)){var v=h&&T.call(t,"__wrapped__"),_=m&&T.call(e,"__wrapped__");if(v||_){var b=v?t.value():t,x=_?e.value():e;return u||(u=new st),l(b,x,n,a,u)}}if(!g)return!1;return u||(u=new st),function(t,e,n,o,i,r){var s=1&n,a=mt(t),l=a.length,u=mt(e).length;if(l!=u&&!s)return!1;var c=l;for(;c--;){var d=a[c];if(!(s?d in e:T.call(e,d)))return!1}var p=r.get(t);if(p&&r.get(e))return p==e;var f=!0;r.set(t,e),r.set(e,t);var h=s;for(;++c<l;){d=a[c];var m=t[d],g=e[d];if(o)var v=s?o(g,m,d,e,t,r):o(m,g,d,t,e,r);if(!(void 0===v?m===g||i(m,g,n,o,r):v)){f=!1;break}h||(h="constructor"==d)}if(f&&!h){var _=t.constructor,b=e.constructor;_!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b)&&(f=!1)}return r.delete(t),r.delete(e),f}(t,e,n,a,l,u)}(t,e,n,a,dt,l))}function pt(t){return!(!Mt(t)||function(t){return!!$&&$ in t}(t))&&(Ct(t)?N:a).test(yt(t))}function ft(t){if(n=(e=t)&&e.constructor,o="function"==typeof n&&n.prototype||O,e!==o)return R(t);var e,n,o,i=[];for(var r in Object(t))T.call(t,r)&&"constructor"!=r&&i.push(r);return i}function ht(t,e,n,o,i,r){var s=1&n,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var u=r.get(t);if(u&&r.get(e))return u==e;var c=-1,d=!0,p=2&n?new rt:void 0;for(r.set(t,e),r.set(e,t);++c<a;){var f=t[c],h=e[c];if(o)var m=s?o(h,f,c,e,t,r):o(f,h,c,t,e,r);if(void 0!==m){if(m)continue;d=!1;break}if(p){if(!b(e,(function(t,e){if(s=e,!p.has(s)&&(f===t||i(f,t,n,o,r)))return p.push(e);var s}))){d=!1;break}}else if(f!==h&&!i(f,h,n,o,r)){d=!1;break}}return r.delete(t),r.delete(e),d}function mt(t){return function(t,e,n){var o=e(t);return kt(t)?o:function(t,e){for(var n=-1,o=e.length,i=t.length;++n<o;)t[i+n]=e[n];return t}(o,n(t))}(t,$t,_t)}function gt(t,e){var n,o,i=t.__data__;return("string"==(o=typeof(n=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function vt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return pt(n)?n:void 0}nt.prototype.clear=function(){this.__data__=Y?Y(null):{},this.size=0},nt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},nt.prototype.get=function(t){var e=this.__data__;if(Y){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return T.call(e,t)?e[t]:void 0},nt.prototype.has=function(t){var e=this.__data__;return Y?void 0!==e[t]:T.call(e,t)},nt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Y&&void 0===e?"__lodash_hash_undefined__":e,this},ot.prototype.clear=function(){this.__data__=[],this.size=0},ot.prototype.delete=function(t){var e=this.__data__,n=lt(e,t);return!(n<0)&&(n==e.length-1?e.pop():D.call(e,n,1),--this.size,!0)},ot.prototype.get=function(t){var e=this.__data__,n=lt(e,t);return n<0?void 0:e[n][1]},ot.prototype.has=function(t){return lt(this.__data__,t)>-1},ot.prototype.set=function(t,e){var n=this.__data__,o=lt(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this},it.prototype.clear=function(){this.size=0,this.__data__={hash:new nt,map:new(H||ot),string:new nt}},it.prototype.delete=function(t){var e=gt(this,t).delete(t);return this.size-=e?1:0,e},it.prototype.get=function(t){return gt(this,t).get(t)},it.prototype.has=function(t){return gt(this,t).has(t)},it.prototype.set=function(t,e){var n=gt(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this},rt.prototype.add=rt.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},rt.prototype.has=function(t){return this.__data__.has(t)},st.prototype.clear=function(){this.__data__=new ot,this.size=0},st.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},st.prototype.get=function(t){return this.__data__.get(t)},st.prototype.has=function(t){return this.__data__.has(t)},st.prototype.set=function(t,e){var n=this.__data__;if(n instanceof ot){var o=n.__data__;if(!H||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new it(o)}return n.set(t,e),this.size=n.size,this};var _t=B?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,o=null==t?0:t.length,i=0,r=[];++n<o;){var s=t[n];e(s,n,t)&&(r[i++]=s)}return r}(B(t),(function(e){return W.call(t,e)})))}:function(){return[]},bt=ut;function wt(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||l.test(t))&&t>-1&&t%1==0&&t<e}function yt(t){if(null!=t){try{return P.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function xt(t,e){return t===e||t!=t&&e!=e}(V&&"[object DataView]"!=bt(new V(new ArrayBuffer(1)))||H&&bt(new H)!=i||q&&"[object Promise]"!=bt(q.resolve())||G&&bt(new G)!=s||U&&"[object WeakMap]"!=bt(new U))&&(bt=function(t){var e=ut(t),n=e==r?t.constructor:void 0,o=n?yt(n):"";if(o)switch(o){case J:return"[object DataView]";case K:return i;case X:return"[object Promise]";case Z:return s;case Q:return"[object WeakMap]"}return e});var jt=ct(function(){return arguments}())?ct:function(t){return Pt(t)&&T.call(t,"callee")&&!W.call(t,"callee")},kt=Array.isArray;var St=F||function(){return!1};function Ct(t){if(!Mt(t))return!1;var e=ut(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ot(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Mt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Pt(t){return null!=t&&"object"==typeof t}var Tt=_?function(t){return function(e){return t(e)}}(_):function(t){return Pt(t)&&Ot(t.length)&&!!u[ut(t)]};function $t(t){return null!=(e=t)&&Ot(e.length)&&!Ct(e)?at(t):ft(t);var e}n.exports=function(t,e){return dt(t,e)}}).call(this,n(20),n(21)(t))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";n.r(e),e.default=".whatsNewWrapper {\n  text-align: left;\n  margin-top: -7px;\n  font-weight: normal;\n}\n\n.whatsNewContent {\n  max-height: calc(100vh - 10em - 180px);\n  overflow-y: auto;\n  overflow-x: hidden;\n  padding: 0px 10px;\n  margin: 0px -10px;\n  padding-top: 1em;\n}\n\n.whatsNewContent .whatsNewTitle {\n  margin-left: -10px;\n  padding-left: 1em;\n  margin-right: -10px;\n  padding-top: 1em;\n  font-weight: bold;\n  padding-bottom: 0em;\n}\n\n.whatsNewContent .whatsNewTitle.latest {\n  text-shadow: 0px 0px 10px #ffffff91;\n}\n\n.whatsNewContent .whatsNewTitle:not(.latest) {\n  opacity: 0.75;\n}\n\n.whatsNewContent .whatsNewPreviousTitle {\n  margin-left: -10px;\n  padding-left: 1em;\n  margin-right: -10px;\n  border-top: 1px solid #00000040;\n  padding-top: 1em;\n  font-weight: bold;\n  padding-bottom: 0em;\n  border-bottom: 1px solid #3c3c3c26;\n  padding: 0.5em 1em;\n  background: #00000017;\n  text-align: left;\n}\n\n.whatsNewFeatureRequest {\n  text-align: left;\n  padding: 0.5em calc(0.5em + 10px);\n  background: #8bc34a;\n  margin: 0px -10px;\n  text-align: left;\n  border-top: 1px solid #00000078;\n}\n\n.whatsNewFeatureRequest a {\n  color: white;\n}\n\n.whatsNewContent .whatsNewTitle:first-child {\n  margin-top: -18px;\n  border: none;\n  background: none;\n}\n\n.whatsNewContent p {\n  font-weight: bold;\n  margin: 0px 0.6em;\n}\n\n.whatsNewContent ul {\n  margin-top: 0.4em;\n  list-style: disc;\n  margin-bottom: 0px;\n}\n\n.whatsNewContent ul:last-child {\n  margin-bottom: 1em;\n}\n\n.whatsNewContent ul.latest {\n  text-shadow: 0px 0px 10px #ffffff70;\n}\n\n.whatsNewContent ul:not(.latest) {\n  opacity: 0.75;\n}\n\n.whatsNewContent .whatsNewDescription {\n  font-size: 0.8em;\n  opacity: 0.6;\n}\n"},function(t,e,n){"use strict";var o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(0)),s=o(n(1)),a=i(n(10)),l=i(n(2));e.show=()=>{r.set(s.renderTable([{keyCombo:s.isWindows?"alt+s":"ctrl+s",description:"Open Command Palette"},...a.default,{keyCombo:"escape",description:"Hide Floating Message"}].map(t=>[`<span\n          title="${t.unlisted?"This command is unlisted, no key combo assigned to it":""}"\n          class="\n            mono\n            ${t.unlisted?"hidden":""}\n          ">\n          ${t.unlisted?"×":t.keyCombo}\n        </span>`,t.description+(t.detailedDescription?`<div class="detailed_description">${t.detailedDescription}</div>`:"")])),{color:l.default().default,title:"Available Shortcuts",overflow:"scroll"})}},function(t,e,n){var o;o={},t.exports=o,o.simpleFilter=function(t,e){return e.filter((function(e){return o.test(t,e)}))},o.test=function(t,e){return null!==o.match(t,e)},o.match=function(t,e,n){n=n||{};var o,i=0,r=[],s=e.length,a=0,l=0,u=n.pre||"",c=n.post||"",d=n.caseSensitive&&e||e.toLowerCase();t=n.caseSensitive&&t||t.toLowerCase();for(var p=0;p<s;p++)o=e[p],d[p]===t[i]?(o=u+o+c,i+=1,l+=1+l):l=0,a+=l,r[r.length]=o;return i===t.length?(a=d===t?1/0:a,{rendered:r.join(""),score:a}):null},o.filter=function(t,e,n){return e&&0!==e.length?"string"!=typeof t?e:(n=n||{},e.reduce((function(e,i,r,s){var a=i;n.extract&&(a=n.extract(i));var l=o.match(t,a,n);return null!=l&&(e[e.length]={string:l.rendered,score:l.score,index:r,original:i}),e}),[]).sort((function(t,e){var n=e.score-t.score;return n||t.index-e.index}))):[]}},function(t,e,n){"use strict";n.r(e),e.default=".fuzzyHighlight {\n  color: #ffeb3b;\n  font-weight: bold;\n}\n\n.inputNotEmpty .pallete_row_main_col {\n  font-weight: normal;\n}\n\n.badgeWrapper {\n  left: 11px;\n  position: absolute;\n  top: 14px;\n  display: flex;\n  align-items: baseline;\n}\n\n.devBadge {\n  padding: 3px 7px 1px;\n  border-radius: 6px 0px 0px 6px;\n  background: #e91e63;\n  font-weight: normal;\n  text-transform: uppercase;\n  font-size: 0.7em;\n  margin-right: 0px;\n  display: block;\n  text-shadow: none;\n  box-shadow: 0px 0px 6px inset #000000a1, 0px -1px #00000080;\n}\n\n.buildAge {\n  font-size: 0.8em;\n  padding: 3px 7px 1px;\n  border-radius: 0px 6px 6px 0px;\n  background: #ff5722;\n  font-weight: normal;\n  font-size: 0.7em;\n  margin-right: 12px;\n  display: block;\n  color: white;\n  text-shadow: none;\n  box-shadow: 0px -1px #00000080;\n}\n"},function(t,e,n){"use strict";n.r(e),e.default="@keyframes cta {\n  0% {\n    color: #ffffff;\n    text-shadow: inherit;\n  }\n  74.99% {\n    color: #ffffff;\n    text-shadow: inherit;\n  }\n  75% {\n    color: transparent;\n    text-shadow: none;\n  }\n  100% {\n    color: transparent;\n    text-shadow: none;\n  }\n}\n\n.welcomeMessageWrapper {\n  margin: -7px -10px -18px;\n}\n\n.welcomeMessageWrapper img {\n  width: 100%;\n  height: 294px;\n}\n\n.welcomeMessageWrapper .welcomeMessageWrapperMessage {\n  text-align: left;\n  padding: 20px;\n  margin-bottom: -65px;\n}\n\n.welcomeMessageWrapper .welcomeMessageWrapperMessage p:first-child {\n  margin-top: 0px;\n}\n\n.welcomeMessageWrapper .shortcut {\n  background: #ff37fd;\n  padding: 6px 8px;\n  border-radius: 5px;\n  box-shadow: 0px 0px 2px #000000a8;\n}\n\n.welcomeMessageWrapper .cta {\n  position: absolute;\n  bottom: 63px;\n  left: 21px;\n  animation: cta linear 1.4s infinite;\n  font-family: 'BigBlue TerminalPlus';\n  -webkit-font-smoothing: none;\n  font-weight: normal;\n}\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=n(1);e.default=(()=>{const t=new Date;return t.getHours()+":"+o.padTime(t.getMinutes().toString())})()},function(t,e,n){"use strict";n.r(e),e.default=".infoLine {\n  display: flex;\n  justify-content: space-between;\n  font-weight: normal;\n}\n\n.copyButton {\n  border: none;\n  text-shadow: none;\n  display: inline-block;\n  margin-top: 0px;\n  right: 9px;\n  font-size: 0.8em;\n  background: #00000030;\n  padding: 1px 7px;\n  border-radius: 5px;\n  cursor: pointer;\n  margin: 2px;\n  font-family: inherit;\n  color: inherit;\n  line-height: inherit;\n  visibility: hidden;\n  position: relative;\n  outline: none;\n}\n\n.copyButton .checkmark {\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  opacity: 0;\n}\n\n.copyButton.showCheckmark .checkmark {\n  opacity: 1;\n}\n\n.copyButton.showCheckmark > div:nth-child(2) {\n  visibility: hidden;\n}\n\n.infoLine:hover .copyButton {\n  visibility: visible;\n}\n"},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(n(3)),a=r(n(6)),l=i(n(1));e.default=()=>o(void 0,void 0,void 0,(function*(){if(s.get().showVersionsOnLoad){l.onFoundSpotimObject((function t(){unsafeWindow.__SPOTIM__.SERVICES.configProvider._data.assets_config?a.default.ssv():setTimeout(()=>{l.onFoundSpotimObject(t)},500)}))}}))},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const r=i(n(3));e.default=()=>{unsafeWindow.__spotim_ninja_tools_set_creds__=(t,e)=>o(void 0,void 0,void 0,(function*(){yield GM_setValue("email",t),yield GM_setValue("password",e),console.log("successfully set creds!")})),unsafeWindow.__spotim_ninja_tools_set_prefs__=t=>o(void 0,void 0,void 0,(function*(){const e=r.get(),n=Object.assign(Object.assign({},e),t);yield r.set(n),console.log("successfully set prefs!"),console.log(n)}))}}]);