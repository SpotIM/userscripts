// ==UserScript==
// @name        SpotIM Ninja Tools
// @version     4.1.1
// @author      dutzi
// @description A bunch of shortcuts to make our lives easier
// @match       http*://*/*
// @namespace   https://spot.im/
// @noframes    true
// @resource    bigBlueFont https://rawcdn.githack.com/SpotIM/userscripts/53c2ab94cf3523830e17d299ed8abd533822d0c5/ninja-tools/src/assets/BigBlue_Terminal_437TT.TTF
// @resource    welcomeImage https://github.com/SpotIM/userscripts/raw/master/ninja-tools/src/assets/welcome-background.png
// @grant       GM_setValue
// @grant       GM_getValue
// @grant       GM_openInTab
// @grant       GM_setClipboard
// @grant       GM_deleteValue
// @grant       GM_notification
// @grant       GM_getResourceURL
// @grant       unsafeWindow
// ==/UserScript==

!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=15)}([function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(4)),s=o(n(2)),a=o(n(5)),l=i(n(17));let c,u,d,p,f,h,m,g;function v(){m=!1,g.parentNode||document.body.appendChild(g)}function b(e){function t(){g&&g.parentNode&&(g.parentNode.removeChild(g),y(0))}e?t():new Promise(e=>{if(m){const t=setInterval(()=>{m||(clearInterval(t),e())},100)}else e()}).then(t)}function y(e){d.style.width=100*e+"%"}function _(e){c.style.backgroundColor=e.bg,c.querySelector(".title")&&(c.querySelector(".title").style.backgroundColor=e.bg),c.style.borderColor=e.border}t.set=function(e,{timeout:t,color:n,step:o,numSteps:i,title:w,emoji:x,belowNotificationPopover:j,overflow:k}={}){!function(){if(p)return void(s.getUseDarkTheme()?c.classList.add("dark"):c.classList.remove("dark"));p=!0,c=document.createElement("div"),c.className="message reset-css",s.getUseDarkTheme()&&c.classList.add("dark");const e=document.createElement("div");e.className="inset_shadow",u=document.createElement("div"),d=document.createElement("div"),d.className="message_progress";const t=document.createElement("div");t.innerText="×",t.className="close_button",t.addEventListener("click",()=>{b(!0),r.stop()}),c.appendChild(u),c.appendChild(t),c.appendChild(e),c.appendChild(d),c.addEventListener("mouseenter",()=>{m=!0}),c.addEventListener("mouseleave",()=>{m=!1}),_(s.default().default),g=document.createElement("div"),document.body.appendChild(g),a.set(g.attachShadow({mode:"open"})),a.get().appendChild(c)}(),function(){if(f)return;f=!0;const e=document.createElement("style");e.innerHTML=l.default,a.get().appendChild(e)}(),v();let S=e;"scroll"===k&&(S=`<div class="scrollable_area">${S}</div>`);let O="";return w&&(O=`<div class="title">${w}</div>`),x&&(O+=`<div class="emoji">${x}</div>`),S=O+S,u.innerHTML!==S&&(u.innerHTML=S),j?c.classList.add("below_notifications"):c.classList.remove("below_notifications"),clearTimeout(h),t&&(h=setTimeout(()=>{b()},t)),n&&_(n),isNaN((null!=o?o:0)/(null!=i?i:0))?y(0):y(o/i),u},t.show=v,t.hide=b},function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(0)),s=i(n(8)),a=i(n(2));t.isTopMostFrame=()=>window.parent===window,t.findConversation=()=>document.querySelector("[data-conversation-id]")||document.querySelector('[data-spotim-app="conversation"]')||document.querySelector('[data-spotim-module="conversation"]'),t.getLauncherEl=e=>{const n=document.querySelector('script[data-spotim-module="spotim-launcher"]');return!n&&e&&(t.isTopMostFrame()?r.set("Could not find launcher script",{timeout:2e3,color:a.default().error,emoji:"😕"}):(window.parent.focus(),r.set(`${s.default.focusWarning}<br/>Could not find launcher script`,{timeout:3e3,color:a.default().error,emoji:"😕️"}))),n},t.isProduction=e=>unsafeWindow.__SPOTIMENV__?"production"===unsafeWindow.__SPOTIMENV__:e.src.indexOf("//launcher.spot.im")>-1,t.getSpotId=e=>{const t=e.src.split("/").pop().split("?")[0];return"launcher-bundle.js"===t?e.getAttribute("data-spot-id"):t},t.getPostId=e=>e.getAttribute("data-post-id"),t.getSpotimVersion=()=>unsafeWindow.__SPOTIM__&&"IFRAME"!==(t.findConversation()||{}).tagName?2:1,t.getConfigUrl=()=>{const e=t.getLauncherEl(!0);return`https://api-2-0.spot.im/v1.0.0/config/launcher/${t.getSpotId(e)}/${t.getPostId(e)}/vendor,init,conversation`},t.padTime=e=>1===e.length?`0${e}`:e,t.renderTable=e=>"<div class='table'><tbody>"+e.map(e=>"<div class='tr'><div class='td'>"+e.join("</div><div class='td'>")+"</div></div>").join("")+"</tbody></div>",t.createElement=(e,t,n="div")=>`<${n} class="${t}">${e}</${n}>`,t.getRandomOptimisticEmoji=()=>{const e=["🎈","🚀","🌈","🦄"];return e[Math.floor(Math.random()*e.length)]},t.onFoundSpotimObject=e=>{function t(){unsafeWindow.__SPOTIM__&&(clearInterval(n),e())}const n=setInterval(t,500);t()},t.isWindows="Win32"===window.navigator.platform},function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=o(n(3));t.getUseDarkTheme=()=>{const e=i.get(),{useDarkTheme:t}=e;return t};const r={default:{bg:"#467FDB",border:"#46abdb"},error:{bg:"#f44336",border:"#d81054"},success:{bg:"#4caf50",border:"#4dd052"}},s={default:{bg:"#121212",border:"#424242"},error:{bg:"#121212",border:"#424242"},success:{bg:"#121212",border:"#424242"}};t.default=()=>t.getUseDarkTheme()?s:r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=()=>GM_getValue("prefs",{}),t.set=e=>GM_setValue("prefs",Object.assign(Object.assign({},t.get()),e))},function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(0)),s=o(n(1)),a=i(n(8)),l=i(n(2));let c,u,d,p,f;function h(){if(c)return;let e=new IntersectionObserver(e=>{f=e[0].isIntersecting},{rootMargin:"0px",threshold:0});r.set("Looking for conversation element",{title:"Scroll To Conversation"}),c=!0,u=setInterval(()=>{let t;t=s.findConversation(),t?(e.observe(t),f||(t.scrollIntoView(),window.scrollBy(0,-200)),r.set('Hit <span class="mono">escape</span> to stop',{title:"Scroll To Conversation",color:l.default().success,emoji:"😃"}),function(e){Object.assign(e.style,{boxShadow:"rgb(76, 175, 80) 0px 0px 0px 4px,\n        rgb(26, 216, 34) 0px 0px 0px 5px,\n        #00000036 0px 0px 40px 12px,\n        #00000085 0px 0px 4px 5px,\n        black 0px 0px 40px -4px",borderRadius:"8px"}),e.dataset.sptmninjaHighlighted=!0,p=!0}(t)):(d||(window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}),d=!0),s.isTopMostFrame()?r.set("Element not found. Try scrolling up and down a bit.",{color:l.default().error,emoji:"😕",title:"Scroll To Conversation"}):(window.parent.focus(),r.set(`${a.default.focusWarning}<br/>Scroll To Conversation... not found. Try scrolling up and down a bit.`,{color:l.default().error,timeout:3e3,emoji:"😕"}),m({hideMessage:!1})))},100)}function m({hideMessage:e}={hideMessage:!0}){p&&([...document.querySelectorAll("[data-sptmninja-highlighted]")].forEach(e=>{e.style.boxShadow=null,e.style.borderRadius=null,delete e.dataset.sptmninjaHighlighted}),p=!1),c&&(e&&r.hide(),clearInterval(u),c=!1,d=!1)}t.start=h,t.stop=m,t.toggle=function(){c?m():h()}},function(e,t,n){"use strict";let o;Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(){return o},t.set=function(e){o=e}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(4)),a=i(n(0)),l=i(n(1)),c=i(n(3)),u=i(n(18)),d=i(n(19)),p=i(n(7)),f=i(n(24)),h=i(n(12)),m=i(n(13)),g=(r(n(14)),r(n(2))),v=r(n(32)),b=r(n(11)),y=r(n(33));let _={sss:()=>{s.toggle()},ssc:()=>{s.stop();const e=l.getLauncherEl(!0);if(e){const t=l.getSpotId(e);GM_setClipboard(t),a.set(`Copied ${t} to clipboard!`,{timeout:2e3,color:g.default().default,emoji:"😃"})}},ssi:()=>{function e(e){return unsafeWindow.__spotImNinjaToolsCopy=e=>{const t=e.currentTarget;GM_setClipboard(t.parentElement.children[0].innerText),t.classList.add("showCheckmark"),setTimeout(()=>{t.classList.remove("showCheckmark")},1e3)},`\n        <style>\n          ${y.default}\n        </style>\n        <div class="infoLine">\n          <div>${e}</div>\n          <button onClick="__spotImNinjaToolsCopy(event)" class="copyButton">\n            <div class="checkmark">✔</div>\n            <div>Copy</div>\n          </button>\n        </div>\n      `}s.stop();const t=l.getLauncherEl(!0);if(t){const n=l.getSpotId(t),o=l.getPostId(t),i=l.isProduction(t)?"Production":"Dev";a.set(l.renderTable([["Spot Id",e(n)],["Post Id",e(o)],["Environment",e(i)]]),{color:g.default().default,title:"Spot Info"})}},ssv:()=>o(void 0,void 0,void 0,(function*(){if(s.stop(),unsafeWindow.__SPOTIM__){const e=unsafeWindow.__SPOTIM__.SERVICES.configProvider._data.assets_config;if(e.filter(e=>e.url.indexOf("tags")>-1).length){const t=l.renderTable(e.filter(e=>e.url.indexOf("tags")>-1).sort((e,t)=>e.name<t.name?-1:1).map(e=>[`<span class="mono"><a target="_blank" href="${e.url}">${e.url.match(/tags\/(.*?)\//)[1]}</a></span>`,e.name]))+`<div class="muted_text margin_top">Page loaded at ${v.default}</div>`;a.set(t,{color:g.default().default,emoji:l.getRandomOptimisticEmoji(),title:"Assets"})}else a.set("No assets found. Are you running locally?",{timeout:2e3,color:g.default().error,emoji:"😕"})}else a.set("Could not find __SPOTIM__ object",{timeout:2e3,color:g.default().error,emoji:"😕"})})),ssa:()=>{s.stop();const e=l.getLauncherEl(!0);e&&(l.isProduction(e)?u.open({spotId:l.getSpotId(e)}):window.open("https://admin.staging-spot.im/internal/super-admin"))},ssda:()=>{s.stop();const e=l.getLauncherEl(!0);e&&(l.isProduction(e)?window.open("https://admin.spot.im/internal/super-admin"):window.open("https://admin.staging-spot.im/internal/super-admin"))},sso:()=>{s.stop();const e=l.getLauncherEl(!0);l.isProduction(e)&&window.open(l.getConfigUrl())},ssn:()=>o(void 0,void 0,void 0,(function*(){s.stop(),d.toggleNotifyOnChange()})),sse:()=>{m.toggle()?a.set("I will show you events!",{timeout:3e3,emoji:"👍🏻",color:g.default().default}):a.set("Stopped showing events!",{timeout:3e3,emoji:"❌",color:g.default().default})},__ssa:()=>o(void 0,void 0,void 0,(function*(){const e=c.get().showVersionsOnLoad;yield c.set({showVersionsOnLoad:!e}),e?a.set("Stopped showing you asset versions on page load",{timeout:4e3,emoji:"❌",color:g.default().default}):a.set("I will now show you asset versions on page load!",{timeout:4e3,emoji:"🤠",color:g.default().success})})),__ssn:()=>{p.show()},__ssc:()=>{u.openCredentialsForm()},__ssp:()=>{s.stop();const e=l.getLauncherEl(!0);if(e){const t=l.getPostId(e);GM_setClipboard(t),a.set(`Copied ${t} to clipboard!`,{timeout:2e3,color:g.default().default,emoji:"😃"})}},__ssdt:()=>o(void 0,void 0,void 0,(function*(){const{useDarkTheme:e=!1}=c.get();yield c.set({useDarkTheme:!e}),setTimeout(()=>{h.show()},0)})),ssh:()=>{s.stop(),f.show()}};_=b.default.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.keyCombo]:()=>o(void 0,void 0,void 0,(function*(){try{const e=JSON.parse(unsafeWindow.localStorage.getItem("SPOT_AB")),n=e[t.id].variant,o=String.fromCharCode(n.charCodeAt(0)+1),i=t.variants.find(e=>e.id===o)||t.variants[0];let r;e[t.id].variant=i.id,r=i.statusText,a.set(r,{emoji:"👍🏻",color:g.default().success}),unsafeWindow.localStorage.setItem("SPOT_AB",JSON.stringify(e))}catch(e){a.set("Are you sure this spot has this test?",{title:`Couldn't ${t.description}`,emoji:"😞",color:g.default().error})}}))}),_),t.default=_},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(3)),a=i(n(0)),l=r(n(9)),c=r(n(23)),u=[{version:"4.1.0",list:[{title:"Added Events Viewer",description:"Shows BI events on the page, exposing only the diffs between similarly typed events"}]},{version:"4.0.5",list:[{title:"Added Dark Mode (Toggle Dark Mode in the Command Palette)"}]},{version:"4.0.2",list:[{title:"Added Set Credentials Command and Credentials Form"}]},{version:"3.7",list:[{title:"Added Recently Used commands",description:"The command you last used will show up first, next time you open the command palette"}]},{version:"3.4",list:[{title:"The following commands were added:",list:[{title:"Toggle Show Asset Versions on Load",description:"If enabled, will show the asset versions popup once the page loads"},{title:"A/B Test: Toggle Redesign"},{title:"A/B Test: Cycle Through Reaction Variants"},{title:"A/B Test: Toggle Show Scores Before/After Click"}]}]}];function d(e,t){const n=t?"latest":"";return(`\n    <div class="whatsNewTitle ${n}">${t?`⭐️ What's New in v${e.version}:`:"✨ v"+e.version+":"}</div>\n      <ul class="${n}">\n        ${function e(t){return t.map(t=>`\n        <li>\n          ${t.title}\n          ${t.description?`<div class="whatsNewDescription">${t.description}</div>`:""}\n        </li>\n        ${t.list?"<ul>"+e(t.list)+"</ul>":""}\n      `).join("")}(e.list)}\n      </ul>\n    `)}function p(e){return o(this,void 0,void 0,(function*(){const t=GM_info.script.version,{dontShowWhatsNew:n}=s.get();yield s.set({lastWhatsNewVersion:t});const i=function(e){const[t,n]=l.default([e?"Don't Show Me What's New On Upgrade":"Show Me What's New Next Upgrade","Close"]);return{html:`\n    <style>\n      ${c.default}\n    </style>\n    <div class="whatsNewWrapper">\n      <div class="whatsNewContent">\n        ${d(u[0],!0)}\n        ${u.slice(1).map(e=>d(e)).join("")}\n      </div>\n      <div class="whatsNewFeatureRequest">\n        💡 Got a feature request? <a href="slack://channel?id=CSZGJD6R1&team=T0460KVUF">Hit us up on Slack!</a>\n      </div>\n      ${t()}\n    </div>\n  `,addListeners:n}}(!n);a.set(i.html,{title:e?"SpotIM Ninja Tools Upgraded! 🥳":"SpotIM Ninja Tools Changelog"}),i.addListeners(e=>{0===e?function(){o(this,void 0,void 0,(function*(){const{dontShowWhatsNew:e}=s.get();yield s.set({dontShowWhatsNew:!e}),a.hide(!0)}))}():a.hide(!0)})}))}t.show=p,t.showIfUpgraded=function(){return o(this,void 0,void 0,(function*(){if(s.get().isNotFirstRun){const{lastWhatsNewVersion:e,dontShowWhatsNew:t}=s.get(),n=GM_info.script.version;if(t)return;e&&e===n||!u.find(e=>e.version===n)||p(!0),yield s.set({lastWhatsNewVersion:n})}}))},t.setCurrentVersionAsLastShown=function(){return o(this,void 0,void 0,(function*(){const e=GM_info.script.version;yield s.set({lastWhatsNewVersion:e})}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={focusWarning:"⚠️⚠️️⚠️ TRY AGAIN. (Moving focus to parent frame) ️⚠️⚠️️⚠️"}},function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=o(n(5));t.default=function(e){return[function(){return`\n        <div class="gutterActions">\n        ${e.map((e,t)=>`\n          <button class="gutterActionsButton" id="gutterButton${t}">\n            ${e}\n          </button>\n        `).join("")}\n      </div>\n    `},function(t){e.forEach((e,n)=>{var o;null===(o=i.get().querySelector(`#gutterButton${n}`))||void 0===o||o.addEventListener("click",t.bind(null,n))})}]}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=[{keyCombo:"sss",description:"Scroll to Conversation"},{keyCombo:"ssi",description:"Show Info"},{keyCombo:"ssc",description:"Copy Spot ID to Clipboard"},{keyCombo:"ssa",description:"Open Host Panel",detailedDescription:"Will require you to enter the username and password you use to log in to the host panel on first run and won't work if you use Google to sign in"},{keyCombo:"ssv",description:"Show Asset Versions"},{keyCombo:"sso",description:"Open Config Data"},{keyCombo:"ssn",description:"Notify On Asset Updates",detailedDescription:"Will start constantly checking if an update to one of our products was released for this spot and pop a notification once that happens"},{keyCombo:"sse",description:"Toggle Events Viewer"},{keyCombo:"ssh",description:"Show Help"},{keyCombo:"__ssn",description:"What's New?",unlisted:!0},{keyCombo:"__ssdt",description:"Toggle Dark Theme",unlisted:!0},{keyCombo:"__ssa",description:"Toggle Show Asset Versions on Load",detailedDescription:"If enabled, will display the asset versions once the page loads",unlisted:!0},{keyCombo:"__ssc",description:"Set Host Panel Credentials",unlisted:!0},{keyCombo:"__ssp",description:"Copy Post ID to Clipboard",unlisted:!0},...o(n(11)).default.map(e=>({keyCombo:e.keyCombo,description:"A/B Test: "+e.description,unlisted:!0}))];t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=[{name:"Redesign",description:"Toggle Redesign",id:35,variants:[{id:"A",statusText:"Redesign Disabled"},{id:"B",statusText:"Redesign Enabled"}]},{name:"Reactions",description:"Cycle Through Reaction Variants",id:34,variants:[{id:"A",statusText:"Reactions Disabled"},{id:"B",statusText:"Reactions Enabled"},{id:"C",statusText:"Reactions Enabled (With Ads)"}]},{name:"Show Scores",description:"Toggle Show Scores Before/After Click",id:37,variants:[{id:"A",statusText:"Showing Scores After Click"},{id:"B",statusText:"Showing Scores Before Click"}]},{name:"Show Feed",description:"Toggle Show Feed",id:39,variants:[{id:"A",statusText:"Showing Feed"},{id:"B",statusText:"Not Showing Feed"}]},{name:"Change Feed Placement",description:"Toggle Feed Above/Below Conversation",id:40,variants:[{id:"A",statusText:"Feed Above Conversation"},{id:"B",statusText:"Feed Below Conversation"}]}].map((e,t)=>Object.assign(Object.assign({},e),{keyCombo:`__ssab${t}`}));t.default=o},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(10)),a=r(n(4)),l=r(n(0)),c=r(n(1)),u=r(n(3)),d=i(n(2)),p=i(n(6)),f=r(n(5)),h=i(n(25)),m=i(n(26));let g=0;function v(e){const t=e.target.closest(".tr");if(t&&t.children.length){const e=t.children[0].children[0].dataset.keyCombo,n=p.default[e];n&&n()}}t.show=function(){return o(this,void 0,void 0,(function*(){g=0;let e,t=yield(()=>o(this,void 0,void 0,(function*(){const{lastCommandThatRanKeyCombo:e}=u.get();if(e)return s.default.find(t=>t.keyCombo===e)})))();a.stop({hideMessage:!1});const n=l.set(`<style>\n      ${m.default}\n    </style>\n    <input class="input"><div class="results"></div>`,{title:`${c.getLauncherEl(!1)?"":'<span class="titleIcon" title="Can\'t find Launcher script tag">⚠️</span>'}Start Typing A Command`,color:d.default().default});n.querySelector(".results").addEventListener("click",v);const i=f.get().querySelector(".input");function r(){const n=i.value,o=h.default.filter(n,s.default,{pre:'<span class="fuzzyHighlight">',post:"</span>",extract:e=>e.description});if(e=o.map(e=>Object.assign(Object.assign({},s.default[e.index]),{description:e.string})),!n&&t){const n=e.findIndex(e=>{var n;return e.keyCombo===(null===(n=t)||void 0===n?void 0:n.keyCombo)});e.splice(n,1),e.unshift(t)}}function b(o){i.value.trim()?n.querySelector(".results").classList.add("inputNotEmpty"):n.querySelector(".results").classList.remove("inputNotEmpty"),n.querySelector(".results").innerHTML=e.length?c.renderTable(e.map((e,n)=>[`<span class="mono ${e.unlisted?"hidden":""}" data-key-combo="${e.keyCombo}">${e.unlisted?"×":e.keyCombo}</span>`,`<span\n                  class="pallete_row_main_col ${g===n?"weight_bold":"muted_result"}"\n                  ${g===n?"data-selected":""}\n                  >\n                  <div class="palette_row_description">${e.description}</div>\n                  ${t===e?"<div class='palette_row_recently_used'>recently used</div>":""}\n                </span>`,g===n?c.createElement("⏎","muted_text"):""])):"";const r=f.get().querySelector("[data-selected]");if(r){const e=r.parentNode.parentNode;(function(e){const t=e.getBoundingClientRect(),n=f.get().querySelector(".results").getBoundingClientRect();return t.y>n.y&&t.bottom<n.bottom})(e)||e.scrollIntoView(o)}}r(),b(),i.focus(),i.addEventListener("keydown",n=>{if(38===n.keyCode)g--,g<0&&(g=e.length-1),n.preventDefault(),b(!0);else if(40===n.keyCode)g++,g>=e.length&&(g=0),n.preventDefault(),b(!1);else if(13===n.keyCode){if(function(){var n;const o=e[g];return t=o,u.set({lastCommandThatRanKeyCombo:null===(n=t)||void 0===n?void 0:n.keyCombo}),!!o&&(l.hide(!0),p.default[o.keyCombo](),!0)}())return}else b()}),i.addEventListener("keyup",t=>{r(),g>=e.length&&(g=Math.max(e.length-1,0)),38!==t.keyCode&&40!==t.keyCode&&b()})}))}},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(27)),s=i(n(3)),a=n(28),l=o(n(29)),c=unsafeWindow.console.log;let u,d,p,f,h,m,g,v,b,y,_="",w=[];function x(e){const t=e.currentTarget,n=e.clientY-t.getBoundingClientRect().top,o=e.clientX-t.getBoundingClientRect().left,i=unsafeWindow.document.body.style.userSelect;function r(e){const t=Math.max(e.clientY-n,20);h.style.top=t+"px",h.style.left=Math.min(Math.max(e.clientX-o,20),window.innerWidth-340-20)+"px",m.style.height=`calc(100vh - ${t}px)`}unsafeWindow.document.body.style.userSelect="none",document.addEventListener("mousemove",r),document.addEventListener("mouseup",(function e(t){document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",e);const n=h.getBoundingClientRect();s.set({eventsViewerPosition:Object.assign(Object.assign({},s.get().eventsViewerPosition),{[unsafeWindow.location.host]:{x:n.left/unsafeWindow.innerWidth,y:n.top/unsafeWindow.innerHeight}})}),unsafeWindow.document.body.style.userSelect=i}))}function j(e){_=y.value,$()}function k(e){e.shiftKey&&(d=!0,$())}function S(e){d&&!e.shiftKey&&(d=!1,$())}function O(){v={},w.forEach(e=>{v[e.type]=[],w.forEach(t=>{e!==t&&e.type===t.type&&Object.keys(e).map(n=>{"time_delta"!==n&&"uid"!==n&&"duration"!==n&&e[n]!==t[n]&&-1===v[e.type].indexOf(n)&&v[e.type].push(n)})})})}function C(e){return e.startsWith("-")}function M(e){return-1!==e.indexOf(":")}function T(e){const t=e.substr(0,e.indexOf(":"));return C(e)?t.substr(1):t}function P(e){return e.substr(e.indexOf(":")+1)}function $(e=!0){!function(){if(g)return;g=!0,h=document.createElement("div"),h.className="events-viewer",h.addEventListener("mouseover",k),document.addEventListener("mousemove",S),h.innerHTML=`\n    <style>${r.default}</style>\n    <div class="resizer"></div>\n    <div class="query-input-wrapper">\n      <input type="text" class="query-input" placeholder='Type a query, e.g., "-type:loaded"'>\n    </div>\n    <div class="events-list"></div>\n  `,y=h.querySelector(".query-input"),m=h.querySelector(".events-list");const e=(s.get().eventsViewerPosition||{})[unsafeWindow.location.host];e&&(h.style.left=100*e.x+"%",h.style.top=100*e.y+"%",m.style.height=`calc(100vh - ${100*e.y}%)`),y.addEventListener("keyup",j),h.querySelector(".resizer").addEventListener("mousedown",x),p=document.createElement("div"),document.body.parentElement.appendChild(p),f=p.attachShadow({mode:"open"}),f.appendChild(h),h.getBoundingClientRect().left>window.innerWidth-360&&(h.style.left=window.innerWidth-360+"px")}(),b?h.classList.add("paused"):h.classList.remove("paused"),d?h.classList.add("click-through"):h.classList.remove("click-through");const t=m.scrollHeight===m.scrollTop+m.offsetHeight;w=w.map((e,t)=>Object.assign(Object.assign({},e),{__sptmninja_id:t}));const n=w.filter(e=>{const t=a.parse(_);if(""===_)return!0;for(let n=0;n<t.length;n++){const o="object"==typeof t[n]?t[n].pattern:t[n];if(C(o)){if(M(o)){if(l.default.isMatch(e[T(o)],P(o)))return!1}else if(l.default.isMatch(e.type,o.substr(1)))return!1}else if(M(o)){if(!l.default.isMatch(e[T(o)],P(o)))return!1}else if(!l.default.isMatch(e.type,o))return!1}return!0});m.innerHTML='<div class="instructions">\n      <div>Ctrl+K to clear</div>\n      <div>Ctrl+P to pause</div>\n    </div>'+n.map((e,t)=>`\n      <div class="event ${e.__sptmninja_expanded?"expanded":""}" data-id="${e.__sptmninja_id}">\n        <div class="container">\n          <div class="toolbar">\n            <button class="button expand-button"></button>\n            <button class="button remove-button"></button>\n          </div>\n          ${(e.__sptmninja_expanded?["type",...Object.keys(e).filter(e=>"__sptmninja_expanded"!==e&&"__sptmninja_id"!==e&&"type"!==e).sort()]:["type",...v[e.type].sort().filter(e=>"__sptmninja_expanded"!==e&&"__sptmninja_id"!==e&&"type"!==e)]).map(t=>`\n              <span class="prop-name">${t.replace(/_/g," ")}</span>\n              <span class="prop-value">${e[t]}</span>\n            `).join("")}\n        </div>\n      </div>\n    `).join(""),[...m.querySelectorAll(".event .remove-button")].forEach(e=>{e.addEventListener("click",e=>{e.stopPropagation(),w.splice(Number(e.currentTarget.closest(".event").dataset.id),1),$(!1)})}),[...m.querySelectorAll(".event .expand-button")].forEach(e=>{e.addEventListener("click",e=>{e.stopPropagation();const t=Number(e.currentTarget.closest(".event").dataset.id);w[t].__sptmninja_expanded=!w[t].__sptmninja_expanded,$(!1)})}),t&&e&&(m.scrollTop=m.scrollHeight)}function E(...e){e[0].startsWith("%cSpot.IM Analytics")&&(c.call(unsafeWindow.console,"analytics"),function(...e){w.push(e[3])}(...e),O(),$()),c.call(unsafeWindow.console,...e)}function A(){return u=!u,u?(unsafeWindow.localStorage.setItem("SPOTIM_DEBUG_API","*"),unsafeWindow.console.log=E,$()):(unsafeWindow.console.log=c,g&&(g=!1,p.parentElement.removeChild(p))),s.set({showEventsViewer:u}),u}t.toggle=A,s.get().showEventsViewer&&A(),unsafeWindow.addEventListener("keypress",e=>{u&&("KeyK"===e.code&&e.ctrlKey&&(w=[],O(),$()),"KeyP"===e.code&&e.ctrlKey&&(b=!b,unsafeWindow.console.log=b?c:E,$()))})},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(3)),a=i(n(0)),l=r(n(2)),c=i(n(7)),u=r(n(31)),d=n(1);t.default=e=>o(void 0,void 0,void 0,(function*(){s.get().isNotFirstRun&&!e||(a.set(function(){const e=unsafeWindow.document.createElement("style");e.innerHTML=`\n    @font-face {\n      font-family: "BigBlue TerminalPlus";\n      src: url('${GM_getResourceURL("bigBlueFont")}') format('truetype');\n    }\n  `,unsafeWindow.document.head.appendChild(e);const t=d.isWindows?"Alt+S":"Ctrl+S";return(`\n    <style>\n      ${u.default}\n    </style>\n    <div class="welcomeMessageWrapper">\n      <div class="welcomeMessageWrapperMessage">\n        <p>👋 Welcome,</p>\n        <p>You can now hit <span class="shortcut">${t}</span> to open the command palette.</p>\n      </div>\n      <img src="${GM_getResourceURL("welcomeImage")}">\n      <p class="cta">Press ${t}</p>\n    </div>\n  `)}(),{color:l.default().default,title:"Welcome to Spot.IM Ninja Tools!"}),yield s.set({isNotFirstRun:!0}),yield c.setCurrentVersionAsLastShown())}))},function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(16)),s=i(n(14)),a=i(n(34)),l=i(n(35)),c=o(n(7));n(13),l.default(),s.default(),a.default(),c.showIfUpgraded(),r.init()},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(6)),s=i(n(4)),a=i(n(0)),l=i(n(12)),c=n(1);t.init=function(){let e,t=[];document.addEventListener("keydown",(function(n){if(n.key&&"escape"===n.key.toLowerCase()&&(s.stop(),a.hide(!0)),function(){var e,t;const n=document.activeElement;return(null===(e=n)||void 0===e?void 0:e.getAttribute("contenteditable"))||"INPUT"===(null===(t=n)||void 0===t?void 0:t.tagName)}())return;if(("s"===n.key.toLowerCase()||"ד"===n.key)&&(c.isWindows&&n.altKey||n.ctrlKey))return void l.show();t.push(n.key.toLowerCase()),clearTimeout(e),!function(e){const t=r.default[e];return!!t&&(t(),!0)}(t.join(""))?e=setTimeout(()=>{t=[]},500):t=[]}))}},function(e,t,n){"use strict";n.r(t),t.default='@keyframes spotim-scroll-to-comments-appear {\n  0% {\n    transform: scale(0.7);\n    opacity: 0;\n  }\n  90% {\n    transform: scale(1.02);\n    opacity: 1;\n  }\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n\n.reset-css {\n  azimuth: initial;\n  border-collapse: initial;\n  border-spacing: initial;\n  caption-side: initial;\n  color: initial;\n  cursor: initial;\n  direction: initial;\n  elevation: initial;\n  empty-cells: initial;\n  font-family: initial;\n  font-size: initial;\n  font-style: initial;\n  font-variant: initial;\n  font-weight: initial;\n  font: initial;\n  letter-spacing: initial;\n  line-height: initial;\n  list-style-image: initial;\n  list-style-position: initial;\n  list-style-type: initial;\n  list-style: initial;\n  orphans: initial;\n  pitch-range: initial;\n  pitch: initial;\n  quotes: initial;\n  richness: initial;\n  speak-header: initial;\n  speak-numeral: initial;\n  speak-punctuation: initial;\n  speak: initial;\n  speech-rate: initial;\n  stress: initial;\n  text-align: initial;\n  text-indent: initial;\n  text-transform: initial;\n  visibility: initial;\n  voice-family: initial;\n  volume: initial;\n  white-space: initial;\n  widows: initial;\n  word-spacing: initial;\n  -webkit-font-smoothing: unset;\n}\n\n.message {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  text-align: center;\n  background: red;\n  color: white;\n  font-weight: bold;\n  font-family: Helvetica;\n  font-size: 18px;\n  padding: 10px;\n  line-height: 1.5;\n  z-index: 100000000000;\n  animation: spotim-scroll-to-comments-appear 0.2s ease-out;\n  direction: ltr;\n  max-width: 600px;\n  margin: 5em auto;\n  border-radius: 1em;\n  overflow: hidden;\n  border: 3px solid;\n  box-shadow: 0px 1px 4px #00000075, 0px 1px 24px #00000075,\n    0px 0px 40px 5px #0000001c inset;\n  text-shadow: 0px 2px #00000033;\n}\n\n.below_notifications {\n  margin: 10em auto;\n}\n\n/*\n * Why not use normal "table" HTML tag you ask?\n *\n * Well, initially this extension would render dierctly to the document,\n * I only started rendering to a shadow-dom long after I wrote this.\n * This caused a lot of CSS override issues so I succombed and decided to\n * use only divs everywere.\n * Someday I\'ll clear this thing up.\n */\n.message .table {\n  display: table;\n  border: none;\n  width: 100%;\n  text-align: left;\n  border-collapse: collapse;\n  margin: 0;\n  color: inherit;\n  font-weight: inherit;\n}\n\n.message .table .tr {\n  display: table-row;\n  background: initial !important;\n}\n\n.message .table .td {\n  display: table-cell;\n  padding: initial;\n  border: none;\n  border-bottom: 1px solid #00000021;\n}\n\n.message.dark .table .td {\n  border-bottom: 1px solid #ffffff21;\n}\n\n.message .table .tr:last-child .td {\n  border-bottom: none;\n}\n\n.message .table .td:first-child {\n  text-align: right;\n  padding-right: 12px;\n}\n\n.scrollable_area {\n  max-height: calc(100vh - 300px);\n  overflow-y: auto;\n}\n\n.close_button {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  color: #ffffff73;\n  cursor: pointer;\n  padding: 10px;\n  line-height: 11px;\n  z-index: 11;\n}\n\n.close_button:active {\n  text-shadow: 0px -2px #00000033;\n}\n\n.inset_shadow {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  box-shadow: 0px 0px 3px black inset;\n  z-index: 100;\n  border-radius: 14px;\n  pointer-events: none;\n}\n\n.title {\n  padding: 12px 0px 10px;\n  box-shadow: 0px -20px 50px -24px #00ffff36 inset, 0px 1px 1px #00000038;\n  margin: -10px -10px 8px;\n  position: relative;\n  z-index: 10;\n}\n\n.dark .title {\n  box-shadow: 0px -20px 50px -24px #c3c3c336 inset, 0px 1px 1px #cccccc38;\n}\n\n.titleIcon {\n  margin-inline-end: 12px;\n}\n\n.muted_text {\n  text-shadow: none;\n  color: #ffffff73;\n  font-weight: normal;\n}\n\n.weight_normal {\n  font-weight: normal;\n}\n\n.muted_result {\n  font-weight: normal;\n  opacity: 0.8;\n}\n\n.weight_bold {\n  font-weight: bold;\n}\n\n.pallete_row_main_col {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.palette_row_description {\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.palette_row_recently_used {\n  font-weight: normal;\n  font-size: 0.7em;\n  opacity: 0.7;\n  margin: 0px 7px;\n  flex: 0 0 auto;\n  transform: translateX(26px);\n}\n\n[data-selected] .palette_row_recently_used {\n  transform: translateX(0px);\n}\n\n.margin_top {\n  margin-top: 12px;\n}\n\n.emoji {\n  position: absolute;\n  font-size: 6em;\n  transform: translateY(-50%);\n  top: 50%;\n  left: -15px;\n  z-index: -1;\n  text-shadow: 0px 0px 10px #0000006e;\n  height: 150px;\n}\n\n.title + .emoji {\n  margin-top: 20px;\n}\n\n.message_progress {\n  background: black;\n  position: absolute;\n  left: 0px;\n  height: 100%;\n  width: 0%;\n  top: 0px;\n  opacity: 0.2;\n  z-index: -1;\n  transition: width 0.2s ease-out;\n}\n\n.code {\n  font-family: monaco;\n  font-size: 13px;\n  color: #d3d5da;\n  margin: 10px 0px;\n  display: inline-block;\n  background: #2b579c;\n  padding: 4px 8px;\n  border-radius: 5px;\n}\n\n.mono {\n  background: #0000003d;\n  padding: 1px 7px;\n  border-radius: 5px;\n  box-shadow: 0px 1px 0px #00000063;\n  color: white;\n  font-family: monaco;\n  font-size: 15px;\n  margin: 4px 0px;\n  display: inline-block;\n}\n\n.dark .mono {\n  background: #ffffff3d;\n}\n\n.hidden {\n  opacity: 0.5;\n}\n\n.detailed_description {\n  font-weight: normal;\n  font-size: 0.8em;\n  margin: 2px 0px 5px;\n  color: #ffffffbf;\n}\n\n.mono a {\n  color: inherit;\n  text-decoration: none;\n  outline: none;\n}\n\n.mono a:focus,\n.mono a:hover {\n  text-decoration: underline;\n}\n\n.input {\n  width: 100%;\n  padding: 10px;\n  box-sizing: border-box;\n  font-size: 20px;\n  background: #ffffff33;\n  border: none;\n  border-radius: 6px;\n  outline: none;\n  box-shadow: 0px 3px 9px #0000002e inset;\n  border-top: 1px solid #0000004f;\n  border-bottom: 1px solid #ffffff42;\n  color: white;\n  font-weight: bold;\n}\n\n.results {\n  max-height: 270px;\n  overflow-y: scroll;\n  padding-right: 10px;\n}\n\n.input + .results:not(:empty) {\n  margin-top: 12px;\n}\n\n.results .tr {\n  cursor: pointer;\n}\n\n.input + .results .table .tr .td:first-child {\n  padding-right: 20px;\n}\n\n.input + .results .table .tr .td:nth-child(2) {\n  width: 100%;\n}\n\n::-webkit-scrollbar {\n  width: 6px;\n}\n\n::-webkit-scrollbar-track {\n  border-radius: 10px;\n  background: #0000001a;\n}\n\n::-webkit-scrollbar-thumb {\n  border-radius: 10px;\n  background: #00000036;\n}\n\n.gutterActions {\n  display: flex;\n  margin: -10px;\n  padding: 10px 0px;\n  border-top: 1px solid #0000000f;\n  background: linear-gradient(#ffffff2b, #0000001a);\n  margin-top: 0px;\n  z-index: 1;\n  position: relative;\n}\n\n.gutterActions .gutterActionsButton {\n  font-size: inherit;\n  font-family: inherit;\n  color: inherit;\n  background: none;\n  border: none;\n  flex: auto;\n  margin: -10px 0px;\n  border-right: 1px solid #00000038;\n  cursor: pointer;\n  padding: 1em 0px;\n}\n'},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(0)),a=i(n(1)),l=i(n(5)),c=r(n(2)),u=r(n(9));let d,p;function f(e){const[n,i]=u.default(["Delete Credentials","Cancel","Submit"]),r="\n      margin: 1em 2em 1.5em;\n    ",d="\n      font-weight: normal;\n      margin: 1em 0px;\n      text-align: left;\n    ",p="\n      display: flex;\n      align-items: baseline;\n      margin: 1em 3em;\n    ",f="\n      margin-right: 1em;\n      width: 120px;\n      text-align: right;\n    ",h="\n      text-align: left;\n      font-size: 0.8em;\n      font-weight: normal;\n      opacity: 0.8;\n    ",m="\n      position: absolute;\n      visibility: hidden\n    ",g=e?"Your host panel credentials are required.":"Enter your host panel credentials:";function v(){return o(this,void 0,void 0,(function*(){const n=l.get().querySelector("#emailInput").value.trim(),o=l.get().querySelector("#passwordInput").value.trim();n&&o&&(yield GM_setValue("email",n),yield GM_setValue("password",o),s.set("Your credentials were set!",{timeout:2e3,color:c.default().success,emoji:"😃"}),e&&setTimeout(()=>{t.open({spotId:a.getSpotId(a.getLauncherEl())})},2e3))}))}s.set(`\n      <form style="${r}">\n        <div style="${d}">${g}</div>\n        <div style="${p}">\n          <label style="${f}">Email</label>\n          <input id="emailInput" class="input" >\n        </div>\n        <div style="${p}">\n          <label style="${f}">Password</label>\n          <input id="passwordInput" class="input" type="password">\n        </div>\n        <div style="${h}">\n          If you're using Google to sign to the Host Panel this won't work.\n          You'll have to create an account using your email address to use\n          this feature.\n        </div>\n        <input style="${m}" type="submit"/>\n      </form>\n    ${n()}\n  `,{title:e?"Open Host Panel":"Set Host Panel Credentials",color:c.default().default}),setTimeout(()=>{l.get().querySelector("#emailInput").focus()},10),l.get().querySelector("form").addEventListener("submit",e=>{e.preventDefault(),v()}),i((function(e){return o(this,void 0,void 0,(function*(){2===e?v():1===e?s.hide(!0):(yield GM_setValue("email",""),yield GM_setValue("password",""),s.set("Your credentials were deleted!",{timeout:3e3,color:c.default().default,emoji:"👍🏻"}))}))}))}t.openCredentialsForm=f,t.open=({spotId:e})=>o(void 0,void 0,void 0,(function*(){if(p&&(d=window.open(p),p=null,s.set("Openning Host Panel...",{color:c.default().success,timeout:2e3})),d&&!d.closed)return void d.focus();const t=yield GM_getValue("email"),n=yield GM_getValue("password");if(!t||!n)return void f(!0);s.set("Fetching network id...",{color:c.default().default,step:0,numSteps:5,title:"Open Admin Panel"});var o=yield fetch("https://www.spot.im/api/me/network-id-by-name/spotim").then(e=>e.json());s.set("Fetching network token...",{color:c.default().default,step:1,numSteps:5,title:"Open Admin Panel"});var i=yield fetch(`https://www.spot.im/api/me/network-token/${o.network_id}`,{method:"post"}).then(e=>e.json());s.set("Logging in...",{color:c.default().default,step:2,numSteps:5,title:"Open Admin Panel"});var r=yield fetch("https://www.spot.im/api/email-connect/login",{method:"post",headers:new Headers({"x-spotim-networkid":o.network_id,"x-spotim-token":i.token,"Content-Type":"application/json"}),body:JSON.stringify({email:t,password:n})}).then(e=>e.json());if("EmailLogin_TooManyLoginAttemptsError"===r.type)return void s.set("Too many login attempts",{color:c.default().error,timeout:3500,emoji:"😕"});if(!1===r.success)return void s.set("Couldn't log in to Host Panel",{color:c.default().error,timeout:3500,emoji:"😕"});s.set("Fetching login json...",{color:c.default().default,step:3,numSteps:5,title:"Open Admin Panel"});yield fetch("https://www.spot.im/api/me/login-registered",{method:"post",headers:new Headers({"x-spotim-networkid":o.network_id,"x-spotim-token":i.token})}).then(e=>e.json());s.set("Calling me-make-admin...",{color:c.default().default,step:4,numSteps:5,title:"Open Admin Panel"});var l=yield fetch(`https://www.spot.im/api/moderation/internal/make-me-admin?spot_id=${e}`,{headers:new Headers({"x-spotim-networkid":o.network_id,"x-spotim-token":i.token})}).then(e=>e.json());s.set("Fetching token JSON...",{color:c.default().default,step:5,numSteps:5,title:"Open Admin Panel"});var u=yield fetch(`https://www.spot.im/api/me/token-by-ticket/${l.token_ticket}`,{method:"post"}).then(e=>e.json());const h=[`https://admin.${!a.isProduction(a.getLauncherEl())?"staging-":""}spot.im/spot/${e}/moderation?`,`name=${l.spot_name}&`,`token=${u.token}&`,`network_name=${u.network_name}`].join("");s.set("Opening Host Panel",{color:c.default().success,timeout:2e3,emoji:"😃"}),GM_openInTab(h,!1)}))},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(1)),a=i(n(0)),l=r(n(2)),c=r(n(20));let u;function d(){return o(this,void 0,void 0,(function*(){let e;function t(){return o(this,void 0,void 0,(function*(){const t=s.getLauncherEl();let n;t?n=yield fetch(`https://api-2-0.spot.im/v1.0.0/config/launcher/${s.getSpotId(t)}/${s.getPostId(t)}/vendor,init,conversation`):unsafeWindow.location.href.match(/https:\/\/api-2-0.spot.im\/v1.0.0\/config\/launcher\/.*?\/.*?\/.*/)&&(n=yield fetch(unsafeWindow.location.href));const o=(yield n.json()).assets_config;e&&!c.default(o,e)&&(p(),GM_notification({title:"An asset has been updated!",text:`${window.location.hostname} — Detected asset update`,onclick:()=>{window.focus()}}),a.set("An asset has been updated!",{color:l.default().default,emoji:"⬆️"})),e=o}))}t(),u=setInterval(t,1e3),a.set("I will notify you on asset updates!",{timeout:4e3,color:l.default().success,emoji:"😃"})}))}function p(e){clearInterval(u),u=!1,e&&a.set("Stopped listening to asset updates",{timeout:4e3,color:l.default().default,emoji:"❌"})}t.toggleNotifyOnChange=function(){u?p(!0):d()}},function(e,t,n){(function(e,n){var o="[object Arguments]",i="[object Map]",r="[object Object]",s="[object Set]",a=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c[o]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c[i]=c["[object Number]"]=c[r]=c["[object RegExp]"]=c[s]=c["[object String]"]=c["[object WeakMap]"]=!1;var u="object"==typeof e&&e&&e.Object===Object&&e,d="object"==typeof self&&self&&self.Object===Object&&self,p=u||d||Function("return this")(),f=t&&!t.nodeType&&t,h=f&&"object"==typeof n&&n&&!n.nodeType&&n,m=h&&h.exports===f,g=m&&u.process,v=function(){try{return g&&g.binding&&g.binding("util")}catch(e){}}(),b=v&&v.isTypedArray;function y(e,t){for(var n=-1,o=null==e?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1}function _(e){var t=-1,n=Array(e.size);return e.forEach((function(e,o){n[++t]=[o,e]})),n}function w(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var x,j,k,S=Array.prototype,O=Function.prototype,C=Object.prototype,M=p["__core-js_shared__"],T=O.toString,P=C.hasOwnProperty,$=(x=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+x:"",E=C.toString,A=RegExp("^"+T.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N=m?p.Buffer:void 0,I=p.Symbol,L=p.Uint8Array,W=C.propertyIsEnumerable,z=S.splice,D=I?I.toStringTag:void 0,B=Object.getOwnPropertySymbols,R=N?N.isBuffer:void 0,V=(j=Object.keys,k=Object,function(e){return j(k(e))}),F=ve(p,"DataView"),q=ve(p,"Map"),H=ve(p,"Promise"),G=ve(p,"Set"),U=ve(p,"WeakMap"),K=ve(Object,"create"),Y=we(F),J=we(q),X=we(H),Z=we(G),Q=we(U),ee=I?I.prototype:void 0,te=ee?ee.valueOf:void 0;function ne(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function oe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function ie(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function re(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ie;++t<n;)this.add(e[t])}function se(e){var t=this.__data__=new oe(e);this.size=t.size}function ae(e,t){var n=ke(e),o=!n&&je(e),i=!n&&!o&&Se(e),r=!n&&!o&&!i&&Pe(e),s=n||o||i||r,a=s?function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}(e.length,String):[],l=a.length;for(var c in e)!t&&!P.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||_e(c,l))||a.push(c);return a}function le(e,t){for(var n=e.length;n--;)if(xe(e[n][0],t))return n;return-1}function ce(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":D&&D in Object(e)?function(e){var t=P.call(e,D),n=e[D];try{e[D]=void 0;var o=!0}catch(e){}var i=E.call(e);o&&(t?e[D]=n:delete e[D]);return i}(e):function(e){return E.call(e)}(e)}function ue(e){return Te(e)&&ce(e)==o}function de(e,t,n,a,l){return e===t||(null==e||null==t||!Te(e)&&!Te(t)?e!=e&&t!=t:function(e,t,n,a,l,c){var u=ke(e),d=ke(t),p=u?"[object Array]":ye(e),f=d?"[object Array]":ye(t),h=(p=p==o?r:p)==r,m=(f=f==o?r:f)==r,g=p==f;if(g&&Se(e)){if(!Se(t))return!1;u=!0,h=!1}if(g&&!h)return c||(c=new se),u||Pe(e)?he(e,t,n,a,l,c):function(e,t,n,o,r,a,l){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new L(e),new L(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return xe(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case i:var c=_;case s:var u=1&o;if(c||(c=w),e.size!=t.size&&!u)return!1;var d=l.get(e);if(d)return d==t;o|=2,l.set(e,t);var p=he(c(e),c(t),o,r,a,l);return l.delete(e),p;case"[object Symbol]":if(te)return te.call(e)==te.call(t)}return!1}(e,t,p,n,a,l,c);if(!(1&n)){var v=h&&P.call(e,"__wrapped__"),b=m&&P.call(t,"__wrapped__");if(v||b){var y=v?e.value():e,x=b?t.value():t;return c||(c=new se),l(y,x,n,a,c)}}if(!g)return!1;return c||(c=new se),function(e,t,n,o,i,r){var s=1&n,a=me(e),l=a.length,c=me(t).length;if(l!=c&&!s)return!1;var u=l;for(;u--;){var d=a[u];if(!(s?d in t:P.call(t,d)))return!1}var p=r.get(e);if(p&&r.get(t))return p==t;var f=!0;r.set(e,t),r.set(t,e);var h=s;for(;++u<l;){d=a[u];var m=e[d],g=t[d];if(o)var v=s?o(g,m,d,t,e,r):o(m,g,d,e,t,r);if(!(void 0===v?m===g||i(m,g,n,o,r):v)){f=!1;break}h||(h="constructor"==d)}if(f&&!h){var b=e.constructor,y=t.constructor;b!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y)&&(f=!1)}return r.delete(e),r.delete(t),f}(e,t,n,a,l,c)}(e,t,n,a,de,l))}function pe(e){return!(!Me(e)||function(e){return!!$&&$ in e}(e))&&(Oe(e)?A:a).test(we(e))}function fe(e){if(n=(t=e)&&t.constructor,o="function"==typeof n&&n.prototype||C,t!==o)return V(e);var t,n,o,i=[];for(var r in Object(e))P.call(e,r)&&"constructor"!=r&&i.push(r);return i}function he(e,t,n,o,i,r){var s=1&n,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var c=r.get(e);if(c&&r.get(t))return c==t;var u=-1,d=!0,p=2&n?new re:void 0;for(r.set(e,t),r.set(t,e);++u<a;){var f=e[u],h=t[u];if(o)var m=s?o(h,f,u,t,e,r):o(f,h,u,e,t,r);if(void 0!==m){if(m)continue;d=!1;break}if(p){if(!y(t,(function(e,t){if(s=t,!p.has(s)&&(f===e||i(f,e,n,o,r)))return p.push(t);var s}))){d=!1;break}}else if(f!==h&&!i(f,h,n,o,r)){d=!1;break}}return r.delete(e),r.delete(t),d}function me(e){return function(e,t,n){var o=t(e);return ke(e)?o:function(e,t){for(var n=-1,o=t.length,i=e.length;++n<o;)e[i+n]=t[n];return e}(o,n(e))}(e,$e,be)}function ge(e,t){var n,o,i=e.__data__;return("string"==(o=typeof(n=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function ve(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return pe(n)?n:void 0}ne.prototype.clear=function(){this.__data__=K?K(null):{},this.size=0},ne.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ne.prototype.get=function(e){var t=this.__data__;if(K){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return P.call(t,e)?t[e]:void 0},ne.prototype.has=function(e){var t=this.__data__;return K?void 0!==t[e]:P.call(t,e)},ne.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=K&&void 0===t?"__lodash_hash_undefined__":t,this},oe.prototype.clear=function(){this.__data__=[],this.size=0},oe.prototype.delete=function(e){var t=this.__data__,n=le(t,e);return!(n<0)&&(n==t.length-1?t.pop():z.call(t,n,1),--this.size,!0)},oe.prototype.get=function(e){var t=this.__data__,n=le(t,e);return n<0?void 0:t[n][1]},oe.prototype.has=function(e){return le(this.__data__,e)>-1},oe.prototype.set=function(e,t){var n=this.__data__,o=le(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this},ie.prototype.clear=function(){this.size=0,this.__data__={hash:new ne,map:new(q||oe),string:new ne}},ie.prototype.delete=function(e){var t=ge(this,e).delete(e);return this.size-=t?1:0,t},ie.prototype.get=function(e){return ge(this,e).get(e)},ie.prototype.has=function(e){return ge(this,e).has(e)},ie.prototype.set=function(e,t){var n=ge(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this},re.prototype.add=re.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},re.prototype.has=function(e){return this.__data__.has(e)},se.prototype.clear=function(){this.__data__=new oe,this.size=0},se.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},se.prototype.get=function(e){return this.__data__.get(e)},se.prototype.has=function(e){return this.__data__.has(e)},se.prototype.set=function(e,t){var n=this.__data__;if(n instanceof oe){var o=n.__data__;if(!q||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new ie(o)}return n.set(e,t),this.size=n.size,this};var be=B?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,o=null==e?0:e.length,i=0,r=[];++n<o;){var s=e[n];t(s,n,e)&&(r[i++]=s)}return r}(B(e),(function(t){return W.call(e,t)})))}:function(){return[]},ye=ce;function _e(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||l.test(e))&&e>-1&&e%1==0&&e<t}function we(e){if(null!=e){try{return T.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function xe(e,t){return e===t||e!=e&&t!=t}(F&&"[object DataView]"!=ye(new F(new ArrayBuffer(1)))||q&&ye(new q)!=i||H&&"[object Promise]"!=ye(H.resolve())||G&&ye(new G)!=s||U&&"[object WeakMap]"!=ye(new U))&&(ye=function(e){var t=ce(e),n=t==r?e.constructor:void 0,o=n?we(n):"";if(o)switch(o){case Y:return"[object DataView]";case J:return i;case X:return"[object Promise]";case Z:return s;case Q:return"[object WeakMap]"}return t});var je=ue(function(){return arguments}())?ue:function(e){return Te(e)&&P.call(e,"callee")&&!W.call(e,"callee")},ke=Array.isArray;var Se=R||function(){return!1};function Oe(e){if(!Me(e))return!1;var t=ce(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ce(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Me(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Te(e){return null!=e&&"object"==typeof e}var Pe=b?function(e){return function(t){return e(t)}}(b):function(e){return Te(e)&&Ce(e.length)&&!!c[ce(e)]};function $e(e){return null!=(t=e)&&Ce(t.length)&&!Oe(t)?ae(e):fe(e);var t}n.exports=function(e,t){return de(e,t)}}).call(this,n(21),n(22)(e))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";n.r(t),t.default=".whatsNewWrapper {\n  text-align: left;\n  margin-top: -7px;\n  font-weight: normal;\n}\n\n.whatsNewContent {\n  max-height: calc(100vh - 10em - 180px);\n  overflow-y: auto;\n  overflow-x: hidden;\n  padding: 0px 10px;\n  margin: 0px -10px;\n  padding-top: 1em;\n}\n\n.whatsNewContent .whatsNewTitle {\n  margin-left: -10px;\n  padding-left: 1em;\n  margin-right: -10px;\n  padding-top: 1em;\n  font-weight: bold;\n  padding-bottom: 0em;\n}\n\n.whatsNewContent .whatsNewTitle.latest {\n  text-shadow: 0px 0px 10px #ffffff91;\n}\n\n.whatsNewContent .whatsNewTitle:not(.latest) {\n  opacity: 0.75;\n}\n\n.whatsNewContent .whatsNewPreviousTitle {\n  margin-left: -10px;\n  padding-left: 1em;\n  margin-right: -10px;\n  border-top: 1px solid #00000040;\n  padding-top: 1em;\n  font-weight: bold;\n  padding-bottom: 0em;\n  border-bottom: 1px solid #3c3c3c26;\n  padding: 0.5em 1em;\n  background: #00000017;\n  text-align: left;\n}\n\n.whatsNewFeatureRequest {\n  text-align: left;\n  padding: 0.5em calc(0.5em + 10px);\n  background: #8bc34a;\n  margin: 0px -10px;\n  text-align: left;\n  border-top: 1px solid #00000078;\n}\n\n.whatsNewFeatureRequest a {\n  color: white;\n}\n\n.whatsNewContent .whatsNewTitle:first-child {\n  margin-top: -18px;\n  border: none;\n  background: none;\n}\n\n.whatsNewContent p {\n  font-weight: bold;\n  margin: 0px 0.6em;\n}\n\n.whatsNewContent ul {\n  margin-top: 0.4em;\n  list-style: disc;\n  margin-bottom: 0px;\n}\n\n.whatsNewContent ul:last-child {\n  margin-bottom: 1em;\n}\n\n.whatsNewContent ul.latest {\n  text-shadow: 0px 0px 10px #ffffff70;\n}\n\n.whatsNewContent ul:not(.latest) {\n  opacity: 0.75;\n}\n\n.whatsNewContent .whatsNewDescription {\n  font-size: 0.8em;\n  opacity: 0.6;\n}\n"},function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(0)),s=o(n(1)),a=i(n(10)),l=i(n(2));t.show=()=>{r.set(s.renderTable([{keyCombo:s.isWindows?"alt+s":"ctrl+s",description:"Open Command Palette"},...a.default,{keyCombo:"escape",description:"Hide Floating Message"}].map(e=>[`<span\n          title="${e.unlisted?"This command is unlisted, no key combo assigned to it":""}"\n          class="\n            mono\n            ${e.unlisted?"hidden":""}\n          ">\n          ${e.unlisted?"×":e.keyCombo}\n        </span>`,e.description+(e.detailedDescription?`<div class="detailed_description">${e.detailedDescription}</div>`:"")])),{color:l.default().default,title:"Available Shortcuts",overflow:"scroll"})}},function(e,t,n){var o;o={},e.exports=o,o.simpleFilter=function(e,t){return t.filter((function(t){return o.test(e,t)}))},o.test=function(e,t){return null!==o.match(e,t)},o.match=function(e,t,n){n=n||{};var o,i=0,r=[],s=t.length,a=0,l=0,c=n.pre||"",u=n.post||"",d=n.caseSensitive&&t||t.toLowerCase();e=n.caseSensitive&&e||e.toLowerCase();for(var p=0;p<s;p++)o=t[p],d[p]===e[i]?(o=c+o+u,i+=1,l+=1+l):l=0,a+=l,r[r.length]=o;return i===e.length?(a=d===e?1/0:a,{rendered:r.join(""),score:a}):null},o.filter=function(e,t,n){return t&&0!==t.length?"string"!=typeof e?t:(n=n||{},t.reduce((function(t,i,r,s){var a=i;n.extract&&(a=n.extract(i));var l=o.match(e,a,n);return null!=l&&(t[t.length]={string:l.rendered,score:l.score,index:r,original:i}),t}),[]).sort((function(e,t){var n=t.score-e.score;return n||e.index-t.index}))):[]}},function(e,t,n){"use strict";n.r(t),t.default=".fuzzyHighlight {\n  color: #ffeb3b;\n  font-weight: bold;\n}\n\n.inputNotEmpty .pallete_row_main_col {\n  font-weight: normal;\n}\n\n.badgeWrapper {\n  left: 11px;\n  position: absolute;\n  top: 14px;\n  display: flex;\n  align-items: baseline;\n}\n\n.devBadge {\n  padding: 3px 7px 1px;\n  border-radius: 6px 0px 0px 6px;\n  background: #e91e63;\n  font-weight: normal;\n  text-transform: uppercase;\n  font-size: 0.7em;\n  margin-right: 0px;\n  display: block;\n  text-shadow: none;\n  box-shadow: 0px 0px 6px inset #000000a1, 0px -1px #00000080;\n}\n\n.buildAge {\n  font-size: 0.8em;\n  padding: 3px 7px 1px;\n  border-radius: 0px 6px 6px 0px;\n  background: #ff5722;\n  font-weight: normal;\n  font-size: 0.7em;\n  margin-right: 12px;\n  display: block;\n  color: white;\n  text-shadow: none;\n  box-shadow: 0px -1px #00000080;\n}\n"},function(e,t,n){"use strict";n.r(t),t.default=".events-viewer {\n  position: fixed;\n  right: 20px;\n  bottom: 0px;\n  top: 20px;\n  font-family: Helvetica;\n  height: calc(100vh - 20px);\n  display: flex;\n  flex-direction: column;\n  max-width: 340px;\n  font-size: 16px;\n  z-index: 2147483647;\n  border-radius: 10px 10px 0px 0px;\n  overflow: hidden;\n  background: #ffffff26;\n  backdrop-filter: blur(10px);\n  border: 1px solid #00000021;\n  /* box-shadow: 0px 0px 12px -6px black; */\n}\n\n.events-viewer.paused {\n  /* opacity: 0.6; */\n}\n\n.events-viewer.click-through {\n  pointer-events: none;\n  opacity: 0.6;\n}\n\n.events-list {\n  overflow: scroll;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  width: 340px;\n}\n\n.instructions {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  color: #bbb;\n  line-height: 1.5em;\n  font-size: 0.9em;\n  padding: 62px 16px 16px;\n  text-align: right;\n}\n\n.event {\n  margin: 0px 10px 10px;\n  text-align: right;\n  position: relative;\n}\n\n/* .event:not(.expanded) .container {\n  cursor: pointer;\n} */\n\n.event .container {\n  background: #467fdb;\n  color: white;\n  padding: 7px 10px;\n  border-radius: 10px;\n  display: inline-flex;\n  flex-direction: column;\n  box-shadow: 0px 0px 10px -4px black, 0px 2px 10px -4px #00a1ff inset;\n  border: 2px solid transparent;\n  text-align: left;\n}\n\n.event .toolbar {\n  position: absolute;\n  z-index: 1;\n  background: #467fdb;\n  opacity: 0;\n  will-change: opacity;\n  transition: opacity 0.2s ease-out;\n  right: 10px;\n  top: 7px;\n}\n\n.event .container:hover .toolbar {\n  opacity: 1;\n}\n\n.event .toolbar .button {\n  border-radius: 100%;\n  width: 11px;\n  height: 11px;\n  border: none;\n  padding: 0px;\n  cursor: pointer;\n  margin-right: 2px;\n}\n\n.event .toolbar .button:last-child {\n  margin-right: 0px;\n}\n\n.event .toolbar .remove-button {\n  background: #ff4b4a;\n}\n\n.event .toolbar .expand-button {\n  background: #00c543;\n}\n\n.event.expanded .toolbar .expand-button {\n  background: #ffb43b;\n}\n\n.event .prop-name:nth-child(2) {\n  margin-top: 0px;\n}\n\n.event .prop-name {\n  text-transform: uppercase;\n  font-size: 0.7em;\n  align-self: start;\n  margin: 6px 0px 3px;\n  opacity: 0.6;\n}\n\n.event .prop-value {\n  align-self: flex-start;\n  word-break: break-word;\n}\n\n.query-input-wrapper {\n  position: fixed;\n  right: 0px;\n  background: #ffffff26;\n  z-index: 10;\n  backdrop-filter: blur(10px);\n}\n\n.query-input {\n  width: 300px;\n  padding: 10px;\n  margin: 10px;\n  border-radius: 10px;\n  border: none;\n  font-size: 1em;\n  box-shadow: 0px 0px 0px 2px #467fdb, 0px 0px 10px -5px black,\n    0px 1px 7px -5px black inset;\n  outline: none;\n}\n\n.resizer {\n  position: absolute;\n  background: transparent;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  height: 7px;\n  cursor: move;\n  z-index: 11;\n}\n"},function(e,t){t.quote=function(e){return e.map((function(e){return e&&"object"==typeof e?e.op.replace(/(.)/g,"\\$1"):/["\s]/.test(e)&&!/'/.test(e)?"'"+e.replace(/(['\\])/g,"\\$1")+"'":/["'\s]/.test(e)?'"'+e.replace(/(["\\$`!])/g,"\\$1")+'"':String(e).replace(/([A-z]:)?([#!"$&'()*,:;<=>?@\[\\\]^`{|}])/g,"$1\\$2")})).join(" ")};for(var n="(?:"+["\\|\\|","\\&\\&",";;","\\|\\&","\\<\\(",">>",">\\&","[&;()|<>]"].join("|")+")",o="",i=0;i<4;i++)o+=(Math.pow(16,8)*Math.random()).toString(16);t.parse=function(e,t,i){var r=function(e,t,i){var r=new RegExp(["("+n+")",'((\\\\[\'"|&;()<> \\t]|[^\\s\'"|&;()<> \\t])+|"((\\\\"|[^"])*?)"|'+"'((\\\\'|[^'])*?)')*"].join("|"),"g"),s=e.match(r).filter(Boolean),a=!1;if(!s)return[];t||(t={});i||(i={});return s.map((function(e,r){if(!a){if(RegExp("^"+n+"$").test(e))return{op:e};for(var l=i.escape||"\\",c=!1,u=!1,d="",p=!1,f=0,h=e.length;f<h;f++){var m=e.charAt(f);if(p=p||!c&&("*"===m||"?"===m),u)d+=m,u=!1;else if(c)m===c?c=!1:"'"==c?d+=m:m===l?(f+=1,d+='"'===(m=e.charAt(f))||m===l||"$"===m?m:l+m):d+="$"===m?g():m;else if('"'===m||"'"===m)c=m;else{if(RegExp("^"+n+"$").test(m))return{op:e};if(RegExp("^#$").test(m))return a=!0,d.length?[d,{comment:e.slice(f+1)+s.slice(r+1).join(" ")}]:[{comment:e.slice(f+1)+s.slice(r+1).join(" ")}];m===l?u=!0:d+="$"===m?g():m}}return p?{op:"glob",pattern:d}:d}function g(){var n,i;if(f+=1,"{"===e.charAt(f)){if(f+=1,"}"===e.charAt(f))throw new Error("Bad substitution: "+e.substr(f-2,3));if((n=e.indexOf("}",f))<0)throw new Error("Bad substitution: "+e.substr(f));i=e.substr(f,n-f),f=n}else/[*@#?$!_\-]/.test(e.charAt(f))?(i=e.charAt(f),f+=1):(n=e.substr(f).match(/[^\w\d_]/))?(i=e.substr(f,n.index),f+=n.index-1):(i=e.substr(f),f=e.length);return function(e,n,i){var r="function"==typeof t?t(i):t[i];void 0===r&&""!=i?r="":void 0===r&&(r="$");return"object"==typeof r?n+o+JSON.stringify(r)+o:n+r}(0,"",i)}})).reduce((function(e,t){return void 0===t?e:e.concat(t)}),[])}(e,t,i);return"function"!=typeof t?r:r.reduce((function(e,t){if("object"==typeof t)return e.concat(t);var n=t.split(RegExp("("+o+".*?"+o+")","g"));return 1===n.length?e.concat(n[0]):e.concat(n.filter(Boolean).map((function(e){return RegExp("^"+o).test(e)?JSON.parse(e.split(o)[1]):e})))}),[])}},function(e,t,n){"use strict";const o=n(30),i=new Map;function r(e,t){t={caseSensitive:!1,...t};const n=e+JSON.stringify(t);if(i.has(n))return i.get(n);const r="!"===e[0];r&&(e=e.slice(1)),e=o(e).replace(/\\\*/g,".*");const s=new RegExp(`^${e}$`,t.caseSensitive?"":"i");return s.negated=r,i.set(n,s),s}e.exports=(e,t,n)=>{if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError(`Expected two arrays, got ${typeof e} ${typeof t}`);if(0===t.length)return e;const o="!"===t[0][0];t=t.map(e=>r(e,n));const i=[];for(const n of e){let e=o;for(const o of t)o.test(n)&&(e=!o.negated);e&&i.push(n)}return i},e.exports.isMatch=(e,t,n)=>{const o=Array.isArray(e)?e:[e],i=Array.isArray(t)?t:[t];return o.some(e=>i.every(t=>{const o=r(t,n),i=o.test(e);return o.negated?!i:i}))}},function(e,t,n){"use strict";const o=/[|\\{}()[\]^$+*?.-]/g;e.exports=e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(o,"\\$&")}},function(e,t,n){"use strict";n.r(t),t.default="@keyframes cta {\n  0% {\n    color: #ffffff;\n    text-shadow: inherit;\n  }\n  74.99% {\n    color: #ffffff;\n    text-shadow: inherit;\n  }\n  75% {\n    color: transparent;\n    text-shadow: none;\n  }\n  100% {\n    color: transparent;\n    text-shadow: none;\n  }\n}\n\n.welcomeMessageWrapper {\n  margin: -7px -10px -18px;\n}\n\n.welcomeMessageWrapper img {\n  width: 100%;\n  height: 294px;\n}\n\n.welcomeMessageWrapper .welcomeMessageWrapperMessage {\n  text-align: left;\n  padding: 20px;\n  margin-bottom: -65px;\n}\n\n.welcomeMessageWrapper .welcomeMessageWrapperMessage p:first-child {\n  margin-top: 0px;\n}\n\n.welcomeMessageWrapper .shortcut {\n  background: #ff37fd;\n  padding: 6px 8px;\n  border-radius: 5px;\n  box-shadow: 0px 0px 2px #000000a8;\n}\n\n.welcomeMessageWrapper .cta {\n  position: absolute;\n  bottom: 63px;\n  left: 21px;\n  animation: cta linear 1.4s infinite;\n  font-family: 'BigBlue TerminalPlus';\n  -webkit-font-smoothing: none;\n  font-weight: normal;\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1);t.default=(()=>{const e=new Date;return e.getHours()+":"+o.padTime(e.getMinutes().toString())})()},function(e,t,n){"use strict";n.r(t),t.default=".infoLine {\n  display: flex;\n  justify-content: space-between;\n  font-weight: normal;\n}\n\n.copyButton {\n  border: none;\n  text-shadow: none;\n  display: inline-block;\n  margin-top: 0px;\n  right: 9px;\n  font-size: 0.8em;\n  background: #00000030;\n  padding: 1px 7px;\n  border-radius: 5px;\n  cursor: pointer;\n  margin: 2px;\n  font-family: inherit;\n  color: inherit;\n  line-height: inherit;\n  visibility: hidden;\n  position: relative;\n  outline: none;\n}\n\n.copyButton .checkmark {\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  opacity: 0;\n}\n\n.copyButton.showCheckmark .checkmark {\n  opacity: 1;\n}\n\n.copyButton.showCheckmark > div:nth-child(2) {\n  visibility: hidden;\n}\n\n.infoLine:hover .copyButton {\n  visibility: visible;\n}\n"},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(3)),a=r(n(6)),l=i(n(1));t.default=()=>o(void 0,void 0,void 0,(function*(){if(s.get().showVersionsOnLoad){l.onFoundSpotimObject((function e(){unsafeWindow.__SPOTIM__.SERVICES.configProvider._data.assets_config?a.default.ssv():setTimeout(()=>{l.onFoundSpotimObject(e)},500)}))}}))},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(3));t.default=()=>{unsafeWindow.__spotim_ninja_tools_set_creds__=(e,t)=>o(void 0,void 0,void 0,(function*(){yield GM_setValue("email",e),yield GM_setValue("password",t),console.log("successfully set creds!")})),unsafeWindow.__spotim_ninja_tools_set_prefs__=e=>o(void 0,void 0,void 0,(function*(){const t=r.get(),n=Object.assign(Object.assign({},t),e);yield r.set(n),console.log("successfully set prefs!"),console.log(n)}))}}]);