// ==UserScript==
// @name        SpotIM Ninja Tools
// @version     4.2.8
// @author      dutzi
// @description A bunch of shortcuts to make our lives easier
// @supportURL  slack://channel?id=CSZGJD6R1&team=T0460KVUF
// @match       http*://*/*
// @namespace   https://spot.im/
// @homepageURL https://github.com/SpotIM/userscripts/tree/master/ninja-tools
// @noframes    true
// @resource    bigBlueFont https://rawcdn.githack.com/SpotIM/userscripts/53c2ab94cf3523830e17d299ed8abd533822d0c5/ninja-tools/src/assets/BigBlue_Terminal_437TT.TTF
// @resource    welcomeImage https://github.com/SpotIM/userscripts/raw/master/ninja-tools/src/assets/welcome-background.png
// @connect     extract-article-links.dutzi.now.sh
// @connect     raw.githubusercontent.com
// @connect     github.com
// @run-at      document-start
// @iconURL     https://rawcdn.githack.com/SpotIM/userscripts/b327b3d46d1c3bf681a56e05b9b88e6bbcc3153e/ninja-tools/icon64.png
// @icon64URL   https://rawcdn.githack.com/SpotIM/userscripts/b327b3d46d1c3bf681a56e05b9b88e6bbcc3153e/ninja-tools/icon64.png
// @grant       GM_setValue
// @grant       GM_getValue
// @grant       GM_openInTab
// @grant       GM_setClipboard
// @grant       GM_deleteValue
// @grant       GM_notification
// @grant       GM_getResourceURL
// @grant       GM_xmlhttpRequest
// @grant       unsafeWindow
// @grant       GM_addValueChangeListener
// @grant       GM_removeValueChangeListener
// ==/UserScript==

!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=o(n(3));t.getUseDarkTheme=()=>{const e=i.get(),{useDarkTheme:t}=e;return t};const r={default:{bg:"#467FDB",border:"#46abdb"},error:{bg:"#f44336",border:"#d81054"},success:{bg:"#4caf50",border:"#4dd052"}},s={default:{bg:"#121212",border:"#424242"},error:{bg:"#121212",border:"#424242"},success:{bg:"#121212",border:"#424242"}};t.default=()=>t.getUseDarkTheme()?s:r},function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(4)),s=o(n(0)),a=o(n(5)),l=i(n(24)),d=i(n(12));let u,c,p,f,h,m,g,v,y,b,w,x;function _(){if(h)return;h=!0;const e=document.createElement("style");e.innerHTML=l.default,a.get().appendChild(e)}function j(){if(f)return void(s.getUseDarkTheme()?u.classList.add("dark"):u.classList.remove("dark"));f=!0,u=document.createElement("div"),u.className="message reset-css",s.getUseDarkTheme()&&u.classList.add("dark");const e=document.createElement("div");e.className="inset_shadow",c=document.createElement("div"),p=document.createElement("div"),p.className="message_progress";const t=document.createElement("div");t.innerText="×",t.className="close_button",t.addEventListener("click",()=>{S(!0),r.stop()}),u.appendChild(c),u.appendChild(t),u.appendChild(e),u.appendChild(p),u.addEventListener("mouseenter",()=>{g=!0}),u.addEventListener("mouseleave",()=>{g=!1}),M(s.default().default),v=document.createElement("div"),document.body.appendChild(v),a.set(v.attachShadow({mode:"open"})),a.get().appendChild(u)}function k(){g=!1,v.parentNode||document.body.appendChild(v)}function O(){x&&(x(),x=void 0)}function S(e){function t(){v&&v.parentNode&&(v.parentNode.removeChild(v),C(0),y=!1,O())}e?t():new Promise(e=>{if(g){const t=setInterval(()=>{g||(clearInterval(t),e())},100)}else e()}).then(t)}function C(e){p.style.width=100*e+"%"}function M(e){u.style.backgroundColor=e.bg,u.querySelector(".title")&&(u.querySelector(".title").style.backgroundColor=e.bg),u.style.borderColor=e.border}t.set=function(e,{timeout:t,color:n,step:o,numSteps:i,title:r,emoji:s,belowNotificationPopover:a,overflow:l,progressBarDuration:f,styleAsMessageBox:h,onMessageUnload:g,hideCloseButton:v}={}){const P=arguments;if(y&&d.default(b,P))return{};O(),b=P,j(),_(),k();let T=e;"scroll"===l&&(T=`<div class="scrollable_area">${T}</div>`);let E="";return r&&(E=`<div class="title">${r}</div>`),s&&(E+=`<div class="emoji">${s}</div>`),h&&(T=`<span class="message-box-content">${T}</span>`),T=E+T,c.innerHTML=T,a?u.classList.add("below_notifications"):u.classList.remove("below_notifications"),v?u.classList.add("hideCloseButton"):u.classList.remove("hideCloseButton"),clearTimeout(m),t&&(m=setTimeout(()=>{S()},t)),n&&M(n),isNaN((null!=o?o:0)/(null!=i?i:0))?C(0):C(o/i),clearTimeout(w),f&&(p.style.width="0%",p.style.transition=`width ${f/1e3}s linear`,w=setTimeout(()=>{p.style.width="100%",w=setTimeout(()=>{p.style.transition=""},100)},100)),isNaN((null!=o?o:0)/(null!=i?i:0))&&!f&&(p.style.transition="",p.style.width=""),y=!0,x=g,{messageBodyEl:c}},t.show=k,t.hide=S},function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(1)),s=i(n(13)),a=i(n(0));t.isTopMostFrame=()=>window.parent===window,t.findConversation=()=>document.querySelector("[data-conversation-id]")||document.querySelector('[data-spotim-app="conversation"]')||document.querySelector('[data-spotim-module="conversation"]'),t.getLauncherEl=e=>{const n=document.querySelector('script[data-spotim-module="spotim-launcher"]');return!n&&e&&(t.isTopMostFrame()?r.set("Could not find launcher script",{timeout:2e3,color:a.default().error,emoji:"😕"}):(window.parent.focus(),r.set(`${s.default.focusWarning}<br/>Could not find launcher script`,{timeout:3e3,color:a.default().error,emoji:"😕️"}))),n},t.isProduction=e=>unsafeWindow.__SPOTIMENV__?"production"===unsafeWindow.__SPOTIMENV__:e.src.indexOf("//launcher.spot.im")>-1,t.getSpotId=e=>{const t=e.src.split("/").pop().split("?")[0];return"launcher-bundle.js"===t?e.getAttribute("data-spot-id"):t},t.getPostId=e=>e.getAttribute("data-post-id"),t.getSpotimVersion=()=>unsafeWindow.__SPOTIM__&&"IFRAME"!==(t.findConversation()||{}).tagName?2:1,t.getConfigUrl=()=>{const e=t.getLauncherEl(!0);return`https://api-2-0.spot.im/v1.0.0/config/launcher/${t.getSpotId(e)}/${t.getPostId(e)}/vendor,init,conversation`},t.sleep=e=>new Promise(t=>setTimeout(t,e)),t.padTime=e=>1===e.length?`0${e}`:e,t.renderTable=e=>"<div class='table'><tbody>"+e.map(e=>"<div class='tr'><div class='td'>"+e.join("</div><div class='td'>")+"</div></div>").join("")+"</tbody></div>",t.createElement=(e,t,n="div")=>`<${n} class="${t}">${e}</${n}>`,t.getRandomOptimisticEmoji=()=>{const e=["🎈","🚀","🌈","🦄","🍪"];return e[Math.floor(Math.random()*e.length)]},t.onFoundSpotimObject=e=>{function t(){unsafeWindow.__SPOTIM__&&(clearInterval(n),e())}const n=setInterval(t,500);t()},t.isWindows="Win32"===window.navigator.platform,t.gmFetch=function(e,t){return new Promise(n=>{GM_xmlhttpRequest({method:"GET",url:e,onload:function(e){n("json"===t?JSON.parse(e.responseText):e.responseText)}})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=()=>GM_getValue("prefs",{}),t.set=e=>GM_setValue("prefs",Object.assign(Object.assign({},t.get()),e))},function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(1)),s=o(n(2)),a=i(n(13)),l=i(n(0));let d,u,c,p,f;function h(){if(d)return;let e=new IntersectionObserver(e=>{f=e[0].isIntersecting},{rootMargin:"0px",threshold:0});r.set("Looking for conversation element",{title:"Scroll To Conversation",styleAsMessageBox:!0}),d=!0,u=setInterval(()=>{let t;t=s.findConversation(),t?(e.observe(t),f||(t.scrollIntoView(),window.scrollBy(0,-200)),r.set('Hit <span class="mono">esc</span> to stop',{title:"Scroll To Conversation",color:l.default().success,styleAsMessageBox:!0,emoji:"😃"}),function(e){Object.assign(e.style,{boxShadow:"rgb(76, 175, 80) 0px 0px 0px 4px,\n        rgb(26, 216, 34) 0px 0px 0px 5px,\n        #00000036 0px 0px 40px 12px,\n        #00000085 0px 0px 4px 5px,\n        black 0px 0px 40px -4px",borderRadius:"8px"}),e.dataset.sptmninjaHighlighted=!0,p=!0}(t)):(c||(window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}),c=!0),s.isTopMostFrame()?r.set("Element not found. Try scrolling up and down a bit.",{color:l.default().error,emoji:"😕",title:"Scroll To Conversation",styleAsMessageBox:!0}):(window.parent.focus(),r.set(`${a.default.focusWarning}<br/>Scroll To Conversation... not found. Try scrolling up and down a bit.`,{color:l.default().error,timeout:3e3,emoji:"😕"}),m({hideMessage:!1})))},100)}function m({hideMessage:e}={hideMessage:!0}){p&&([...document.querySelectorAll("[data-sptmninja-highlighted]")].forEach(e=>{e.style.boxShadow=null,e.style.borderRadius=null,delete e.dataset.sptmninjaHighlighted}),p=!1),d&&(e&&r.hide(),clearInterval(u),d=!1,c=!1)}t.start=h,t.stop=m,t.toggle=function(){d?m():h()}},function(e,t,n){"use strict";let o;Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(){return o},t.set=function(e){o=e}},function(e,t,n){var o,i,r;i=[t],void 0===(r="function"==typeof(o=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=(e.isDate=function(e){return e instanceof Date},e.isEmpty=function(e){return 0===Object.keys(e).length},e.isObject=function(e){return null!=e&&"object"===(void 0===e?"undefined":n(e))});e.properObject=function(e){return o(e)&&!e.hasOwnProperty?t({},e):e}})?o.apply(t,i):o)||(e.exports=r)},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=[{id:"scrollToConversation",keyCombo:"sss",description:"Scroll to Conversation"},{id:"showInfo",keyCombo:"ssi",description:"Show Info"},{id:"copySpotId",keyCombo:"ssc",description:"Copy Spot ID to Clipboard"},{id:"openHostPanel",keyCombo:"ssa",description:"Open Host Panel",detailedDescription:"Will require you to enter the username and password you use to log in to the host panel on first run and won't work if you use Google to sign in"},{id:"showAssetVersions",keyCombo:"ssv",description:"Show Asset Versions"},{id:"openConfigData",keyCombo:"sso",description:"Open Config Data"},{id:"notifyOnChanges",keyCombo:"ssn",description:"Notify On Config Updates",detailedDescription:"Will notify you once an asset updates or a configuration changes for the current spot"},{id:"toggleEventsViewer",keyCombo:"sse",description:"Toggle Events Viewer"},{id:"showHelp",keyCombo:"ssh",description:"Show Help"},{id:"whatsNew",description:"What's New?"},{id:"toggleDarkTheme",description:"Toggle Dark Theme"},{id:"toggleShowAssetsVersions",description:"Toggle Show Asset Versions on Load",detailedDescription:"If enabled, will display the asset versions once the page loads"},{id:"setHostPanelCreds",description:"Set Host Panel Credentials"},{id:"copyPostId",description:"Copy Post ID to Clipboard"},{id:"modifyABTest",description:"Modify A/B Test"},{id:"searchSpots",description:"Search Spots 🧪"},{id:"toggleShowEventsInConsole",description:"Toggle Show Events in Console on Domain"},{id:"toggleShowEventsInConsoleAllDomains",description:"Toggle Show Events in Console on All Domains"},{id:"runSherlock",description:"Run Sherlock"},...o(n(11)).default.map(e=>({id:`__ab${e.id}`,description:"A/B Test: "+e.description}))];t.default=i},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(3)),a=i(n(1)),l=r(n(15)),d=r(n(32)),u=r(n(0)),c=[{version:"4.2.8",showOnFirstLoad:!0,list:[{title:'Displaying Current Spot\'s Rail in "Show Info"',description:'Open the palette, run "Show Info", the spot\'s rail will now be displayed'}]},{version:"4.2.3",showOnFirstLoad:!1,list:[{title:"Added Toggle Show Events in Console on All Domains"}]},{version:"4.2.2",showOnFirstLoad:!1,list:[{title:"Added Toggle Show Events in Console"}]},{version:"4.2.1",showOnFirstLoad:!1,list:[{title:"Improved UI",description:"UI is now more consistent with other, popular command palettes"},{title:"Added Modify A/B Test Command",description:"Modify any A/B test by specifying its id and a variant (A/B/C...)"},{title:"Showing time spent BI events"}]},{version:"4.2.0",showOnFirstLoad:!0,list:[{title:"Performance Improvements",description:"Previously Ninja Tools would run as soon the page was idle, it will now run as soon as the page starts loading"},{title:"Added Spot Commands",description:"Access other spots from whichever website you are currently on. Hit Ctrl+Shift+S, start typing a spot's name, hit Enter and you will have access to the following commands",list:[{title:"Open spot's website"},{title:"Open post page 🧪"},{title:"Copy spot id"},{title:"Open spot's host panel"}]}]},{version:"4.1.0",showOnFirstLoad:!0,list:[{title:"Added Events Viewer",description:"Shows BI events on the page, exposing only the diffs between similarly typed events"}]},{version:"4.0.5",showOnFirstLoad:!0,list:[{title:"Added Dark Mode (Toggle Dark Mode in the Command Palette)"}]},{version:"4.0.2",showOnFirstLoad:!0,list:[{title:"Added Set Credentials Command and Credentials Form"}]},{version:"3.7",showOnFirstLoad:!0,list:[{title:"Added Recently Used commands",description:"The command you last used will show up first, next time you open the command palette"}]},{version:"3.4",list:[{title:"The following commands were added:",list:[{title:"Toggle Show Asset Versions on Load",description:"If enabled, will show the asset versions popup once the page loads"},{title:"A/B Test: Toggle Redesign"},{title:"A/B Test: Cycle Through Reaction Variants"},{title:"A/B Test: Toggle Show Scores Before/After Click"}]}]}];function p(e,t){const n=t?"latest":"";return(`\n    <div class="whatsNewTitle ${n}">${t?`⭐️ What's New in v${e.version}:`:"✨ v"+e.version+":"}</div>\n      <ul class="${n}">\n        ${function e(t){return t.map(t=>`\n        <li>\n          ${t.title}\n          ${t.description?`<div class="whatsNewDescription">${t.description}</div>`:""}\n        </li>\n        ${t.list?"<ul>"+e(t.list)+"</ul>":""}\n      `).join("")}(e.list)}\n      </ul>\n    `)}function f(e){return o(this,void 0,void 0,(function*(){const t=GM_info.script.version,{dontShowWhatsNew:n}=s.get();yield s.set({lastWhatsNewVersion:t});const o=function(e){const[t,n]=l.default([e?"Don't Show Me What's New On Upgrade":"Show Me What's New Next Upgrade","Close"]);return{html:`\n    <style>\n      ${d.default}\n    </style>\n    <div class="whatsNewWrapper">\n      <div class="whatsNewContent">\n        ${p(c[0],!0)}\n        ${c.slice(1).map(e=>p(e)).join("")}\n      </div>\n      <div class="whatsNewFeatureRequest">\n        💡 Got a feature request? <a href="slack://channel?id=CSZGJD6R1&team=T0460KVUF">Hit us up on Slack!</a>\n      </div>\n      ${t()}\n    </div>\n  `,addListeners:n}}(!n);function i(){a.hide(!0)}a.set(o.html,{title:e?"SpotIM Ninja Tools Upgraded! 🥳":"SpotIM Ninja Tools Changelog"}),o.addListeners(e=>{if(0===e){!function(){const{dontShowWhatsNew:e}=s.get();s.set({dontShowWhatsNew:!e})}(),i();const{dontShowWhatsNew:e}=s.get();e?a.set("You can change this later on through the What's New screen",{title:"I will not show you updates anymore",color:u.default().default,emoji:"👌",timeout:6e3,styleAsMessageBox:!0}):a.set("I will show you what has changed next time!",{color:u.default().default,emoji:"👍🏻",timeout:4e3})}else i()})}))}t.show=f,t.showIfUpgraded=function(){var e;return o(this,void 0,void 0,(function*(){if(s.get().isNotFirstRun){const{lastWhatsNewVersion:t,dontShowWhatsNew:n}=s.get(),o=GM_info.script.version;if(n)return;t&&t===o||null===(e=c.find(e=>e.version===o))||void 0===e||!e.showOnFirstLoad||f(!0),yield s.set({lastWhatsNewVersion:o})}}))},t.setCurrentVersionAsLastShown=function(){return o(this,void 0,void 0,(function*(){const e=GM_info.script.version;yield s.set({lastWhatsNewVersion:e})}))}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(4)),a=i(n(1)),l=i(n(2)),d=i(n(3)),u=r(n(0)),c=i(n(5)),p=r(n(34)),f=r(n(35));let h=0;t.show=function({commands:e,getCommandImpl:t,commandPaletteId:n,placeholder:i="Start Typing a Command..."}){return o(this,void 0,void 0,(function*(){let o,r;h=0,o=(()=>{const{recentlyUsedCommands:t}=d.get();if(t)return e.find(e=>e.id===t[n])})(),s.stop({hideMessage:!1});const{messageBodyEl:m}=a.set(`<style>\n      ${f.default}\n    </style>\n    <div class="inputWrapper">\n      <div class="indicators">\n        \n        ${l.getLauncherEl(!1)?"":'<span class="titleIcon" title="Can\'t find Launcher script tag">⚠️</span>'}\n      </div>\n      <input class="input" placeholder="${i}">\n    </div>\n    <div class="results"></div>`,{color:u.default().default,hideCloseButton:!0});m.querySelector(".results").addEventListener("click",(function(e){const o=e.target.closest(".pallete_row_main_col");if(o&&o.children.length){const e=o.querySelector("[data-command-id]").dataset.commandId,i=t({id:e}),{recentlyUsedCommands:r}=d.get();d.set({recentlyUsedCommands:Object.assign(Object.assign({},r),{[n]:e})}),i&&setTimeout(()=>{i()},0)}}));const g=c.get().querySelector(".input");function v(){const t=g.value,n=p.default.filter(t,e,{pre:'<span class="fuzzyHighlight">',post:"</span>",extract:e=>e.description});if(r=n.map(t=>Object.assign(Object.assign({},e[t.index]),{description:t.string})),!t&&o){const e=r.findIndex(e=>{var t;return e.id===(null===(t=o)||void 0===t?void 0:t.id)});r.splice(e,1),r.unshift(o)}}function y(e){g.value.trim()?m.querySelector(".results").classList.add("inputNotEmpty"):m.querySelector(".results").classList.remove("inputNotEmpty"),m.querySelector(".results").innerHTML=r.length?r.map((e,t)=>`<span\n            class="pallete_row_main_col ${h===t?"weight_bold":"muted_result"}"\n            ${h===t?"data-selected":""}\n            >\n            <div class="palette_row_description">${e.description}</div>\n            ${o===e?"<div class='palette_row_recently_used'>recently used</div>":""}\n            <span class="mono ${e.keyCombo?"":"hidden"}" data-command-id="${e.id}">${e.keyCombo?e.keyCombo:"×"}</span>\n            ${h===t?l.createElement("⏎","muted_text"):""}\n          </span>`).join(""):"";const t=c.get().querySelector("[data-selected]");if(t){const n=t;(function(e){const t=e.getBoundingClientRect(),n=c.get().querySelector(".results").getBoundingClientRect();return t.y>n.y&&t.bottom<n.bottom})(n)||n.scrollIntoView(e)}}v(),y(),g.focus(),g.addEventListener("keydown",e=>{if(38===e.keyCode)h--,h<0&&(h=r.length-1),e.preventDefault(),y(!0);else if(40===e.keyCode)h++,h>=r.length&&(h=0),e.preventDefault(),y(!1);else if(13===e.keyCode){if(function(){var e;const i=r[h];o=i;const{recentlyUsedCommands:s}=d.get();return d.set({recentlyUsedCommands:Object.assign(Object.assign({},s),{[n]:null===(e=o)||void 0===e?void 0:e.id})}),!!i&&(a.hide(!0),t({id:i.id})(),!0)}())return}else-1===["Meta","Alt","Shift","Control"].indexOf(e.key)&&y()}),g.addEventListener("keyup",e=>{v(),h>=r.length&&(h=Math.max(r.length-1,0)),38!==e.keyCode&&40!==e.keyCode&&-1===["Meta","Alt","Shift","Control"].indexOf(e.key)&&y()})}))}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(7)),a=r(n(4)),l=r(n(1)),d=r(n(2)),u=r(n(3)),c=r(n(14)),p=r(n(27)),f=r(n(8)),h=r(n(33)),m=r(n(9)),g=r(n(19)),v=i(n(20)),y=i(n(0)),b=i(n(42)),w=i(n(11)),x=i(n(43)),_=r(n(44)),j=r(n(21));let k={scrollToConversation:()=>{a.toggle()},copySpotId:()=>{a.stop();const e=d.getLauncherEl(!0);if(e){const t=d.getSpotId(e);GM_setClipboard(t),l.set(`Copied ${t} to clipboard!`,{timeout:2e3,color:y.default().default,emoji:"😃"})}},showInfo:()=>o(void 0,void 0,void 0,(function*(){var e;function t(e){return unsafeWindow.__spotImNinjaToolsCopy=e=>{const t=e.currentTarget;GM_setClipboard(t.parentElement.children[0].innerText),t.classList.add("showCheckmark"),setTimeout(()=>{t.classList.remove("showCheckmark")},1e3)},`\n        <div class="infoLine">\n          <div>${e}</div>\n          <button onClick="__spotImNinjaToolsCopy(event)" class="copyButton">\n            <div class="checkmark">✔</div>\n            <div>Copy</div>\n          </button>\n        </div>\n      `}a.stop();const n=d.getLauncherEl(!0);if(n){const o=d.getSpotId(n),i=d.getPostId(n),r=d.isProduction(n)?"Production":"Dev",s=l.set(`<style>${x.default}</style>`+d.renderTable([["Spot Id",t(o)],["Post Id",t(i)],["Environment",t(r)],["Rail",t("<div data-rail-placeholder><div>loading...</div></div>")]]),{color:y.default().default,title:"Spot Info"}),[a]=yield Promise.all([fetch(d.getConfigUrl()).then(e=>e.json()),d.sleep(1200)]),u=null===(e=s.messageBodyEl)||void 0===e?void 0:e.querySelector("[data-rail-placeholder]");u&&(u.innerText=a.asset_group_id)}})),showAssetVersions:()=>o(void 0,void 0,void 0,(function*(){if(a.stop(),unsafeWindow.__SPOTIM__){const e=unsafeWindow.__SPOTIM__.SERVICES.configProvider._data.assets_config;if(e.filter(e=>e.url.indexOf("tags")>-1).length){const t=d.renderTable(e.filter(e=>e.url.indexOf("tags")>-1).sort((e,t)=>e.name<t.name?-1:1).map(e=>[`<span class="mono"><a target="_blank" href="${e.url}">${e.url.match(/tags\/(.*?)\//)[1]}</a></span>`,e.name]))+`<div class="muted_text margin_top">Page loaded at ${b.default}</div>`;l.set(t,{color:y.default().default,emoji:d.getRandomOptimisticEmoji(),title:"Assets"})}else l.set("No assets found. Are you running locally?",{timeout:2e3,color:y.default().error,emoji:"😕"})}else l.set("Could not find __SPOTIM__ object",{timeout:2e3,color:y.default().error,emoji:"😕"})})),openHostPanel:()=>{a.stop();const e=d.getLauncherEl(!0);e&&(d.isProduction(e)?c.open({spotId:d.getSpotId(e)}):window.open("https://admin.staging-spot.im/internal/super-admin"))},ssda:()=>{a.stop();const e=d.getLauncherEl(!0);e&&(d.isProduction(e)?window.open("https://admin.spot.im/internal/super-admin"):window.open("https://admin.staging-spot.im/internal/super-admin"))},openConfigData:()=>{a.stop();const e=d.getLauncherEl(!0);d.isProduction(e)&&window.open(d.getConfigUrl())},notifyOnChanges:()=>o(void 0,void 0,void 0,(function*(){a.stop(),p.toggleNotifyOnChange()})),toggleEventsViewer:()=>{const{isShowing:e,shouldRefresh:t}=g.toggle();e?t?l.set("Please refresh the page to see the events",{timeout:5e3,emoji:"⚠️",color:y.default().default}):l.set("I will show you events!",{timeout:3e3,emoji:"👍🏻",color:y.default().default}):l.set("Stopped showing events!",{timeout:3e3,emoji:"❌",color:y.default().default})},toggleShowEventsInConsole:()=>{const e=!g.shouldShowEventsInConsole();g.setShouldShowEventsInConsole(e),l.set("Please refresh the page",{title:e?"Showing events!":"Stopped showing events!",styleAsMessageBox:!0,timeout:6e3,emoji:"👍🏻",color:y.default().default})},toggleShowEventsInConsoleAllDomains:()=>{const e=!u.get().dontShowEventsInConsoleInAllDomains;u.set({dontShowEventsInConsoleInAllDomains:e}),l.set(e?"Stopped showing events in all domains!":"Showing events in all domains!",{timeout:6e3,emoji:"👍🏻",color:y.default().default})},toggleShowAssetsVersions:()=>o(void 0,void 0,void 0,(function*(){const e=u.get().showVersionsOnLoad;yield u.set({showVersionsOnLoad:!e}),e?l.set("Stopped showing you asset versions on page load",{timeout:4e3,emoji:"❌",color:y.default().default}):l.set("I will now show you asset versions on page load!",{timeout:4e3,emoji:"🤠",color:y.default().success})})),whatsNew:()=>{f.show()},setHostPanelCreds:()=>{c.openCredentialsForm()},copyPostId:()=>{a.stop();const e=d.getLauncherEl(!0);if(e){const t=d.getPostId(e);GM_setClipboard(t),l.set(`Copied ${t} to clipboard!`,{timeout:2e3,color:y.default().default,emoji:"😃"})}},toggleDarkTheme:()=>o(void 0,void 0,void 0,(function*(){const{useDarkTheme:e=!1}=u.get();yield u.set({useDarkTheme:!e}),setTimeout(()=>{m.show({commands:s.default,getCommandImpl:O,commandPaletteId:"main"})},0)})),modifyABTest:()=>o(void 0,void 0,void 0,(function*(){var e,t,n;const o=yield _.show({prompt:"Enter A/B Test Number"});if(""===o)return;const i=null!=(e=JSON.parse(unsafeWindow.localStorage.getItem("SPOT_AB")))?e:{},r=null===(n=null===(t=i)||void 0===t?void 0:t[o])||void 0===n?void 0:n.variant,s=(yield _.show({prompt:"Enter a Variant",initialValue:null!=r?r:""})).toUpperCase(),a=""===s;a?delete i[o]:i[o]=Object.assign(Object.assign({version:"v2"},i[o]),{short_name:o,variant:s}),unsafeWindow.localStorage.setItem("SPOT_AB",JSON.stringify(i)),l.set(a?`Removed test "${o}"!`:`Successfully set test "${o}" to "${s}"!`,{color:y.default().success,emoji:"👍🏾"})})),searchSpots:()=>{j.showPalette()},runSherlock:()=>o(void 0,void 0,void 0,(function*(){const e=u.get().sherlockToken,t="https://raw.githubusercontent.com/SpotIM/sherlock/master/test-unit/bundle.js";if(e){const n=yield d.gmFetch(`${t}?token=${e}`,"text");if("404: Not Found"!==n.trim())return void unsafeWindow.eval(n)}const n=yield _.show({prompt:"Enter Token",initialValue:u.get().sherlockToken});u.set({sherlockToken:n});const o=yield d.gmFetch(`${t}?token=${n}`,"text");"404: Not Found"!==o.trim()?unsafeWindow.eval(o):l.set("Are you sure your token is correct?",{title:"Error Loading Sherlock",emoji:"😢",styleAsMessageBox:!0,timeout:7e3,color:y.default().error})})),showHelp:()=>{a.stop(),h.show()},showWelcomeMessage:()=>{v.default(!0)}};function O({id:e}){return k[e]}k=w.default.reduce((e,t)=>Object.assign(Object.assign({},e),{[`__ab${t.id}`]:()=>o(void 0,void 0,void 0,(function*(){try{const e=JSON.parse(unsafeWindow.localStorage.getItem("SPOT_AB")),n=e[t.id].variant,o=String.fromCharCode(n.charCodeAt(0)+1),i=t.variants.find(e=>e.id===o)||t.variants[0];let r;e[t.id].variant=i.id,r=i.statusText,l.set(r,{emoji:"👍🏻",color:y.default().success}),unsafeWindow.localStorage.setItem("SPOT_AB",JSON.stringify(e))}catch(e){l.set("Are you sure this spot has this test?",{title:`Couldn't ${t.description}`,emoji:"😞",color:y.default().error})}}))}),k),t.default=k,t.getCommandImpl=O,t.getCommandImplByKeyCombo=function(e){var t,n;return k[(n=null===(t=s.default.find(t=>t.keyCombo===e))||void 0===t?void 0:t.id,null!=n?n:"")]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=[{name:"Redesign",description:"Toggle Redesign",id:35,variants:[{id:"A",statusText:"Redesign Disabled"},{id:"B",statusText:"Redesign Enabled"}]},{name:"Reactions",description:"Cycle Through Reaction Variants",id:34,variants:[{id:"A",statusText:"Reactions Disabled"},{id:"B",statusText:"Reactions Enabled"},{id:"C",statusText:"Reactions Enabled (With Ads)"}]},{name:"Show Scores",description:"Toggle Show Scores Before/After Click",id:37,variants:[{id:"A",statusText:"Showing Scores After Click"},{id:"B",statusText:"Showing Scores Before Click"}]},{name:"Show Feed",description:"Toggle Show Feed",id:39,variants:[{id:"A",statusText:"Showing Feed"},{id:"B",statusText:"Not Showing Feed"}]},{name:"Change Feed Placement",description:"Toggle Feed Above/Below Conversation",id:40,variants:[{id:"A",statusText:"Feed Above Conversation"},{id:"B",statusText:"Feed Below Conversation"}]}]},function(e,t,n){(function(e,n){var o="[object Arguments]",i="[object Map]",r="[object Object]",s="[object Set]",a=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,d={};d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0,d[o]=d["[object Array]"]=d["[object ArrayBuffer]"]=d["[object Boolean]"]=d["[object DataView]"]=d["[object Date]"]=d["[object Error]"]=d["[object Function]"]=d[i]=d["[object Number]"]=d[r]=d["[object RegExp]"]=d[s]=d["[object String]"]=d["[object WeakMap]"]=!1;var u="object"==typeof e&&e&&e.Object===Object&&e,c="object"==typeof self&&self&&self.Object===Object&&self,p=u||c||Function("return this")(),f=t&&!t.nodeType&&t,h=f&&"object"==typeof n&&n&&!n.nodeType&&n,m=h&&h.exports===f,g=m&&u.process,v=function(){try{return g&&g.binding&&g.binding("util")}catch(e){}}(),y=v&&v.isTypedArray;function b(e,t){for(var n=-1,o=null==e?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1}function w(e){var t=-1,n=Array(e.size);return e.forEach((function(e,o){n[++t]=[o,e]})),n}function x(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var _,j,k,O=Array.prototype,S=Function.prototype,C=Object.prototype,M=p["__core-js_shared__"],P=S.toString,T=C.hasOwnProperty,E=(_=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+_:"",I=C.toString,A=RegExp("^"+P.call(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$=m?p.Buffer:void 0,L=p.Symbol,N=p.Uint8Array,D=C.propertyIsEnumerable,W=O.splice,B=L?L.toStringTag:void 0,z=Object.getOwnPropertySymbols,F=$?$.isBuffer:void 0,R=(j=Object.keys,k=Object,function(e){return j(k(e))}),V=ve(p,"DataView"),q=ve(p,"Map"),H=ve(p,"Promise"),U=ve(p,"Set"),G=ve(p,"WeakMap"),K=ve(Object,"create"),J=xe(V),Y=xe(q),Q=xe(H),X=xe(U),Z=xe(G),ee=L?L.prototype:void 0,te=ee?ee.valueOf:void 0;function ne(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function oe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function ie(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function re(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ie;++t<n;)this.add(e[t])}function se(e){var t=this.__data__=new oe(e);this.size=t.size}function ae(e,t){var n=ke(e),o=!n&&je(e),i=!n&&!o&&Oe(e),r=!n&&!o&&!i&&Te(e),s=n||o||i||r,a=s?function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}(e.length,String):[],l=a.length;for(var d in e)!t&&!T.call(e,d)||s&&("length"==d||i&&("offset"==d||"parent"==d)||r&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||we(d,l))||a.push(d);return a}function le(e,t){for(var n=e.length;n--;)if(_e(e[n][0],t))return n;return-1}function de(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":B&&B in Object(e)?function(e){var t=T.call(e,B),n=e[B];try{e[B]=void 0;var o=!0}catch(e){}var i=I.call(e);o&&(t?e[B]=n:delete e[B]);return i}(e):function(e){return I.call(e)}(e)}function ue(e){return Pe(e)&&de(e)==o}function ce(e,t,n,a,l){return e===t||(null==e||null==t||!Pe(e)&&!Pe(t)?e!=e&&t!=t:function(e,t,n,a,l,d){var u=ke(e),c=ke(t),p=u?"[object Array]":be(e),f=c?"[object Array]":be(t),h=(p=p==o?r:p)==r,m=(f=f==o?r:f)==r,g=p==f;if(g&&Oe(e)){if(!Oe(t))return!1;u=!0,h=!1}if(g&&!h)return d||(d=new se),u||Te(e)?he(e,t,n,a,l,d):function(e,t,n,o,r,a,l){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new N(e),new N(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return _e(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case i:var d=w;case s:var u=1&o;if(d||(d=x),e.size!=t.size&&!u)return!1;var c=l.get(e);if(c)return c==t;o|=2,l.set(e,t);var p=he(d(e),d(t),o,r,a,l);return l.delete(e),p;case"[object Symbol]":if(te)return te.call(e)==te.call(t)}return!1}(e,t,p,n,a,l,d);if(!(1&n)){var v=h&&T.call(e,"__wrapped__"),y=m&&T.call(t,"__wrapped__");if(v||y){var b=v?e.value():e,_=y?t.value():t;return d||(d=new se),l(b,_,n,a,d)}}if(!g)return!1;return d||(d=new se),function(e,t,n,o,i,r){var s=1&n,a=me(e),l=a.length,d=me(t).length;if(l!=d&&!s)return!1;var u=l;for(;u--;){var c=a[u];if(!(s?c in t:T.call(t,c)))return!1}var p=r.get(e);if(p&&r.get(t))return p==t;var f=!0;r.set(e,t),r.set(t,e);var h=s;for(;++u<l;){c=a[u];var m=e[c],g=t[c];if(o)var v=s?o(g,m,c,t,e,r):o(m,g,c,e,t,r);if(!(void 0===v?m===g||i(m,g,n,o,r):v)){f=!1;break}h||(h="constructor"==c)}if(f&&!h){var y=e.constructor,b=t.constructor;y!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(f=!1)}return r.delete(e),r.delete(t),f}(e,t,n,a,l,d)}(e,t,n,a,ce,l))}function pe(e){return!(!Me(e)||function(e){return!!E&&E in e}(e))&&(Se(e)?A:a).test(xe(e))}function fe(e){if(n=(t=e)&&t.constructor,o="function"==typeof n&&n.prototype||C,t!==o)return R(e);var t,n,o,i=[];for(var r in Object(e))T.call(e,r)&&"constructor"!=r&&i.push(r);return i}function he(e,t,n,o,i,r){var s=1&n,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var d=r.get(e);if(d&&r.get(t))return d==t;var u=-1,c=!0,p=2&n?new re:void 0;for(r.set(e,t),r.set(t,e);++u<a;){var f=e[u],h=t[u];if(o)var m=s?o(h,f,u,t,e,r):o(f,h,u,e,t,r);if(void 0!==m){if(m)continue;c=!1;break}if(p){if(!b(t,(function(e,t){if(s=t,!p.has(s)&&(f===e||i(f,e,n,o,r)))return p.push(t);var s}))){c=!1;break}}else if(f!==h&&!i(f,h,n,o,r)){c=!1;break}}return r.delete(e),r.delete(t),c}function me(e){return function(e,t,n){var o=t(e);return ke(e)?o:function(e,t){for(var n=-1,o=t.length,i=e.length;++n<o;)e[i+n]=t[n];return e}(o,n(e))}(e,Ee,ye)}function ge(e,t){var n,o,i=e.__data__;return("string"==(o=typeof(n=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function ve(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return pe(n)?n:void 0}ne.prototype.clear=function(){this.__data__=K?K(null):{},this.size=0},ne.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ne.prototype.get=function(e){var t=this.__data__;if(K){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return T.call(t,e)?t[e]:void 0},ne.prototype.has=function(e){var t=this.__data__;return K?void 0!==t[e]:T.call(t,e)},ne.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=K&&void 0===t?"__lodash_hash_undefined__":t,this},oe.prototype.clear=function(){this.__data__=[],this.size=0},oe.prototype.delete=function(e){var t=this.__data__,n=le(t,e);return!(n<0)&&(n==t.length-1?t.pop():W.call(t,n,1),--this.size,!0)},oe.prototype.get=function(e){var t=this.__data__,n=le(t,e);return n<0?void 0:t[n][1]},oe.prototype.has=function(e){return le(this.__data__,e)>-1},oe.prototype.set=function(e,t){var n=this.__data__,o=le(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this},ie.prototype.clear=function(){this.size=0,this.__data__={hash:new ne,map:new(q||oe),string:new ne}},ie.prototype.delete=function(e){var t=ge(this,e).delete(e);return this.size-=t?1:0,t},ie.prototype.get=function(e){return ge(this,e).get(e)},ie.prototype.has=function(e){return ge(this,e).has(e)},ie.prototype.set=function(e,t){var n=ge(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this},re.prototype.add=re.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},re.prototype.has=function(e){return this.__data__.has(e)},se.prototype.clear=function(){this.__data__=new oe,this.size=0},se.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},se.prototype.get=function(e){return this.__data__.get(e)},se.prototype.has=function(e){return this.__data__.has(e)},se.prototype.set=function(e,t){var n=this.__data__;if(n instanceof oe){var o=n.__data__;if(!q||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new ie(o)}return n.set(e,t),this.size=n.size,this};var ye=z?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,o=null==e?0:e.length,i=0,r=[];++n<o;){var s=e[n];t(s,n,e)&&(r[i++]=s)}return r}(z(e),(function(t){return D.call(e,t)})))}:function(){return[]},be=de;function we(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||l.test(e))&&e>-1&&e%1==0&&e<t}function xe(e){if(null!=e){try{return P.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function _e(e,t){return e===t||e!=e&&t!=t}(V&&"[object DataView]"!=be(new V(new ArrayBuffer(1)))||q&&be(new q)!=i||H&&"[object Promise]"!=be(H.resolve())||U&&be(new U)!=s||G&&"[object WeakMap]"!=be(new G))&&(be=function(e){var t=de(e),n=t==r?e.constructor:void 0,o=n?xe(n):"";if(o)switch(o){case J:return"[object DataView]";case Y:return i;case Q:return"[object Promise]";case X:return s;case Z:return"[object WeakMap]"}return t});var je=ue(function(){return arguments}())?ue:function(e){return Pe(e)&&T.call(e,"callee")&&!D.call(e,"callee")},ke=Array.isArray;var Oe=F||function(){return!1};function Se(e){if(!Me(e))return!1;var t=de(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ce(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Me(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Pe(e){return null!=e&&"object"==typeof e}var Te=y?function(e){return function(t){return e(t)}}(y):function(e){return Pe(e)&&Ce(e.length)&&!!d[de(e)]};function Ee(e){return null!=(t=e)&&Ce(t.length)&&!Se(t)?ae(e):fe(e);var t}n.exports=function(e,t){return ce(e,t)}}).call(this,n(25),n(26)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={focusWarning:"⚠️⚠️️⚠️ TRY AGAIN. (Moving focus to parent frame) ️⚠️⚠️️⚠️"}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(1)),a=i(n(2)),l=i(n(5)),d=r(n(0)),u=r(n(15));function c(e){const[n,i]=u.default(["Delete Credentials","Cancel","Submit"]),r="\n      margin: 1em 2em 1.5em;\n    ",c="\n      font-weight: normal;\n      margin: 1em 0px;\n      text-align: left;\n    ",p="\n      display: flex;\n      align-items: baseline;\n      margin: 1em 3em;\n    ",f="\n      margin-right: 1em;\n      width: 120px;\n      text-align: right;\n    ",h="\n      text-align: left;\n      font-size: 0.8em;\n      font-weight: normal;\n      opacity: 0.8;\n    ",m="\n      position: absolute;\n      visibility: hidden\n    ",g=e?"Your host panel credentials are required.":"Enter your host panel credentials:";function v(){return o(this,void 0,void 0,(function*(){const n=l.get().querySelector("#emailInput").value.trim(),o=l.get().querySelector("#passwordInput").value.trim();n&&o&&(yield GM_setValue("email",n),yield GM_setValue("password",o),s.set("Your credentials were set!",{timeout:2e3,color:d.default().success,emoji:"😃"}),e&&setTimeout(()=>{t.open({spotId:a.getSpotId(a.getLauncherEl())})},2e3))}))}s.set(`\n      <form style="${r}">\n        <div style="${c}">${g}</div>\n        <div style="${p}">\n          <label style="${f}">Email</label>\n          <input id="emailInput" class="input" >\n        </div>\n        <div style="${p}">\n          <label style="${f}">Password</label>\n          <input id="passwordInput" class="input" type="password">\n        </div>\n        <div style="${h}">\n          If you're using Google to sign to the Host Panel this won't work.\n          You'll have to create an account using your email address to use\n          this feature.\n        </div>\n        <input style="${m}" type="submit"/>\n      </form>\n    ${n()}\n  `,{title:e?"Open Host Panel":"Set Host Panel Credentials",color:d.default().default}),setTimeout(()=>{l.get().querySelector("#emailInput").focus()},10),l.get().querySelector("form").addEventListener("submit",e=>{e.preventDefault(),v()}),i((function(e){return o(this,void 0,void 0,(function*(){2===e?v():1===e?s.hide(!0):(yield GM_setValue("email",""),yield GM_setValue("password",""),s.set("Your credentials were deleted!",{timeout:3e3,color:d.default().default,emoji:"👍🏻"}))}))}))}t.openCredentialsForm=c,t.open=({spotId:e})=>o(void 0,void 0,void 0,(function*(){const t=yield GM_getValue("email"),n=yield GM_getValue("password");if(!t||!n)return void c(!0);s.set("Fetching network id...",{color:d.default().default,step:0,numSteps:5,title:"Open Admin Panel"});const o=yield fetch("https://www.spot.im/api/me/network-id-by-name/spotim").then(e=>e.json());s.set("Fetching network token...",{color:d.default().default,step:1,numSteps:5,title:"Open Admin Panel"});const i=yield fetch(`https://www.spot.im/api/me/network-token/${o.network_id}`,{method:"post"}).then(e=>e.json());s.set("Logging in...",{color:d.default().default,step:2,numSteps:5,title:"Open Admin Panel"});const r=yield fetch("https://www.spot.im/api/email-connect/login",{method:"post",headers:new Headers({"x-spotim-networkid":o.network_id,"x-spotim-token":i.token,"Content-Type":"application/json"}),body:JSON.stringify({email:t,password:n})}).then(e=>e.json());if("EmailLogin_TooManyLoginAttemptsError"===r.type)return void s.set("Too many login attempts",{color:d.default().error,timeout:3500,emoji:"😕"});if(!1===r.success)return void s.set("Couldn't log in to Host Panel",{color:d.default().error,timeout:3500,emoji:"😕"});s.set("Fetching login json...",{color:d.default().default,step:3,numSteps:5,title:"Open Admin Panel"});yield fetch("https://www.spot.im/api/me/login-registered",{method:"post",headers:new Headers({"x-spotim-networkid":o.network_id,"x-spotim-token":i.token})}).then(e=>e.json());s.set("Calling me-make-admin...",{color:d.default().default,step:4,numSteps:5,title:"Open Admin Panel"});const l=yield fetch(`https://www.spot.im/api/moderation/internal/make-me-admin?spot_id=${e}`,{headers:new Headers({"x-spotim-networkid":o.network_id,"x-spotim-token":i.token})}).then(e=>e.json());s.set("Fetching token JSON...",{color:d.default().default,step:5,numSteps:5,title:"Open Admin Panel"});const u=yield fetch(`https://www.spot.im/api/me/token-by-ticket/${l.token_ticket}`,{method:"post"}).then(e=>e.json()),p=[`https://admin.${!a.isProduction(a.getLauncherEl())?"staging-":""}spot.im/spot/${e}/moderation?`,`name=${l.spot_name}&`,`token=${u.token}&`,`network_name=${u.network_name}`].join("");s.set("Opening Host Panel",{color:d.default().success,timeout:2e3,emoji:"😃"}),GM_openInTab(p,!1)}))},function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=o(n(5));t.default=function(e){return[function(){return`\n        <div class="gutterActions">\n        ${e.map((e,t)=>`\n          <button class="gutterActionsButton" id="gutterButton${t}">\n            ${e}\n          </button>\n        `).join("")}\n      </div>\n    `},function(t){e.forEach((e,n)=>{var o;null===(o=i.get().querySelector(`#gutterButton${n}`))||void 0===o||o.addEventListener("click",t.bind(null,n))})}]}},function(e,t,n){var o,i,r;i=[e,t,n(6)],void 0===(r="function"==typeof(o=function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default=function e(t,r){if(t===r||!(0,n.isObject)(t)||!(0,n.isObject)(r))return{};var s=(0,n.properObject)(t),a=(0,n.properObject)(r);return Object.keys(a).reduce((function(t,r){if(s.hasOwnProperty(r)){var l=e(s[r],a[r]);return(0,n.isObject)(l)&&(0,n.isEmpty)(l)?t:i({},t,o({},r,l))}return i({},t,o({},r,a[r]))}),{})},e.exports=t.default})?o.apply(t,i):o)||(e.exports=r)},function(e,t,n){var o,i,r;i=[e,t,n(6)],void 0===(r="function"==typeof(o=function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default=function e(t,r){if(t===r||!(0,n.isObject)(t)||!(0,n.isObject)(r))return{};var s=(0,n.properObject)(t),a=(0,n.properObject)(r);return Object.keys(s).reduce((function(t,r){if(a.hasOwnProperty(r)){var l=e(s[r],a[r]);return(0,n.isObject)(l)&&(0,n.isEmpty)(l)?t:i({},t,o({},r,l))}return i({},t,o({},r,void 0))}),{})},e.exports=t.default})?o.apply(t,i):o)||(e.exports=r)},function(e,t,n){var o,i,r;i=[e,t,n(6)],void 0===(r="function"==typeof(o=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default=function e(t,i){if(t===i)return{};if(!(0,n.isObject)(t)||!(0,n.isObject)(i))return i;var r=(0,n.properObject)(t),s=(0,n.properObject)(i);return(0,n.isDate)(r)||(0,n.isDate)(s)?r.valueOf()==s.valueOf()?{}:s:Object.keys(s).reduce((function(t,i){if(r.hasOwnProperty(i)){var a=e(r[i],s[i]);return(0,n.isObject)(a)&&(0,n.isEmpty)(a)&&!(0,n.isDate)(a)?t:o({},t,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},i,a))}return t}),{})},e.exports=t.default})?o.apply(t,i):o)||(e.exports=r)},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(36)),s=n(37),a=o(n(38)),l=i(n(3)),d=n(2),u=o(n(40)),c=n(0),p=unsafeWindow.console.log;let f,h,m,g,v,y,b,w,x,_,j,k="",O=[],S=(l.get().eventsQueryHistory||[]).length;function C(){const e=x.value.trim(),t=l.get().eventsQueryHistory||[];e&&t[t.length-1]!==e&&(t.push(e),l.set({eventsQueryHistory:t}),S=l.get().eventsQueryHistory.length)}function M(){c.getUseDarkTheme()?g.classList.add("dark"):g.classList.remove("dark")}function P(e,t,n){t.useDarkTheme!==n.useDarkTheme&&M()}function T(){if(y)return void M();y=!0,g=document.createElement("div"),g.className="events-viewer",j=GM_addValueChangeListener("prefs",P),M(),g.innerHTML=`\n    <style>${r.default}</style>\n    <div class="resizer"></div>\n    <div class="query-input-wrapper">\n      <input type="text" class="query-input" placeholder='Type a query, e.g., "-type:loaded"'>\n      <a class="help" href="https://github.com/SpotIM/userscripts/blob/master/ninja-tools/event-queries.md" target="_blank">﹖</a>\n    </div>\n    <div class="events-list"></div>\n  `,x=g.querySelector(".query-input"),v=g.querySelector(".events-list");const e=(l.get().eventsViewerPosition||{})[unsafeWindow.location.host];e&&(g.style.left=100*e.x+"%",g.style.top=100*e.y+"%",v.style.height=`calc(100vh - ${100*e.y}%)`),x.addEventListener("keydown",I),x.addEventListener("keyup",A),x.addEventListener("change",$),g.querySelector(".resizer").addEventListener("mousedown",E),h=document.createElement("div"),document.body.parentElement.appendChild(h),m=h.attachShadow({mode:"open"});const t=document.createElement("div");t.className="events-viewer-wrapper",t.appendChild(g),m.appendChild(t),k=x.value=l.get().eventsQuery||"",unsafeWindow.addEventListener("keydown",K)}function E(e){const t=(new Date).getTime();if(t-_<200)return void("100%"===g.style.left?g.style.left=20/(window.innerWidth-360)*100+"%":g.style.left="100%");_=t;const n=e.currentTarget,o=e.clientY-n.getBoundingClientRect().top,i=e.clientX-n.getBoundingClientRect().left,r=unsafeWindow.document.body.style.userSelect;function s(e){const t=Math.max(e.clientY-o,20);g.style.top=t+"px",g.style.left=Math.min(Math.max(e.clientX-i,20),window.innerWidth-340-20)+"px",v.style.height=`calc(100vh - ${t}px)`}unsafeWindow.document.body.style.userSelect="none",document.addEventListener("mousemove",s),document.addEventListener("mouseup",(function e(t){document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",e);const n=g.getBoundingClientRect(),o=n.left/(unsafeWindow.innerWidth-360),i=n.top/unsafeWindow.innerHeight;l.set({eventsViewerPosition:Object.assign(Object.assign({},l.get().eventsViewerPosition),{[unsafeWindow.location.host]:{x:o,y:i}})}),g.style.left=100*o+"%",g.style.top=100*i+"%",v.style.height=`calc(100vh - ${100*i}%)`,unsafeWindow.document.body.style.userSelect=r}))}function I(e){const t=l.get().eventsQueryHistory||[];"ArrowUp"===e.key?(e.preventDefault(),S=Math.max(0,S-1),t[S]===x.value&&(S=Math.max(0,S-1)),x.value=t[S]||""):"ArrowDown"===e.key?(e.preventDefault(),S+=1,S>=t.length?(S=t.length,x.value=""):x.value=t[S]):"Enter"===e.key&&C()}function A(e){k=x.value,l.set({eventsQuery:x.value}),q()}function $(e){C()}function L(e){O.push(e)}function N(e){return"__sptmninja_bookmark"===e.type}function D(){b={};const e=(e,t)=>n=>{"time_delta"!==n&&"uid"!==n&&"duration"!==n&&e[n]!==t[n]&&-1===b[e.type].indexOf(n)&&b[e.type].push(n)};O.forEach(t=>{N(t)||(b[t.type]=b[t.type]||[],O.forEach(n=>{N(n)||t!==n&&t.type===n.type&&(Object.keys(t).forEach(e(t,n)),Object.keys(n).forEach(e(t,n)))}))})}function W(e){return e.startsWith("-")}function B(e){return-1!==e.indexOf(":")}function z(e){const t=e.substr(0,e.indexOf(":"));return W(e)?t.substr(1):t}function F(e){return e.endsWith("!")}function R(e){return e.substr(0,e.length-1)}function V(e){return e.substr(e.indexOf(":")+1)}function q(e=!0){T(),w?g.classList.add("paused"):g.classList.remove("paused"),g.classList.remove("click-through");const t=v.scrollHeight===v.scrollTop+v.offsetHeight;function n(e){return"__sptmninja_expanded"!==e&&"__sptmninja_index"!==e&&"type"!==e}O=O.map((e,t)=>Object.assign(Object.assign({},e),{__sptmninja_index:t}));const o=[],i=O.filter(e=>{const t=s.parse(k);if(""===k)return!0;if("__sptmninja_bookmark"===e.type)return!0;for(let n=0;n<t.length;n++){const i="object"==typeof t[n]?t[n].pattern:t[n];if(F(i)){const e=R(i);-1===o.indexOf(e)&&o.push(e)}else if(W(i)){if(B(i)){if(a.default.isMatch(e[z(i)],V(i)))return!1}else if(a.default.isMatch(e.type,i.substr(1)))return!1}else if(B(i)){if(!a.default.isMatch(e[z(i)],V(i)))return!1}else if(!a.default.isMatch(e.type,i))return!1}return!0});function r(e){return Number(e.closest(".event").dataset.index)}v.innerHTML='<div class="instructions">\n      <div>Ctrl+K to clear</div>\n      <div>Ctrl+P to pause</div>\n      <div>Ctrl+B to bookmark</div>\n      <div>Ctrl+C to copy all</div>\n    </div>'+i.map((e,t)=>"__sptmninja_bookmark"===e.type?`<div class="bookmark">${u.default}</div>`:`\n              <div class="event ${e.__sptmninja_expanded?"expanded":""}" data-index="${e.__sptmninja_index}">\n                <div class="container">\n                  <div class="toolbar">\n                    <button class="button expand-button"></button>\n                    <button class="button remove-button"></button>\n                  </div>\n                  ${(e.__sptmninja_expanded?["type",...Object.keys(e).filter(n).sort()]:["type",...b[e.type].sort().filter(n),...o.filter(t=>-1===b[e.type].indexOf(t))]).map(t=>{return`\n                      <span class="prop-name">${t.replace(/_/g," ")}</span>\n                      ${n=e[t],void 0===n?'<span class="prop-value value-undefined">undefined</span>':""===n?'<span class="prop-value">(empty string)</span>':`<span class="prop-value">${n}</span>`}\n                    `;var n}).join("")}\n                </div>\n              </div>`).join(""),Array.from(v.querySelectorAll(".event .remove-button")).forEach(e=>{e.addEventListener("click",e=>{e.stopPropagation(),O.splice(r(e.currentTarget),1),q(!1)})}),Array.from(v.querySelectorAll(".event .expand-button")).forEach(e=>{e.addEventListener("click",e=>{e.stopPropagation();const t=r(e.currentTarget);O[t].__sptmninja_expanded=!O[t].__sptmninja_expanded,q(!1)})}),t&&e&&(v.scrollTop=v.scrollHeight)}function H(...e){"string"!=typeof e[0]||"object"!=typeof e[1]&&"object"!=typeof e[3]||!e[0].startsWith("%cSpot.IM Analytics")&&"Analytics Track"!==e[0]&&!e[0].startsWith("%cSpot.IM Time Spent%c")||("object"==typeof e[3]?L(e[3]):L(e[1]),D(),q()),p.call(unsafeWindow.console,...e)}function U(){unsafeWindow.console.log=H,q()}function G({waitForSpotimObject:e}={}){f=!f;const t=!J();return Y(!0),f?e?d.onFoundSpotimObject(U):t||U():(unsafeWindow.console.log=p,y&&(y=!1,h.parentElement.removeChild(h),unsafeWindow.removeEventListener("keydown",K),GM_removeValueChangeListener(j))),l.set({showEventsViewer:f}),{isShowing:f,shouldRefresh:t}}function K(e){f&&(";"===e.key&&e.ctrlKey&&(l.set({eventsQuery:void 0}),l.set({eventsQueryHistory:void 0})),"KeyK"===e.code&&e.ctrlKey&&(O=[],D(),q()),"KeyP"===e.code&&e.ctrlKey&&(w=!w,unsafeWindow.console.log=w?p:H,q()),"KeyC"===e.code&&e.ctrlKey&&GM_setClipboard(JSON.stringify(O,void 0,2)),"/"===e.key&&e.ctrlKey&&x.focus(),"KeyB"===e.code&&e.ctrlKey&&(O.push({type:"__sptmninja_bookmark"}),q()))}function J(){var e;const t=null===(e=l.get().dontShowEventsInConsole)||void 0===e?void 0:e[unsafeWindow.location.host];return!0!==t&&(!1===t||!l.get().dontShowEventsInConsoleInAllDomains)}function Y(e){var t;l.set({dontShowEventsInConsole:Object.assign(Object.assign({},(t=l.get().dontShowEventsInConsole,null!=t?t:{})),{[unsafeWindow.location.host]:!e})}),e?Q():unsafeWindow.localStorage.removeItem("SPOTIM_DEBUG_API")}function Q(){unsafeWindow.localStorage.setItem("SPOTIM_DEBUG_API","*")}t.toggle=G,l.get().showEventsViewer&&G({waitForSpotimObject:!0}),t.shouldShowEventsInConsole=J,t.setShouldShowEventsInConsole=Y,J()&&Q()},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(3)),a=i(n(1)),l=r(n(0)),d=i(n(8)),u=r(n(41)),c=n(2);t.default=e=>o(void 0,void 0,void 0,(function*(){if(!s.get().isNotFirstRun||e){function t(e){"KeyS"===e.code&&e.metaKey&&(a.set("You are hitting Cmd+S, hit Ctrl+S instead.",{color:l.default().error,emoji:"🤦🏻‍♂️"}),e.preventDefault())}document.addEventListener("keydown",t),a.set(function(){const e=unsafeWindow.document.createElement("style");e.innerHTML=`\n    @font-face {\n      font-family: "BigBlue TerminalPlus";\n      src: url('${GM_getResourceURL("bigBlueFont")}') format('truetype');\n    }\n  `,unsafeWindow.document.head.appendChild(e);const t=c.isWindows?"Alt+S":"Ctrl+S";return(`\n    <style>\n      ${u.default}\n    </style>\n    <div class="welcomeMessageWrapper">\n      <div class="welcomeMessageWrapperMessage">\n        <p>👋 Welcome,</p>\n        <p>You can now hit <span class="shortcut">${t}</span> to open the command palette.</p>\n      </div>\n      <img src="${GM_getResourceURL("welcomeImage")}">\n      <p class="cta">Press ${t}</p>\n    </div>\n  `)}(),{color:l.default().default,title:"Welcome to Spot.IM Ninja Tools!",onMessageUnload:function(){document.removeEventListener("keydown",t)}}),yield s.set({isNotFirstRun:!0}),yield d.setCurrentVersionAsLastShown()}}))},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(9)),a=i(n(1)),l=r(n(0)),d=i(n(14)),u=i(n(2));let c;function p({id:e}){const{url:t,spotName:n}=(()=>{var t,n;const o=c.find(t=>t.id===e),i=null===(t=o)||void 0===t?void 0:t.website_url,r=null===(n=o)||void 0===n?void 0:n.name;return i?{url:i.startsWith("http")?i:`http://${i}`,spotName:r}:{}})(),i={openSite:()=>{t?GM_openInTab(t,!1):a.set("Spot does not have a website assigned to it.",{color:l.default().error,emoji:"🤷🏻‍♂️"})},copySpotId:()=>{GM_setClipboard(e),a.set(`Copied ${e} to clipboard!`,{timeout:2e3,color:l.default().default,emoji:"😃"})},openHostPanel:()=>{d.open({spotId:e})},openPost:()=>o(this,void 0,void 0,(function*(){a.set("Fetching post URLs",{color:l.default().default,emoji:"⏳",progressBarDuration:1e3});try{const e=yield u.gmFetch("https://extract-article-links.dutzi.now.sh/?url="+t,"json");if(!e.length)return void a.set("Could not find any post.",{color:l.default().error,emoji:"😔",timeout:4e3});GM_openInTab(e[0].url,!1),a.hide()}catch(e){a.set("This is probably due to this site's limitations,<br/>try running the command again from a different website.",{title:"Could not fetch post URLs",styleAsMessageBox:!0,color:l.default().error,emoji:"😔",timeout:8e3})}}))};function r({id:e}){return i[e]}return()=>{s.show({commands:[{id:"openSite",description:"Open Website"},{id:"openPost",description:"Open Post Page 🧪"},{id:"copySpotId",description:"Copy Spot Id"},{id:"openHostPanel",description:"Open Host Panel"}],placeholder:`Type a Command for ${n}...`,getCommandImpl:r,commandPaletteId:"spotCommands"})}}t.showSpotCommands=p,t.showPalette=function(){return o(this,void 0,void 0,(function*(){c||(a.set("Fetching Spot Data...",{emoji:"⏳",color:l.default().default,progressBarDuration:1e3}),c=yield u.gmFetch("https://github.com/SpotIM/userscripts/raw/master/ninja-tools/src/spot-data.json","json")),s.show({commands:c,getCommandImpl:p,commandPaletteId:"spotSelector",placeholder:"Type a Spot's Name..."})}))}},function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(23)),s=i(n(20)),a=i(n(46)),l=i(n(47)),d=o(n(8));n(19),l.default(),s.default(),a.default(),d.showIfUpgraded(),r.init()},function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(10),s=o(n(4)),a=o(n(1)),l=o(n(9)),d=i(n(7)),u=n(2),c=o(n(21));t.init=function(){let e,t=[];document.addEventListener("keydown",(function(n){if(n.key&&"escape"===n.key.toLowerCase()&&(s.stop(),a.hide(!0)),("s"===n.key.toLowerCase()||"ד"===n.key)&&(u.isWindows&&n.altKey||n.ctrlKey))return void(n.shiftKey?c.showPalette():l.show({commands:d.default,getCommandImpl:r.getCommandImpl,commandPaletteId:"main"}));if(function(){var e,t;const n=document.activeElement;return(null===(e=n)||void 0===e?void 0:e.getAttribute("contenteditable"))||"INPUT"===(null===(t=n)||void 0===t?void 0:t.tagName)}())return;t.push(n.key.toLowerCase()),clearTimeout(e),!function(e){const t=r.getCommandImplByKeyCombo(e);return!!t&&(t(),!0)}(t.join(""))?e=setTimeout(()=>{t=[]},500):t=[]}))}},function(e,t,n){"use strict";n.r(t),t.default='@keyframes spotim-scroll-to-comments-appear {\n  0% {\n    transform: scale(0.7);\n    opacity: 0;\n  }\n  90% {\n    transform: scale(1.02);\n    opacity: 1;\n  }\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n\n.reset-css {\n  azimuth: initial;\n  border-collapse: initial;\n  border-spacing: initial;\n  caption-side: initial;\n  color: initial;\n  cursor: initial;\n  direction: initial;\n  elevation: initial;\n  empty-cells: initial;\n  font-family: initial;\n  font-size: initial;\n  font-style: initial;\n  font-variant: initial;\n  font-weight: initial;\n  font: initial;\n  letter-spacing: initial;\n  line-height: initial;\n  list-style-image: initial;\n  list-style-position: initial;\n  list-style-type: initial;\n  list-style: initial;\n  orphans: initial;\n  pitch-range: initial;\n  pitch: initial;\n  quotes: initial;\n  richness: initial;\n  speak-header: initial;\n  speak-numeral: initial;\n  speak-punctuation: initial;\n  speak: initial;\n  speech-rate: initial;\n  stress: initial;\n  text-align: initial;\n  text-indent: initial;\n  text-transform: initial;\n  visibility: initial;\n  voice-family: initial;\n  volume: initial;\n  white-space: initial;\n  widows: initial;\n  word-spacing: initial;\n  -webkit-font-smoothing: unset;\n}\n\n.message {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  text-align: center;\n  background: red;\n  color: white;\n  font-weight: bold;\n  font-family: Helvetica;\n  font-size: 18px;\n  padding: 10px;\n  line-height: 1.5;\n  z-index: 100000000000;\n  animation: spotim-scroll-to-comments-appear 0.2s ease-out;\n  direction: ltr;\n  max-width: 600px;\n  margin: 5em auto;\n  border-radius: 1em;\n  overflow: hidden;\n  border: 3px solid;\n  box-shadow: 0px 1px 4px #00000075, 0px 1px 24px #00000075,\n    0px 0px 40px 5px #0000001c inset;\n  text-shadow: 0px 2px #00000033;\n}\n\n.below_notifications {\n  margin: 10em auto;\n}\n\n/*\n * Why not use normal "table" HTML tag you ask?\n *\n * Well, initially this extension would render dierctly to the document,\n * I only started rendering to a shadow-dom long after I wrote this.\n * This caused a lot of CSS override issues so I succombed and decided to\n * use only divs everywere.\n * Someday I\'ll clear this thing up.\n */\n.message .table {\n  display: table;\n  border: none;\n  width: 100%;\n  text-align: left;\n  border-collapse: collapse;\n  margin: 0;\n  color: inherit;\n  font-weight: inherit;\n}\n\n.message .table .tr {\n  display: table-row;\n  background: initial !important;\n}\n\n.message .table .td {\n  display: table-cell;\n  padding: initial;\n  border: none;\n  border-bottom: 1px solid #00000021;\n}\n\n.message.dark .table .td {\n  border-bottom: 1px solid #ffffff21;\n}\n\n.message .table .tr:last-child .td {\n  border-bottom: none;\n}\n\n.message .table .td:first-child {\n  text-align: right;\n  padding-right: 12px;\n}\n\n.scrollable_area {\n  max-height: calc(100vh - 300px);\n  overflow-y: auto;\n}\n\n.close_button {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  color: #ffffff73;\n  cursor: pointer;\n  padding: 10px;\n  line-height: 11px;\n  z-index: 11;\n}\n\n.close_button:active {\n  text-shadow: 0px -2px #00000033;\n}\n\n.message.hideCloseButton .close_button {\n  display: none;\n}\n\n.inset_shadow {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  box-shadow: 0px 0px 3px black inset;\n  z-index: 100;\n  border-radius: 14px;\n  pointer-events: none;\n}\n\n.title {\n  padding: 12px 0px 10px;\n  box-shadow: 0px -20px 50px -24px #00ffff36 inset, 0px 1px 1px #00000038;\n  margin: -10px -10px 8px;\n  position: relative;\n  z-index: 10;\n}\n\n.dark .title {\n  box-shadow: 0px -20px 50px -24px #c3c3c336 inset, 0px 1px 1px #cccccc38;\n}\n\n.titleIcon {\n  margin-inline-end: 12px;\n}\n\n.muted_text {\n  text-shadow: none;\n  color: #ffffff73;\n  font-weight: normal;\n}\n\n.weight_normal {\n  font-weight: normal;\n}\n\n.muted_result {\n  font-weight: normal;\n  opacity: 0.8;\n}\n\n.weight_bold {\n  font-weight: bold;\n}\n\n.pallete_row_main_col {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid #00000021;\n  padding-bottom: 1px;\n  min-height: 32px;\n  cursor: pointer;\n}\n\n.palette_row_description {\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  margin-inline-start: 10px;\n  flex: 1;\n  text-align: left;\n}\n\n.palette_row_recently_used {\n  font-weight: normal;\n  font-size: 0.7em;\n  opacity: 0.7;\n  margin: 0px 7px;\n  flex: 0 0 auto;\n}\n\n.margin_top {\n  margin-top: 12px;\n}\n\n.emoji {\n  position: absolute;\n  font-size: 6em;\n  transform: translateY(-50%);\n  top: 50%;\n  left: -15px;\n  z-index: -1;\n  text-shadow: 0px 0px 10px #0000006e;\n  height: 150px;\n}\n\n.message-box-content {\n  font-size: 0.9em;\n  text-shadow: none;\n  font-weight: normal;\n}\n\n.title + .emoji {\n  margin-top: 20px;\n}\n\n.message_progress {\n  background: black;\n  position: absolute;\n  left: 0px;\n  height: 100%;\n  width: 0%;\n  top: 0px;\n  opacity: 0.2;\n  z-index: -1;\n  transition: width 0.2s ease-out;\n}\n\n.code {\n  font-family: monaco;\n  font-size: 13px;\n  color: #d3d5da;\n  margin: 10px 0px;\n  display: inline-block;\n  background: #2b579c;\n  padding: 4px 8px;\n  border-radius: 5px;\n}\n\n.mono {\n  background: #0000003d;\n  padding: 1px 7px;\n  border-radius: 5px;\n  box-shadow: 0px 1px 0px #00000063;\n  color: white;\n  font-family: monaco;\n  font-size: 15px;\n  margin: 4px 0px;\n  display: inline-block;\n  margin-inline-end: 8px;\n}\n\n.modifier-key {\n  font-family: Helvetica, Arial, sans-serif;\n}\n\n.dark .mono {\n  background: #ffffff3d;\n}\n\n.hidden {\n  display: none;\n}\n\n.detailed_description {\n  font-weight: normal;\n  font-size: 0.8em;\n  margin: 2px 0px 5px;\n  color: #ffffffbf;\n}\n\n.mono a {\n  color: inherit;\n  text-decoration: none;\n  outline: none;\n}\n\n.mono a:focus,\n.mono a:hover {\n  text-decoration: underline;\n}\n\n.input {\n  width: 100%;\n  padding: 10px;\n  box-sizing: border-box;\n  font-size: 20px;\n  background: #ffffff33;\n  border: none;\n  border-radius: 6px;\n  outline: none;\n  box-shadow: 0px 3px 9px #0000002e inset;\n  border-top: 1px solid #0000004f;\n  border-bottom: 1px solid #ffffff42;\n  color: white;\n  font-weight: bold;\n}\n\n.results {\n  max-height: 270px;\n  overflow-y: scroll;\n  padding-right: 10px;\n}\n\n.inputWrapper + .results:not(:empty) {\n  margin-top: 12px;\n}\n\n.results .tr {\n  cursor: pointer;\n}\n\n.inputWrapper + .results .table .tr .td:first-child {\n  padding-right: 10px;\n}\n\n.inputWrapper + .results .table .tr .td:nth-child(2) {\n  transform: translateX(36px);\n}\n\n::-webkit-scrollbar {\n  width: 6px;\n}\n\n::-webkit-scrollbar-track {\n  border-radius: 10px;\n  background: #0000001a;\n}\n\n::-webkit-scrollbar-thumb {\n  border-radius: 10px;\n  background: #00000036;\n}\n\n.gutterActions {\n  display: flex;\n  margin: -10px;\n  padding: 10px 0px;\n  border-top: 1px solid #0000000f;\n  background: linear-gradient(#ffffff2b, #0000001a);\n  margin-top: 0px;\n  z-index: 1;\n  position: relative;\n}\n\n.gutterActions .gutterActionsButton {\n  font-size: inherit;\n  font-family: inherit;\n  color: inherit;\n  background: none;\n  border: none;\n  flex: auto;\n  margin: -10px 0px;\n  border-right: 1px solid #00000038;\n  cursor: pointer;\n  padding: 1em 0px;\n}\n\npre {\n  text-align: left;\n  padding: 0px 10px;\n  white-space: pre-wrap;\n  word-break: break-word;\n  font-size: 0.8em;\n  text-shadow: none;\n  font-weight: normal;\n  -webkit-font-smoothing: auto;\n  background: #0000001c;\n  padding: 10px 14px;\n  box-shadow: 0px 0px 10px -7px black inset;\n  border-radius: 10px;\n  margin: 0px;\n  border: 1px solid #00000029;\n}\n'},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(2)),a=i(n(1)),l=r(n(0)),d=r(n(12)),u=n(28),c=r(n(31));let p;function f(){return o(this,void 0,void 0,(function*(){let e;function t(){return o(this,void 0,void 0,(function*(){const t=s.getLauncherEl();let n;t?n=yield fetch(`https://api-2-0.spot.im/v1.0.0/config/launcher/${s.getSpotId(t)}/${s.getPostId(t)}/vendor,init,conversation`):unsafeWindow.location.href.match(/https:\/\/api-2-0.spot.im\/v1.0.0\/config\/launcher\/.*?\/.*?\/.*/)&&(n=yield fetch(unsafeWindow.location.href));const o=yield n.json(),i={config:o.init_data.config,assetsConfig:o.assets_config};var r;e&&!d.default(i,e)&&(r=u.diff(i,e),h(),GM_notification({title:"A configuration has changed!",text:`${window.location.hostname} — Detected configuration change`,onclick:()=>{window.focus()}}),a.set(`<pre>${c.default(r,{keyColor:"white; font-weight: bold;",numberColor:"#FFEB3B",nullColor:"#FFEB3B",falseColor:"#FFEB3B",trueColor:"#FFEB3B",stringColor:"#FFEB3B"})}</pre>`,{title:"A configuration has changed!",color:l.default().default,overflow:"scroll"})),e=i}))}t(),p=setInterval(t,1e3),a.set("I will notify you on configuration changes!",{timeout:4e3,color:l.default().default,emoji:"😃"})}))}function h(e){clearInterval(p),p=!1,e&&a.set("I won't notify you on changes!",{timeout:4e3,color:l.default().default,emoji:"❌"})}t.toggleNotifyOnChange=function(){p?h(!0):f()}},function(e,t,n){var o,i,r;i=[t,n(29),n(16),n(17),n(18),n(30)],void 0===(r="function"==typeof(o=function(e,t,n,o,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detailedDiff=e.updatedDiff=e.deletedDiff=e.diff=e.addedDiff=void 0;var s=c(t),a=c(n),l=c(o),d=c(i),u=c(r);function c(e){return e&&e.__esModule?e:{default:e}}e.addedDiff=a.default,e.diff=s.default,e.deletedDiff=l.default,e.updatedDiff=d.default,e.detailedDiff=u.default})?o.apply(t,i):o)||(e.exports=r)},function(e,t,n){var o,i,r;i=[e,t,n(6)],void 0===(r="function"==typeof(o=function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default=function e(t,r){if(t===r)return{};if(!(0,n.isObject)(t)||!(0,n.isObject)(r))return r;var s=(0,n.properObject)(t),a=(0,n.properObject)(r),l=Object.keys(s).reduce((function(e,t){return a.hasOwnProperty(t)?e:i({},e,o({},t,void 0))}),{});return(0,n.isDate)(s)||(0,n.isDate)(a)?s.valueOf()==a.valueOf()?{}:a:Object.keys(a).reduce((function(t,r){if(!s.hasOwnProperty(r))return i({},t,o({},r,a[r]));var l=e(s[r],a[r]);return(0,n.isObject)(l)&&(0,n.isEmpty)(l)&&!(0,n.isDate)(l)?t:i({},t,o({},r,l))}),l)},e.exports=t.default})?o.apply(t,i):o)||(e.exports=r)},function(e,t,n){var o,i,r;i=[e,t,n(16),n(17),n(18)],void 0===(r="function"==typeof(o=function(e,t,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n),s=l(o),a=l(i);function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){return{added:(0,r.default)(e,t),deleted:(0,s.default)(e,t),updated:(0,a.default)(e,t)}},e.exports=t.default})?o.apply(t,i):o)||(e.exports=r)},function(e,t,n){e.exports=function(){"use strict";var e={keyColor:"dimgray",numberColor:"lightskyblue",stringColor:"lightcoral",trueColor:"lightseagreen",falseColor:"#f66578",nullColor:"cornflowerblue"},t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#x60;","=":"&#x3D;"};return function(n,o){void 0===o&&(o={});var i=typeof n;"string"!==i&&(n=JSON.stringify(n,null,2)||i);var r=Object.assign({},e,o);return(n=n.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+]?\d+)?)/g,(function(e){var n,o=r.numberColor,i="";return/^"/.test(e)?/:$/.test(e)?o=r.keyColor:(o=r.stringColor,e='"'+(n=e.substr(1,e.length-2),String(n).replace(/[&<>"'`=]/g,(function(e){return t[e]})))+'"',i="word-wrap:break-word;white-space:pre-wrap;"):o=/true/.test(e)?r.trueColor:/false/.test(e)?r.falseColor:/null/.test(e)?r.nullColor:o,'<span style="'+i+"color:"+o+'">'+e+"</span>"}))}}()},function(e,t,n){"use strict";n.r(t),t.default=".whatsNewWrapper {\n  text-align: left;\n  margin-top: -7px;\n  font-weight: normal;\n}\n\n.whatsNewContent {\n  max-height: calc(100vh - 10em - 180px);\n  overflow-y: auto;\n  overflow-x: hidden;\n  padding: 0px 10px;\n  margin: 0px -10px;\n  padding-top: 1em;\n}\n\n.whatsNewContent .whatsNewTitle {\n  margin-left: -10px;\n  padding-left: 1em;\n  margin-right: -10px;\n  font-weight: bold;\n  padding-bottom: 0em;\n  padding-top: 0.5em;\n  margin-top: 0.5em;\n  border-top: 1px solid #00000038;\n}\n\n.whatsNewContent .whatsNewTitle.latest {\n  text-shadow: 0px 0px 10px #ffffff91;\n}\n\n.whatsNewContent .whatsNewTitle:not(.latest) {\n  opacity: 0.75;\n}\n\n.whatsNewContent .whatsNewPreviousTitle {\n  margin-left: -10px;\n  padding-left: 1em;\n  margin-right: -10px;\n  border-top: 1px solid #00000040;\n  padding-top: 1em;\n  font-weight: bold;\n  padding-bottom: 0em;\n  border-bottom: 1px solid #3c3c3c26;\n  padding: 0.5em 1em;\n  background: #00000017;\n  text-align: left;\n}\n\n.whatsNewFeatureRequest {\n  text-align: left;\n  padding: 0.5em calc(0.5em + 10px);\n  background: #8bc34a;\n  margin: 0px -10px;\n  text-align: left;\n  border-top: 1px solid #00000078;\n}\n\n.whatsNewFeatureRequest a {\n  color: white;\n}\n\n.whatsNewContent .whatsNewTitle:first-child {\n  margin-top: -18px;\n  border: none;\n  background: none;\n}\n\n.whatsNewContent p {\n  font-weight: bold;\n  margin: 0px 0.6em;\n}\n\n.whatsNewContent ul {\n  margin-top: 0.4em;\n  list-style: disc;\n  margin-bottom: 0px;\n}\n\n.whatsNewContent ul:last-child {\n  margin-bottom: 1em;\n}\n\n.whatsNewContent ul.latest {\n  text-shadow: 0px 0px 10px #ffffff70;\n}\n\n.whatsNewContent ul:not(.latest) {\n  opacity: 0.75;\n}\n\n.whatsNewContent .whatsNewDescription {\n  font-size: 0.8em;\n  opacity: 0.6;\n}\n"},function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(1)),s=o(n(2)),a=i(n(7)),l=i(n(0));t.show=()=>{r.set(s.renderTable([{keyCombo:s.isWindows?"alt+s":'<span class="modifier-key">⌃</span>s',description:"Open Command Palette"},{keyCombo:s.isWindows?'alt+<span class="modifier-key">⇧</span>+s':'<span class="modifier-key">⌃⇧</span>s',description:"Open Spots List"},...a.default,{keyCombo:"escape",description:"Hide Floating Message"}].map(e=>[`<span\n          title="${e.keyCombo?"":"This has no key combo assigned to it"}"\n          class="\n            mono\n            ${e.keyCombo?"":"hidden"}\n          ">\n          ${e.keyCombo?e.keyCombo:"×"}\n        </span>`,e.description+(e.detailedDescription?`<div class="detailed_description">${e.detailedDescription}</div>`:"")])),{color:l.default().default,title:"Available Commands",overflow:"scroll"})}},function(e,t,n){var o;o={},e.exports=o,o.simpleFilter=function(e,t){return t.filter((function(t){return o.test(e,t)}))},o.test=function(e,t){return null!==o.match(e,t)},o.match=function(e,t,n){n=n||{};var o,i=0,r=[],s=t.length,a=0,l=0,d=n.pre||"",u=n.post||"",c=n.caseSensitive&&t||t.toLowerCase();e=n.caseSensitive&&e||e.toLowerCase();for(var p=0;p<s;p++)o=t[p],c[p]===e[i]?(o=d+o+u,i+=1,l+=1+l):l=0,a+=l,r[r.length]=o;return i===e.length?(a=c===e?1/0:a,{rendered:r.join(""),score:a}):null},o.filter=function(e,t,n){return t&&0!==t.length?"string"!=typeof e?t:(n=n||{},t.reduce((function(t,i,r,s){var a=i;n.extract&&(a=n.extract(i));var l=o.match(e,a,n);return null!=l&&(t[t.length]={string:l.rendered,score:l.score,index:r,original:i}),t}),[]).sort((function(e,t){var n=t.score-e.score;return n||e.index-t.index}))):[]}},function(e,t,n){"use strict";n.r(t),t.default=".fuzzyHighlight {\n  color: #ffeb3b;\n  font-weight: bold;\n}\n\n.inputNotEmpty .pallete_row_main_col {\n  font-weight: normal;\n}\n\n.inputWrapper {\n  position: relative;\n}\n\n.indicators {\n  display: flex;\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  height: 100%;\n  align-items: center;\n}\n\n.titleIcon {\n  margin-inline-end: 9px;\n  height: 100%;\n  display: flex;\n  align-items: center;\n}\n\n.input::placeholder {\n  color: #ffffff80;\n}\n\n.badgeWrapper {\n  display: flex;\n  align-items: baseline;\n}\n\n.devBadge {\n  padding: 3px 7px 1px;\n  border-radius: 6px 0px 0px 6px;\n  background: #e91e63;\n  font-weight: normal;\n  text-transform: uppercase;\n  font-size: 0.7em;\n  margin-right: 0px;\n  display: block;\n  text-shadow: none;\n  box-shadow: 0px 0px 6px inset #000000a1, 0px -1px #00000080;\n}\n\n.buildAge {\n  font-size: 0.8em;\n  padding: 3px 7px 1px;\n  border-radius: 0px 6px 6px 0px;\n  background: #ff5722;\n  font-weight: normal;\n  font-size: 0.7em;\n  margin-right: 12px;\n  display: block;\n  color: white;\n  text-shadow: none;\n  box-shadow: 0px -1px #00000080;\n}\n"},function(e,t,n){"use strict";n.r(t),t.default=".events-viewer-wrapper {\n  transform: translate(0px);\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  z-index: 2147483647;\n  height: 100vh;\n  width: calc(100vw - 360px);\n  pointer-events: none;\n}\n\n.events-viewer {\n  position: fixed;\n  left: 100%;\n  bottom: 0px;\n  top: 20px;\n  font-family: Helvetica;\n  height: calc(100vh - 20px);\n  display: flex;\n  flex-direction: column;\n  width: 340px;\n  font-size: 16px;\n  z-index: 2147483647;\n  border-radius: 10px 10px 0px 0px;\n  overflow: hidden;\n  background: #ffffff26;\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n  border: 1px solid #00000021;\n  pointer-events: all;\n  /* box-shadow: 0px 0px 12px -6px black; */\n}\n\n@-moz-document url-prefix() {\n  .events-viewer {\n    background: #ffffffde;\n  }\n}\n\n.events-viewer,\n.events-viewer * {\n  box-sizing: initial;\n}\n\n.events-viewer.paused {\n  opacity: 0.775;\n}\n\n.events-viewer.click-through {\n  pointer-events: none;\n  opacity: 0.6;\n}\n\n.events-list {\n  overflow: scroll;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  width: 340px;\n}\n\n.instructions {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  color: #bbb;\n  line-height: 1.5em;\n  font-size: 0.9em;\n  padding: 62px 16px 16px;\n  text-align: right;\n}\n\n.event {\n  margin: 0px 10px 10px;\n  text-align: right;\n  position: relative;\n}\n\n/* .event:not(.expanded) .container {\n  cursor: pointer;\n} */\n\n.event .container {\n  background: #467fdb;\n  color: white;\n  padding: 7px 10px;\n  border-radius: 10px;\n  display: inline-flex;\n  flex-direction: column;\n  box-shadow: 0px 0px 10px -4px black, 0px 2px 10px -4px #00a1ff inset;\n  border: 2px solid transparent;\n  text-align: left;\n  min-width: 62px;\n}\n\n.dark .event .container {\n  background: #121212;\n  box-shadow: 0px 0px 10px -4px black, 0px 2px 10px -4px #555 inset;\n}\n\n.event .toolbar {\n  position: absolute;\n  z-index: 1;\n  opacity: 0;\n  will-change: opacity;\n  transition: opacity 0.2s ease-out;\n  right: 10px;\n  top: 7px;\n}\n\n.event .container:hover .toolbar {\n  opacity: 1;\n}\n\n.event .toolbar .button {\n  border-radius: 100%;\n  width: 11px;\n  height: 11px;\n  border: none;\n  padding: 0px;\n  cursor: pointer;\n  margin-right: 2px;\n  box-shadow: 0px -1px #00000038;\n}\n\n.event .toolbar .button:last-child {\n  margin-right: 0px;\n}\n\n.event .toolbar .remove-button {\n  background: #ff4b4a;\n}\n\n.event .toolbar .expand-button {\n  background: #00c543;\n}\n\n.event.expanded .toolbar .expand-button {\n  background: #ffb43b;\n}\n\n.event .prop-name:nth-child(2) {\n  margin-top: 0px;\n}\n\n.event .prop-name {\n  text-transform: uppercase;\n  font-size: 0.7em;\n  align-self: start;\n  margin: 6px 0px 3px;\n  opacity: 0.6;\n}\n\n.event .prop-value {\n  align-self: flex-start;\n  word-break: break-word;\n}\n\n.event .prop-value.value-undefined {\n  /* opacity: 0.75; */\n}\n\n.query-input-wrapper {\n  position: fixed;\n  background: #ffffff26;\n  z-index: 10;\n  backdrop-filter: blur(10px);\n}\n\n.query-input-wrapper .help {\n  position: absolute;\n  z-index: 10;\n  right: 19px;\n  top: 17px;\n  cursor: pointer;\n  background: #ececec;\n  color: #989898;\n  border-radius: 100%;\n  width: 22px;\n  height: 22px;\n  text-align: center;\n  border: 1px solid #ddd;\n  box-shadow: 0px 0px 9px -7px black inset;\n  text-decoration: none;\n}\n\n.query-input {\n  width: 300px;\n  padding: 10px;\n  margin: 10px;\n  border-radius: 10px;\n  border: none;\n  font-size: 1em;\n  box-shadow: 0px 0px 0px 2px #467fdb, 0px 0px 10px -5px black,\n    0px 1px 7px -5px black inset;\n  outline: none;\n}\n\n.dark .query-input {\n  box-shadow: 0px 0px 0px 2px #121212, 0px 0px 10px -5px black;\n}\n\n.resizer {\n  position: absolute;\n  background: transparent;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  height: 7px;\n  cursor: move;\n  z-index: 11;\n}\n\n.bookmark {\n  position: relative;\n  text-align: center;\n  margin: 3px 0px 8px;\n}\n\n.bookmark svg {\n  color: #f44336;\n  width: 13px;\n}\n\n.bookmark:before {\n  content: '';\n  position: absolute;\n  left: 12px;\n  top: 8px;\n  border-top: 1px solid #f44336;\n  right: calc(50% + 12px);\n}\n\n.bookmark:after {\n  content: '';\n  position: absolute;\n  left: calc(50% + 12px);\n  top: 8px;\n  border-top: 1px solid #f44336;\n  right: 12px;\n}\n\n.bookmark + .bookmark {\n  display: none;\n}\n"},function(e,t){t.quote=function(e){return e.map((function(e){return e&&"object"==typeof e?e.op.replace(/(.)/g,"\\$1"):/["\s]/.test(e)&&!/'/.test(e)?"'"+e.replace(/(['\\])/g,"\\$1")+"'":/["'\s]/.test(e)?'"'+e.replace(/(["\\$`!])/g,"\\$1")+'"':String(e).replace(/([A-z]:)?([#!"$&'()*,:;<=>?@\[\\\]^`{|}])/g,"$1\\$2")})).join(" ")};for(var n="(?:"+["\\|\\|","\\&\\&",";;","\\|\\&","\\<\\(",">>",">\\&","[&;()|<>]"].join("|")+")",o="",i=0;i<4;i++)o+=(Math.pow(16,8)*Math.random()).toString(16);t.parse=function(e,t,i){var r=function(e,t,i){var r=new RegExp(["("+n+")",'((\\\\[\'"|&;()<> \\t]|[^\\s\'"|&;()<> \\t])+|"((\\\\"|[^"])*?)"|'+"'((\\\\'|[^'])*?)')*"].join("|"),"g"),s=e.match(r).filter(Boolean),a=!1;if(!s)return[];t||(t={});i||(i={});return s.map((function(e,r){if(!a){if(RegExp("^"+n+"$").test(e))return{op:e};for(var l=i.escape||"\\",d=!1,u=!1,c="",p=!1,f=0,h=e.length;f<h;f++){var m=e.charAt(f);if(p=p||!d&&("*"===m||"?"===m),u)c+=m,u=!1;else if(d)m===d?d=!1:"'"==d?c+=m:m===l?(f+=1,c+='"'===(m=e.charAt(f))||m===l||"$"===m?m:l+m):c+="$"===m?g():m;else if('"'===m||"'"===m)d=m;else{if(RegExp("^"+n+"$").test(m))return{op:e};if(RegExp("^#$").test(m))return a=!0,c.length?[c,{comment:e.slice(f+1)+s.slice(r+1).join(" ")}]:[{comment:e.slice(f+1)+s.slice(r+1).join(" ")}];m===l?u=!0:c+="$"===m?g():m}}return p?{op:"glob",pattern:c}:c}function g(){var n,i;if(f+=1,"{"===e.charAt(f)){if(f+=1,"}"===e.charAt(f))throw new Error("Bad substitution: "+e.substr(f-2,3));if((n=e.indexOf("}",f))<0)throw new Error("Bad substitution: "+e.substr(f));i=e.substr(f,n-f),f=n}else/[*@#?$!_\-]/.test(e.charAt(f))?(i=e.charAt(f),f+=1):(n=e.substr(f).match(/[^\w\d_]/))?(i=e.substr(f,n.index),f+=n.index-1):(i=e.substr(f),f=e.length);return function(e,n,i){var r="function"==typeof t?t(i):t[i];void 0===r&&""!=i?r="":void 0===r&&(r="$");return"object"==typeof r?n+o+JSON.stringify(r)+o:n+r}(0,"",i)}})).reduce((function(e,t){return void 0===t?e:e.concat(t)}),[])}(e,t,i);return"function"!=typeof t?r:r.reduce((function(e,t){if("object"==typeof t)return e.concat(t);var n=t.split(RegExp("("+o+".*?"+o+")","g"));return 1===n.length?e.concat(n[0]):e.concat(n.filter(Boolean).map((function(e){return RegExp("^"+o).test(e)?JSON.parse(e.split(o)[1]):e})))}),[])}},function(e,t,n){"use strict";const o=n(39),i=new Map;function r(e,t){t={caseSensitive:!1,...t};const n=e+JSON.stringify(t);if(i.has(n))return i.get(n);const r="!"===e[0];r&&(e=e.slice(1)),e=o(e).replace(/\\\*/g,".*");const s=new RegExp(`^${e}$`,t.caseSensitive?"":"i");return s.negated=r,i.set(n,s),s}e.exports=(e,t,n)=>{if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError(`Expected two arrays, got ${typeof e} ${typeof t}`);if(0===t.length)return e;const o="!"===t[0][0];t=t.map(e=>r(e,n));const i=[];for(const n of e){let e=o;for(const o of t)o.test(n)&&(e=!o.negated);e&&i.push(n)}return i},e.exports.isMatch=(e,t,n)=>{const o=Array.isArray(e)?e:[e],i=Array.isArray(t)?t:[t];return o.some(e=>i.every(t=>{const o=r(t,n),i=o.test(e);return o.negated?!i:i}))}},function(e,t,n){"use strict";const o=/[|\\{}()[\]^$+*?.-]/g;e.exports=e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(o,"\\$&")}},function(e,t,n){"use strict";n.r(t),t.default='<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bookmark" class="svg-inline--fa fa-bookmark fa-w-12" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M0 512V48C0 21.49 21.49 0 48 0h288c26.51 0 48 21.49 48 48v464L192 400 0 512z"></path></svg>\n'},function(e,t,n){"use strict";n.r(t),t.default="@keyframes cta {\n  0% {\n    color: #ffffff;\n    text-shadow: inherit;\n  }\n  74.99% {\n    color: #ffffff;\n    text-shadow: inherit;\n  }\n  75% {\n    color: transparent;\n    text-shadow: none;\n  }\n  100% {\n    color: transparent;\n    text-shadow: none;\n  }\n}\n\n.welcomeMessageWrapper {\n  margin: -7px -10px -18px;\n}\n\n.welcomeMessageWrapper img {\n  width: 100%;\n  height: 294px;\n}\n\n.welcomeMessageWrapper .welcomeMessageWrapperMessage {\n  text-align: left;\n  padding: 20px;\n  margin-bottom: -65px;\n}\n\n.welcomeMessageWrapper .welcomeMessageWrapperMessage p:first-child {\n  margin-top: 0px;\n}\n\n.welcomeMessageWrapper .shortcut {\n  background: #ff37fd;\n  padding: 6px 8px;\n  border-radius: 5px;\n  box-shadow: 0px 0px 2px #000000a8;\n}\n\n.welcomeMessageWrapper .cta {\n  position: absolute;\n  bottom: 63px;\n  left: 21px;\n  animation: cta linear 1.4s infinite;\n  font-family: 'BigBlue TerminalPlus';\n  -webkit-font-smoothing: none;\n  font-weight: normal;\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2);t.default=(()=>{const e=new Date;return e.getHours()+":"+o.padTime(e.getMinutes().toString())})()},function(e,t,n){"use strict";n.r(t),t.default=".infoLine {\n  display: flex;\n  justify-content: space-between;\n  font-weight: normal;\n}\n\n.copyButton {\n  border: none;\n  text-shadow: none;\n  display: inline-block;\n  margin-top: 0px;\n  right: 9px;\n  font-size: 0.8em;\n  background: #00000030;\n  padding: 1px 7px;\n  border-radius: 5px;\n  cursor: pointer;\n  margin: 2px;\n  font-family: inherit;\n  color: inherit;\n  line-height: inherit;\n  visibility: hidden;\n  position: relative;\n  outline: none;\n}\n\n.copyButton .checkmark {\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  opacity: 0;\n}\n\n.copyButton.showCheckmark .checkmark {\n  opacity: 1;\n}\n\n.copyButton.showCheckmark > div:nth-child(2) {\n  visibility: hidden;\n}\n\n.infoLine:hover .copyButton {\n  visibility: visible;\n}\n\n[data-rail-placeholder] div {\n  position: relative;\n  background: #00000040;\n  padding: 0px 6px;\n  border-radius: 4px;\n  font-size: 0.8em;\n  overflow: hidden;\n  margin: 3px 0px;\n}\n\n@keyframes progress {\n  0% {\n    width: 0%;\n  }\n  100% {\n    width: 100%;\n  }\n}\n\n[data-rail-placeholder] div:before {\n  animation: progress 1s ease-out 0.2s;\n  animation-fill-mode: both;\n  animation-direction: normal;\n  content: '';\n  position: absolute;\n  top: 0px;\n  bottom: 0px;\n  left: 0px;\n  width: 0%;\n  background: #00000038;\n  z-index: -1;\n}\n"},function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(1)),s=i(n(0)),a=i(n(45));t.show=function({prompt:e,initialValue:t}){return new Promise(n=>{var o,i,l,d,u,c;const{messageBodyEl:p}=r.set(`<style>\n        ${a.default}\n      </style>\n      <div class="input prompt">\n        <div class="promptMessage">${e}</div>\n        <input class="promptInput" value="${null!=t?t:""}">\n      </div>\n      <div class="results"></div>`,{color:s.default().default,hideCloseButton:!0});null===(i=null===(o=p)||void 0===o?void 0:o.querySelector("input"))||void 0===i||i.addEventListener("keydown",(function e(t){var o,i,s,a;13===t.keyCode&&(null===(i=null===(o=p)||void 0===o?void 0:o.querySelector("input"))||void 0===i||i.removeEventListener("keydown",e),r.hide(),n(null===(a=null===(s=p)||void 0===s?void 0:s.querySelector("input"))||void 0===a?void 0:a.value))})),null===(d=null===(l=p)||void 0===l?void 0:l.querySelector("input"))||void 0===d||d.focus(),t&&(null===(c=null===(u=p)||void 0===u?void 0:u.querySelector("input"))||void 0===c||c.setSelectionRange(0,t.length))})}},function(e,t,n){"use strict";n.r(t),t.default=".prompt.input {\n  display: flex;\n  padding: 0px;\n}\n\n.promptInput {\n  width: 100%;\n  padding: 10px;\n  box-sizing: border-box;\n  font-size: 20px;\n  background: none;\n  border: none;\n  outline: none;\n  color: white;\n  font-weight: bold;\n}\n\n.promptInput::placeholder {\n  color: #ffffff80;\n}\n\n.promptMessage {\n  flex-shrink: 0;\n  display: flex;\n  padding: 10px;\n  align-items: center;\n  border-right: 1px solid #00000000;\n  padding: 0px 10px;\n  margin-top: 1px;\n  text-shadow: none;\n  opacity: 1;\n  font-weight: normal;\n  background: linear-gradient(#90b0e5, #8a8a8a6b);\n  border-radius: 6px 0px 0px 6px;\n  color: #ffffffdb;\n  box-shadow: 1px 0px 1px #00000026, 2px 2px 10px -5px black inset;\n}\n\n.dark .promptMessage {\n  background: linear-gradient(#96989c, #8a8a8a6b);\n}\n"},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(3)),a=r(n(10)),l=i(n(2));t.default=()=>o(void 0,void 0,void 0,(function*(){if(s.get().showVersionsOnLoad){l.onFoundSpotimObject((function e(){unsafeWindow.__SPOTIM__.SERVICES.configProvider._data.assets_config?a.default.ssv():setTimeout(()=>{l.onFoundSpotimObject(e)},500)}))}}))},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(3));t.default=()=>{unsafeWindow.__spotim_ninja_tools_set_creds__=(e,t)=>o(void 0,void 0,void 0,(function*(){yield GM_setValue("email",e),yield GM_setValue("password",t),console.log("successfully set creds!")})),unsafeWindow.__spotim_ninja_tools_set_prefs__=e=>o(void 0,void 0,void 0,(function*(){const t=r.get(),n=Object.assign(Object.assign({},t),e);yield r.set(n),console.log("successfully set prefs!"),console.log(n)}))}}]);